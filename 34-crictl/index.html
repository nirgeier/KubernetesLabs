<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A collection of Kubernetes Labs for learning and practicing Kubernetes skills."><meta name=author content="Nir Geier - nirgeier@gmail.com"><link href=https://nirgeier.github.io/KubernetesLabs/34-crictl/ rel=canonical><link href=../30-Keda/ rel=prev><link href=../36-kubectl-Deep-Dive/ rel=next><link rel=icon href=../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>34 crictl - KubernetesLabs</title><link rel=stylesheet href=../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../css/print-site.css><link rel=stylesheet href=../css/print-site-material.css><link rel=stylesheet href="../assets/stylesheets/codewizard.css?v=1772199666"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#crictl-container-runtime-interface-cli class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <!-- Link to home --> <a href=.. title=KubernetesLabs class="md-header__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KubernetesLabs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 34 crictl </span> </div> </div> </div> <div class=m-social__top> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_0> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../welcome/ class=md-tabs__link> Start Here </a> </li> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../05-Services/ class=md-tabs__link> Networking </a> </li> <li class=md-tabs__item> <a href=../31-RBAC/ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../06-DataStore/ class=md-tabs__link> Storage & Config </a> </li> <li class=md-tabs__item> <a href=../14-Logging/ class=md-tabs__link> Observability </a> </li> <li class=md-tabs__item> <a href=../13-HelmChart/ class=md-tabs__link> GitOps & CI/CD </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../11-CRD-Custom-Resource-Definition/ class=md-tabs__link> Advanced </a> </li> <li class=md-tabs__item> <a href=../Tasks/ class=md-tabs__link> Tasks </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=KubernetesLabs class="md-nav__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> KubernetesLabs </label> <div class=md-nav__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../welcome/ class=md-nav__link> <span class=md-ellipsis> Start Here </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=.. class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../05-Services/ class=md-nav__link> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../31-RBAC/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../06-DataStore/ class=md-nav__link> <span class=md-ellipsis> Storage & Config </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../14-Logging/ class=md-nav__link> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../13-HelmChart/ class=md-nav__link> <span class=md-ellipsis> GitOps & CI/CD </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8 checked> <div class="md-nav__link md-nav__container"> <a href=../11-CRD-Custom-Resource-Definition/ class="md-nav__link "> <span class=md-ellipsis> Advanced </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=true> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../16-Affinity-Taint-Tolleration/ class=md-nav__link> <span class=md-ellipsis> 16 Affinity Taint Toleration </span> </a> </li> <li class=md-nav__item> <a href=../17-PodDisruptionBudgets-PDB/ class=md-nav__link> <span class=md-ellipsis> 17 PodDisruptionBudgets PDB </span> </a> </li> <li class=md-nav__item> <a href=../19-CustomScheduler/ class=md-nav__link> <span class=md-ellipsis> 19 CustomScheduler </span> </a> </li> <li class=md-nav__item> <a href=../21-KubeAPI/ class=md-nav__link> <span class=md-ellipsis> 21 KubeAPI </span> </a> </li> <li class=md-nav__item> <a href=../24-kubebuilder/ class=md-nav__link> <span class=md-ellipsis> 24 Kubebuilder </span> </a> </li> <li class=md-nav__item> <a href=../25-krew/ class=md-nav__link> <span class=md-ellipsis> 25 Krew </span> </a> </li> <li class=md-nav__item> <a href=../27-kubeadm/ class=md-nav__link> <span class=md-ellipsis> 27 kubeadm </span> </a> </li> <li class=md-nav__item> <a href=../28-Telepresence/ class=md-nav__link> <span class=md-ellipsis> 28 Telepresence </span> </a> </li> <li class=md-nav__item> <a href=../30-Keda/ class=md-nav__link> <span class=md-ellipsis> 30 KEDA </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 34 crictl </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 34 crictl </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#what-will-we-learn class=md-nav__link> <span class=md-ellipsis> What will we learn? </span> </a> </li> <li class=md-nav__item> <a href=#official-documentation-references class=md-nav__link> <span class=md-ellipsis> Official Documentation &amp; References </span> </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> <nav class=md-nav aria-label=Introduction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#what-is-cri-container-runtime-interface class=md-nav__link> <span class=md-ellipsis> What is CRI (Container Runtime Interface)? </span> </a> </li> <li class=md-nav__item> <a href=#why-crictl-exists class=md-nav__link> <span class=md-ellipsis> Why crictl Exists </span> </a> </li> <li class=md-nav__item> <a href=#crictl-vs-docker-cli-vs-nerdctl-vs-ctr class=md-nav__link> <span class=md-ellipsis> crictl vs docker CLI vs nerdctl vs ctr </span> </a> </li> <li class=md-nav__item> <a href=#cri-architecture class=md-nav__link> <span class=md-ellipsis> CRI Architecture </span> </a> </li> <li class=md-nav__item> <a href=#when-to-use-crictl-vs-kubectl class=md-nav__link> <span class=md-ellipsis> When to Use crictl vs kubectl </span> </a> </li> <li class=md-nav__item> <a href=#configuration-file class=md-nav__link> <span class=md-ellipsis> Configuration File </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../36-kubectl-Deep-Dive/ class=md-nav__link> <span class=md-ellipsis> 36 kubectl Deep Dive </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../Tasks/ class=md-nav__link> <span class=md-ellipsis> Tasks </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=crictl-container-runtime-interface-cli>crictl - Container Runtime Interface CLI<a class=headerlink href=#crictl-container-runtime-interface-cli title="Permanent link">&para;</a></h1> <ul> <li>Welcome to the <code>crictl</code> hands-on lab! In this tutorial, you will learn how to use <code>crictl</code>, the command-line interface for CRI-compatible container runtimes.</li> <li><code>crictl</code> is an essential debugging and inspection tool that operates at the container runtime level, giving you visibility into what is happening beneath the Kubernetes API layer.</li> <li>Unlike <code>kubectl</code>, which communicates with the Kubernetes API server, <code>crictl</code> talks directly to the container runtime (such as <code>containerd</code> or <code>CRI-O</code>) on a specific node.</li> </ul> <div class="admonition danger"> <p class=admonition-title>Node-Level Tool</p> <p><code>crictl</code> runs <strong>directly on Kubernetes nodes</strong>, not from your local workstation. All commands in this lab assume you have SSH access to a Kubernetes node (control plane or worker). You must run these commands as <code>root</code> or with <code>sudo</code> privileges.</p> </div> <hr> <h2 id=what-will-we-learn>What will we learn?<a class=headerlink href=#what-will-we-learn title="Permanent link">&para;</a></h2> <ul> <li>What the Container Runtime Interface (CRI) is and why it exists</li> <li>How <code>crictl</code> fits into the Kubernetes architecture</li> <li>How to install and configure <code>crictl</code> on a Kubernetes node</li> <li>How to list, inspect, and filter pods and containers at the runtime level</li> <li>How to view container logs directly from the runtime</li> <li>How to execute commands inside running containers</li> <li>How to manage container images at the runtime level</li> <li>How to monitor resource usage with runtime-level stats</li> <li>How to query runtime information for debugging</li> <li>How to manually create pod sandboxes and containers (advanced debugging)</li> <li>When to use <code>crictl</code> versus <code>kubectl</code> and other container CLI tools</li> </ul> <hr> <h2 id=official-documentation-references>Official Documentation &amp; References<a class=headerlink href=#official-documentation-references title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Resource</th> <th>Link</th> </tr> </thead> <tbody> <tr> <td>crictl Official Repository</td> <td><a href=https://github.com/kubernetes-sigs/cri-tools>github.com/kubernetes-sigs/cri-tools</a></td> </tr> <tr> <td>CRI Specification</td> <td><a href=https://kubernetes.io/docs/concepts/architecture/cri/ >kubernetes.io/docs/concepts/architecture/cri</a></td> </tr> <tr> <td>crictl User Guide</td> <td><a href=https://github.com/kubernetes-sigs/cri-tools/blob/master/docs/crictl.md>github.com/kubernetes-sigs/cri-tools/blob/master/docs/crictl.md</a></td> </tr> <tr> <td>Kubernetes Container Runtimes</td> <td><a href=https://kubernetes.io/docs/setup/production-environment/container-runtimes/ >kubernetes.io/docs/setup/production-environment/container-runtimes</a></td> </tr> <tr> <td>containerd Documentation</td> <td><a href=https://containerd.io/docs/ >containerd.io/docs</a></td> </tr> <tr> <td>CRI-O Documentation</td> <td><a href=https://cri-o.io/ >cri-o.io</a></td> </tr> <tr> <td>Debugging Kubernetes Nodes</td> <td><a href=https://kubernetes.io/docs/tasks/debug/debug-cluster/crictl/ >kubernetes.io/docs/tasks/debug/debug-cluster/crictl</a></td> </tr> <tr> <td>Migrating from Docker to containerd</td> <td><a href=https://kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim/ >kubernetes.io/docs/tasks/administer-cluster/migrating-from-dockershim</a></td> </tr> <tr> <td>OCI Runtime Specification</td> <td><a href=https://github.com/opencontainers/runtime-spec>github.com/opencontainers/runtime-spec</a></td> </tr> </tbody> </table> <hr> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <h3 id=what-is-cri-container-runtime-interface>What is CRI (Container Runtime Interface)?<a class=headerlink href=#what-is-cri-container-runtime-interface title="Permanent link">&para;</a></h3> <ul> <li>The <strong>Container Runtime Interface (CRI)</strong> is a plugin interface that allows the kubelet to use a wide variety of container runtimes without needing to recompile the kubelet itself.</li> <li>CRI defines a set of gRPC services that a container runtime must implement so that the kubelet can manage pods and containers on a node.</li> <li>Before CRI existed, Kubernetes was tightly coupled to Docker. CRI decoupled Kubernetes from any specific runtime, enabling alternatives like <code>containerd</code> and <code>CRI-O</code>.</li> </ul> <p>The CRI specification defines two main gRPC services:</p> <table> <thead> <tr> <th>Service</th> <th>Responsibility</th> </tr> </thead> <tbody> <tr> <td><code>RuntimeService</code></td> <td>Manages pod sandboxes and containers: creating, starting, stopping, removing, and listing them.</td> </tr> <tr> <td><code>ImageService</code></td> <td>Manages container images: pulling, listing, inspecting, and removing images on the node.</td> </tr> </tbody> </table> <h3 id=why-crictl-exists>Why crictl Exists<a class=headerlink href=#why-crictl-exists title="Permanent link">&para;</a></h3> <ul> <li><code>crictl</code> (pronounced &ldquo;cry-cuttle&rdquo;) is a <strong>CLI tool for CRI-compatible container runtimes</strong>.</li> <li>It provides a way to <strong>inspect and debug</strong> the container runtime directly on a Kubernetes node.</li> <li>It was created as part of the <code>cri-tools</code> project by the Kubernetes SIG Node team.</li> <li><code>crictl</code> is the recommended replacement for <code>docker</code> CLI commands when your cluster uses <code>containerd</code> or <code>CRI-O</code> instead of Docker.</li> </ul> <p>Common use cases for <code>crictl</code>:</p> <ul> <li>Debugging container issues that are not visible through <code>kubectl</code></li> <li>Inspecting the state of containers and pods at the runtime level</li> <li>Viewing logs when the Kubernetes API server is unavailable</li> <li>Checking image availability on a specific node</li> <li>Investigating pod sandbox networking issues</li> <li>Monitoring resource usage at the runtime level</li> <li>Troubleshooting CrashLoopBackOff and ImagePullBackOff errors from the node perspective</li> </ul> <h3 id=crictl-vs-docker-cli-vs-nerdctl-vs-ctr>crictl vs docker CLI vs nerdctl vs ctr<a class=headerlink href=#crictl-vs-docker-cli-vs-nerdctl-vs-ctr title="Permanent link">&para;</a></h3> <p>Since the removal of <code>dockershim</code> in Kubernetes 1.24, multiple CLI tools exist for interacting with container runtimes. Here is how they compare:</p> <table> <thead> <tr> <th>Feature</th> <th><code>crictl</code></th> <th><code>docker</code></th> <th><code>nerdctl</code></th> <th><code>ctr</code></th> </tr> </thead> <tbody> <tr> <td><strong>Purpose</strong></td> <td>CRI debugging</td> <td>Docker Engine management</td> <td>containerd management (Docker-compatible)</td> <td>Low-level containerd client</td> </tr> <tr> <td><strong>Target Runtime</strong></td> <td>Any CRI runtime</td> <td>Docker Engine only</td> <td>containerd only</td> <td>containerd only</td> </tr> <tr> <td><strong>Kubernetes-aware</strong></td> <td>Yes (pods, sandboxes)</td> <td>No</td> <td>Yes (with nerdctl ps -a)</td> <td>No</td> </tr> <tr> <td><strong>Pod support</strong></td> <td>Yes (native)</td> <td>No</td> <td>Limited</td> <td>No</td> </tr> <tr> <td><strong>Image management</strong></td> <td>Pull, list, remove</td> <td>Full (build, push, pull)</td> <td>Full (build, push, pull)</td> <td>Pull, list, remove</td> </tr> <tr> <td><strong>Container creation</strong></td> <td>Manual (debugging only)</td> <td>Full lifecycle</td> <td>Full lifecycle</td> <td>Full lifecycle</td> </tr> <tr> <td><strong>Build images</strong></td> <td>No</td> <td>Yes</td> <td>Yes</td> <td>No</td> </tr> <tr> <td><strong>Compose support</strong></td> <td>No</td> <td>Yes (docker compose)</td> <td>Yes (nerdctl compose)</td> <td>No</td> </tr> <tr> <td><strong>Recommended for K8s</strong></td> <td>Yes (node debugging)</td> <td>No (deprecated in K8s)</td> <td>Yes (development)</td> <td>No (too low-level)</td> </tr> <tr> <td><strong>Installed by default</strong></td> <td>Often (kubeadm nodes)</td> <td>No (unless Docker runtime)</td> <td>No</td> <td>Yes (with containerd)</td> </tr> </tbody> </table> <div class="admonition tip"> <p class=admonition-title>Rule of Thumb</p> <ul> <li>Use <code>kubectl</code> for <strong>cluster-level</strong> operations (from your workstation).</li> <li>Use <code>crictl</code> for <strong>node-level</strong> debugging (SSH into the node).</li> <li>Use <code>nerdctl</code> if you need a <strong>Docker-compatible</strong> CLI for <code>containerd</code>.</li> <li>Use <code>ctr</code> only for <strong>very low-level</strong> containerd operations.</li> </ul> </div> <h3 id=cri-architecture>CRI Architecture<a class=headerlink href=#cri-architecture title="Permanent link">&para;</a></h3> <p>The following diagram shows how <code>crictl</code> fits into the Kubernetes container runtime architecture:</p> <pre class=mermaid><code>graph TB
    subgraph "User / Operator"
        kubectl["kubectl&lt;br/&gt;(cluster-level)"]
        crictl["crictl&lt;br/&gt;(node-level)"]
    end

    subgraph "Control Plane"
        api["API Server"]
    end

    subgraph "Kubernetes Node"
        kubelet["kubelet"]
        cri_shim["CRI gRPC Interface&lt;br/&gt;(unix socket)"]

        subgraph "Container Runtime"
            containerd["containerd / CRI-O"]
            oci["OCI Runtime&lt;br/&gt;(runc / crun / kata)"]
        end

        subgraph "Workloads"
            pod1["Pod Sandbox 1"]
            c1a["Container A"]
            c1b["Container B"]
            pod2["Pod Sandbox 2"]
            c2a["Container C"]
        end
    end

    kubectl --&gt; api
    api --&gt; kubelet
    kubelet --&gt;|"CRI gRPC calls"| cri_shim
    crictl --&gt;|"CRI gRPC calls"| cri_shim
    cri_shim --&gt; containerd
    containerd --&gt; oci
    oci --&gt; pod1
    oci --&gt; pod2
    pod1 --- c1a
    pod1 --- c1b
    pod2 --- c2a

    style crictl fill:#f9a825,stroke:#f57f17,color:#000
    style kubectl fill:#42a5f5,stroke:#1565c0,color:#000
    style kubelet fill:#66bb6a,stroke:#2e7d32,color:#000
    style containerd fill:#ab47bc,stroke:#6a1b9a,color:#fff</code></pre> <p>Key points from the architecture:</p> <ol> <li><strong>kubectl</strong> communicates with the <strong>API Server</strong> over HTTPS (cluster-level).</li> <li>The <strong>API Server</strong> instructs the <strong>kubelet</strong> on each node.</li> <li>The <strong>kubelet</strong> communicates with the <strong>container runtime</strong> via <strong>CRI gRPC</strong> over a Unix socket.</li> <li><strong>crictl</strong> connects to the <strong>same Unix socket</strong>, bypassing the API Server entirely.</li> <li>The container runtime (<code>containerd</code> or <code>CRI-O</code>) delegates actual container execution to an <strong>OCI runtime</strong> like <code>runc</code>.</li> </ol> <h3 id=when-to-use-crictl-vs-kubectl>When to Use crictl vs kubectl<a class=headerlink href=#when-to-use-crictl-vs-kubectl title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Scenario</th> <th>Use <code>kubectl</code></th> <th>Use <code>crictl</code></th> </tr> </thead> <tbody> <tr> <td>Deploy, scale, or manage workloads</td> <td>Yes</td> <td>No</td> </tr> <tr> <td>View pod logs (API server is healthy)</td> <td>Yes</td> <td>Optional</td> </tr> <tr> <td>View pod logs (API server is down or unreachable)</td> <td>No</td> <td>Yes</td> </tr> <tr> <td>Inspect container state on a specific node</td> <td>Limited</td> <td>Yes</td> </tr> <tr> <td>Debug networking at the pod sandbox level</td> <td>No</td> <td>Yes</td> </tr> <tr> <td>Check which images are cached on a node</td> <td>No</td> <td>Yes</td> </tr> <tr> <td>Monitor per-container resource usage on a node</td> <td>No</td> <td>Yes</td> </tr> <tr> <td>Investigate why a container keeps crashing</td> <td>Partially</td> <td>Yes (more detail)</td> </tr> <tr> <td>Create test pods and containers</td> <td>Yes</td> <td>Yes (manual)</td> </tr> <tr> <td>Manage cluster resources (Services, Ingress, etc.)</td> <td>Yes</td> <td>No</td> </tr> </tbody> </table> <h3 id=configuration-file>Configuration File<a class=headerlink href=#configuration-file title="Permanent link">&para;</a></h3> <p><code>crictl</code> uses a configuration file at <code>/etc/crictl.yaml</code> to determine which runtime endpoint to connect to. This avoids having to pass the <code>--runtime-endpoint</code> flag with every command.</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1>## /etc/crictl.yaml</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=c1>## Configuration file for crictl</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=nt>runtime-endpoint</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unix:///run/containerd/containerd.sock</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=nt>image-endpoint</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">unix:///run/containerd/containerd.sock</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=nt>timeout</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=nt>debug</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=nt>pull-image-on-create</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=nt>disable-pull-on-run</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span></code></pre></div> <table> <thead> <tr> <th>Field</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>runtime-endpoint</code></td> <td>The Unix socket path for the container runtime&rsquo;s CRI service.</td> </tr> <tr> <td><code>image-endpoint</code></td> <td>The Unix socket path for the image service (often the same as <code>runtime-endpoint</code>).</td> </tr> <tr> <td><code>timeout</code></td> <td>Timeout in seconds for CRI gRPC calls.</td> </tr> <tr> <td><code>debug</code></td> <td>When <code>true</code>, enables verbose debug output for all commands.</td> </tr> <tr> <td><code>pull-image-on-create</code></td> <td>When <code>true</code>, automatically pulls the image when creating a container.</td> </tr> <tr> <td><code>disable-pull-on-run</code></td> <td>When <code>true</code>, disables automatic image pulling when running a container.</td> </tr> </tbody> </table> <p>Common runtime endpoint paths:</p> <table> <thead> <tr> <th>Runtime</th> <th>Socket Path</th> </tr> </thead> <tbody> <tr> <td><code>containerd</code></td> <td><code>unix:///run/containerd/containerd.sock</code></td> </tr> <tr> <td><code>CRI-O</code></td> <td><code>unix:///var/run/crio/crio.sock</code></td> </tr> <tr> <td><code>Docker</code> (via cri-dockerd)</td> <td><code>unix:///run/cri-dockerd.sock</code></td> </tr> </tbody> </table> <hr> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <p>Before starting this lab, ensure you have:</p> <ul> <li>A running Kubernetes cluster (single-node or multi-node)</li> <li><strong>SSH access</strong> to at least one Kubernetes node (control plane or worker)</li> <li><strong>Root or sudo privileges</strong> on the node</li> <li>A container runtime installed on the node (<code>containerd</code> or <code>CRI-O</code>)</li> <li>Basic familiarity with <code>kubectl</code> and Kubernetes concepts (pods, containers, namespaces)</li> <li>Some workloads already running on the cluster (for inspection)</li> </ul> <div class="admonition warning"> <p class=admonition-title>This Lab Requires Node Access</p> <p>Unlike most Kubernetes labs where you run commands from your workstation using <code>kubectl</code>, this lab requires you to <strong>SSH into a Kubernetes node</strong> and run commands directly on it. If you are using a managed Kubernetes service (EKS, GKE, AKS), you will need to SSH into a worker node or use a node shell utility like <code>kubectl debug node/&lt;node-name&gt; -it --image=ubuntu</code>.</p> </div> <p>To SSH into a node (example):</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>## If you know the node IP address</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>ssh<span class=w> </span>user@&lt;node-ip&gt;
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1>## Using kubectl to get node IPs first</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1>## Alternative: use kubectl debug to get a shell on a node</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=c1>## (requires Kubernetes 1.18+ with ephemeral containers enabled)</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>kubectl<span class=w> </span>debug<span class=w> </span>node/&lt;node-name&gt;<span class=w> </span>-it<span class=w> </span>--image<span class=o>=</span>ubuntu
</span></code></pre></div> <hr> <h1 id=lab>Lab<a class=headerlink href=#lab title="Permanent link">&para;</a></h1> <h3 id=step-01-install-crictl>Step 01 - Install crictl<a class=headerlink href=#step-01-install-crictl title="Permanent link">&para;</a></h3> <ul> <li><code>crictl</code> is distributed as a standalone binary from the <code>cri-tools</code> project.</li> <li>On many Kubernetes distributions (kubeadm, k3s, etc.), <code>crictl</code> is already installed. Check first before installing.</li> </ul> <h4 id=check-if-crictl-is-already-installed>Check if crictl is Already Installed<a class=headerlink href=#check-if-crictl-is-already-installed title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>## Check if crictl is available on the node</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>which<span class=w> </span>crictl
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1>## If installed, check the version</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>crictl<span class=w> </span>--version
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>## Expected output (example):</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=c1>## crictl version v1.29.0</span>
</span></code></pre></div> <h4 id=install-crictl-if-not-present>Install crictl (if not present)<a class=headerlink href=#install-crictl-if-not-present title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>Linux (amd64)</label><label for=__tabbed_1_2>Linux (arm64)</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>## Set the desired version</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=nv>VERSION</span><span class=o>=</span><span class=s2>&quot;v1.29.0&quot;</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1>## Download the crictl tarball</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>curl<span class=w> </span>-L<span class=w> </span><span class=s2>&quot;https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span><span class=s2>/crictl-</span><span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span><span class=s2>-linux-amd64.tar.gz&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span>-o<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-amd64.tar.gz
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=c1>## Extract the binary to /usr/local/bin</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>sudo<span class=w> </span>tar<span class=w> </span>zxvf<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-amd64.tar.gz<span class=w> </span>-C<span class=w> </span>/usr/local/bin
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=c1>## Verify the installation</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a>crictl<span class=w> </span>--version
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=c1>## Clean up the tarball</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a>rm<span class=w> </span>-f<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-amd64.tar.gz
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>## Set the desired version</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=nv>VERSION</span><span class=o>=</span><span class=s2>&quot;v1.29.0&quot;</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1>## Download the crictl tarball for arm64</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>curl<span class=w> </span>-L<span class=w> </span><span class=s2>&quot;https://github.com/kubernetes-sigs/cri-tools/releases/download/</span><span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span><span class=s2>/crictl-</span><span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span><span class=s2>-linux-arm64.tar.gz&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>  </span>-o<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-arm64.tar.gz
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=c1>## Extract the binary to /usr/local/bin</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>sudo<span class=w> </span>tar<span class=w> </span>zxvf<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-arm64.tar.gz<span class=w> </span>-C<span class=w> </span>/usr/local/bin
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=c1>## Verify the installation</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>crictl<span class=w> </span>--version
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=c1>## Clean up the tarball</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a>rm<span class=w> </span>-f<span class=w> </span>crictl-<span class=si>${</span><span class=nv>VERSION</span><span class=si>}</span>-linux-arm64.tar.gz
</span></code></pre></div> </div> </div> </div> <div class="admonition note"> <p class=admonition-title>Version Compatibility</p> <p>It is recommended to use a <code>crictl</code> version that matches your Kubernetes minor version. For example, use <code>crictl</code> v1.29.x with Kubernetes v1.29.x. Check the <a href=https://github.com/kubernetes-sigs/cri-tools#compatibility-matrix>compatibility matrix</a> for details.</p> </div> <hr> <h3 id=step-02-configure-crictl>Step 02 - Configure crictl<a class=headerlink href=#step-02-configure-crictl title="Permanent link">&para;</a></h3> <ul> <li>Before using <code>crictl</code>, you need to configure it to connect to the correct container runtime socket.</li> <li>Without configuration, <code>crictl</code> will attempt to auto-detect the runtime, but it is best to be explicit.</li> </ul> <h4 id=identify-your-container-runtime>Identify Your Container Runtime<a class=headerlink href=#identify-your-container-runtime title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>## Check which container runtime the kubelet is using</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>ps<span class=w> </span>aux<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kubelet<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>--<span class=w> </span>--container-runtime-endpoint
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c1>## Alternative: check the kubelet configuration</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>sudo<span class=w> </span>cat<span class=w> </span>/var/lib/kubelet/config.yaml<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>container
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=c1>## For containerd, check if the socket exists</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a>ls<span class=w> </span>-la<span class=w> </span>/run/containerd/containerd.sock
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=c1>## For CRI-O, check if the socket exists</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>ls<span class=w> </span>-la<span class=w> </span>/var/run/crio/crio.sock
</span></code></pre></div> <h4 id=create-the-configuration-file>Create the Configuration File<a class=headerlink href=#create-the-configuration-file title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>containerd</label><label for=__tabbed_2_2>CRI-O</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>## Create the crictl configuration for containerd</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>sudo<span class=w> </span>tee<span class=w> </span>/etc/crictl.yaml<span class=w> </span><span class=s>&lt;&lt;EOF</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=s>runtime-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=s>image-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=s>timeout: 10</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=s>debug: false</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=s>EOF</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=c1>## Verify the configuration</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>cat<span class=w> </span>/etc/crictl.yaml
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>## Create the crictl configuration for CRI-O</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>sudo<span class=w> </span>tee<span class=w> </span>/etc/crictl.yaml<span class=w> </span><span class=s>&lt;&lt;EOF</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=s>runtime-endpoint: unix:///var/run/crio/crio.sock</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=s>image-endpoint: unix:///var/run/crio/crio.sock</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=s>timeout: 10</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=s>debug: false</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=s>EOF</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=c1>## Verify the configuration</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a>cat<span class=w> </span>/etc/crictl.yaml
</span></code></pre></div> </div> </div> </div> <h4 id=using-the-runtime-endpoint-flag-alternative>Using the &ndash;runtime-endpoint Flag (Alternative)<a class=headerlink href=#using-the-runtime-endpoint-flag-alternative title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>## Instead of a config file, you can specify the endpoint per command</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>crictl<span class=w> </span>--runtime-endpoint<span class=w> </span>unix:///run/containerd/containerd.sock<span class=w> </span>ps
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1>## Or set it as an environment variable</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=nb>export</span><span class=w> </span><span class=nv>CONTAINER_RUNTIME_ENDPOINT</span><span class=o>=</span>unix:///run/containerd/containerd.sock
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=c1>## Now all crictl commands will use this endpoint</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>crictl<span class=w> </span>ps
</span></code></pre></div> <h4 id=enable-debug-mode-optional>Enable Debug Mode (Optional)<a class=headerlink href=#enable-debug-mode-optional title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>## Temporarily enable debug mode for troubleshooting</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=c1>## This shows the gRPC calls being made to the runtime</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>sudo<span class=w> </span>tee<span class=w> </span>/etc/crictl.yaml<span class=w> </span><span class=s>&lt;&lt;EOF</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=s>runtime-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=s>image-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=s>timeout: 10</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=s>debug: true</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=s>EOF</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=c1>## Run a command with debug output</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>crictl<span class=w> </span>ps
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=c1>## Remember to disable debug mode when done</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=c1>## (set debug: false in /etc/crictl.yaml)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Debug Mode</p> <p>Enabling <code>debug: true</code> in <code>/etc/crictl.yaml</code> prints the raw gRPC requests and responses. This is extremely useful when troubleshooting connectivity issues with the container runtime socket.</p> </div> <h4 id=test-the-configuration>Test the Configuration<a class=headerlink href=#test-the-configuration title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>## Verify crictl can communicate with the runtime</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>crictl<span class=w> </span>info
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1>## Expected output: JSON with runtime information including</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=c1>## version, storage driver, and runtime conditions</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=c1>## Quick sanity check: list running containers</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>crictl<span class=w> </span>ps
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=c1>## List all pods managed by the runtime</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>crictl<span class=w> </span>pods
</span></code></pre></div> <hr> <h3 id=step-03-listing-pods-with-crictl-pods>Step 03 - Listing Pods with crictl pods<a class=headerlink href=#step-03-listing-pods-with-crictl-pods title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl pods</code> command lists all pod sandboxes managed by the container runtime.</li> <li>A <strong>pod sandbox</strong> is the runtime&rsquo;s representation of a Kubernetes pod. It holds the shared Linux namespaces (network, IPC, PID) that containers within the pod share.</li> </ul> <h4 id=basic-pod-listing>Basic Pod Listing<a class=headerlink href=#basic-pod-listing title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>## List all pod sandboxes (running and stopped)</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>crictl<span class=w> </span>pods
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=c1>## Example output:</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=c1>## POD ID         CREATED        STATE   NAME                          NAMESPACE     ATTEMPT  RUNTIME</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=c1>## a1b2c3d4e5f6   2 hours ago    Ready   nginx-7d456b8f9c-abcde       default       0        (default)</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=c1>## f6e5d4c3b2a1   3 hours ago    Ready   coredns-5dd5756b68-xyz12     kube-system   0        (default)</span>
</span></code></pre></div> <h4 id=filtering-pods>Filtering Pods<a class=headerlink href=#filtering-pods title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1>## Filter pods by name</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>crictl<span class=w> </span>pods<span class=w> </span>--name<span class=w> </span>nginx
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=c1>## Filter pods by namespace</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>kube-system
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=c1>## Filter pods by state (Ready or NotReady)</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>crictl<span class=w> </span>pods<span class=w> </span>--state<span class=w> </span>Ready
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=c1>## Filter pods that are not ready (stopped, failed, etc.)</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>crictl<span class=w> </span>pods<span class=w> </span>--state<span class=w> </span>NotReady
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=c1>## Filter pods by label</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>crictl<span class=w> </span>pods<span class=w> </span>--label<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=c1>## Filter by multiple labels</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a>crictl<span class=w> </span>pods<span class=w> </span>--label<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx<span class=w> </span>--label<span class=w> </span><span class=nv>version</span><span class=o>=</span>v1
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a>
</span><span id=__span-12-19><a id=__codelineno-12-19 name=__codelineno-12-19 href=#__codelineno-12-19></a><span class=c1>## Combine multiple filters</span>
</span><span id=__span-12-20><a id=__codelineno-12-20 name=__codelineno-12-20 href=#__codelineno-12-20></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>default<span class=w> </span>--state<span class=w> </span>Ready<span class=w> </span>--label<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx
</span></code></pre></div> <h4 id=verbose-pod-listing>Verbose Pod Listing<a class=headerlink href=#verbose-pod-listing title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1>## Show full pod IDs (not truncated)</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>crictl<span class=w> </span>pods<span class=w> </span>--no-trunc
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=c1>## Show only pod IDs (useful for scripting)</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a>crictl<span class=w> </span>pods<span class=w> </span>--quiet
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=c1>## Show pods with additional information in verbose mode</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>crictl<span class=w> </span>pods<span class=w> </span>--verbose
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=c1>## Output in JSON format for programmatic consumption</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a>crictl<span class=w> </span>pods<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=c1>## Output in YAML format</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a>crictl<span class=w> </span>pods<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=c1>## Output in table format (default)</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>crictl<span class=w> </span>pods<span class=w> </span>-o<span class=w> </span>table
</span></code></pre></div> <h4 id=listing-pods-by-last-n>Listing Pods by Last N<a class=headerlink href=#listing-pods-by-last-n title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1>## Show only the last 5 pods created</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>crictl<span class=w> </span>pods<span class=w> </span>--last<span class=w> </span><span class=m>5</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=c1>## Show the most recently created pod</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a>crictl<span class=w> </span>pods<span class=w> </span>--last<span class=w> </span><span class=m>1</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Pod Sandbox vs Kubernetes Pod</p> <p>Every Kubernetes pod corresponds to a <strong>pod sandbox</strong> in the container runtime. The sandbox is created first (with its own &ldquo;pause&rdquo; container), and then the actual application containers are started inside it. When you see a sandbox in <code>crictl pods</code>, it maps 1:1 to a pod you would see in <code>kubectl get pods</code>.</p> </div> <hr> <h3 id=step-04-inspecting-pods-with-crictl-inspectp>Step 04 - Inspecting Pods with crictl inspectp<a class=headerlink href=#step-04-inspecting-pods-with-crictl-inspectp title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl inspectp</code> command provides detailed information about a specific pod sandbox.</li> <li>This includes network configuration, DNS settings, Linux namespace paths, labels, annotations, and more.</li> </ul> <h4 id=inspect-a-pod>Inspect a Pod<a class=headerlink href=#inspect-a-pod title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1>## First, get the pod ID you want to inspect</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>crictl<span class=w> </span>pods
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=c1>## Note the POD ID from the output (e.g., a1b2c3d4e5f6)</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=c1>## Inspect the pod sandbox by its ID</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=c1>## You can also use a partial ID (as long as it is unique)</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3
</span></code></pre></div> <h4 id=understanding-the-inspect-output>Understanding the Inspect Output<a class=headerlink href=#understanding-the-inspect-output title="Permanent link">&para;</a></h4> <p>The output is a JSON document with several important sections:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>## Inspect a pod and pipe through jq for readability</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=c1>## Get the pod&#39;s network information</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=c1>## This shows the pod IP address and network namespace</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.network&#39;</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=c1>## Example output:</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=c1>## {</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=c1>##   &quot;additionalIps&quot;: [],</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=c1>##   &quot;ip&quot;: &quot;10.244.0.15&quot;</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=c1>## }</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=c1>## Get the pod&#39;s Linux namespace paths</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.namespaces&#39;</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=c1>## Get the pod&#39;s labels</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.labels&#39;</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=c1>## Get the pod&#39;s annotations</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.annotations&#39;</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=c1>## Get the pod&#39;s DNS configuration</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources&#39;</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=c1>## Get the creation timestamp</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.createdAt&#39;</span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=c1>## Get the pod&#39;s state</span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.state&#39;</span>
</span></code></pre></div> <h4 id=inspect-network-namespace>Inspect Network Namespace<a class=headerlink href=#inspect-network-namespace title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1>## Get the network namespace path for a pod</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=c1>## This is useful for debugging networking issues with nsenter</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=nv>NETNS</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspectp<span class=w> </span>a1b2c3d4e5f6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.namespaces[] | select(.type==&quot;network&quot;) | .path&#39;</span><span class=k>)</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Network namespace: </span><span class=nv>$NETNS</span><span class=s2>&quot;</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=c1>## Enter the pod&#39;s network namespace to debug networking</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=c1>## (requires nsenter installed on the node)</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>ip<span class=w> </span>addr<span class=w> </span>show
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=c1>## Check the routes inside the pod&#39;s network namespace</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>ip<span class=w> </span>route<span class=w> </span>show
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=c1>## Check DNS resolution from inside the network namespace</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>cat<span class=w> </span>/etc/resolv.conf
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Info Section Requires Runtime Support</p> <p>The <code>.info</code> section in the <code>crictl inspectp</code> output requires the container runtime to support the verbose inspection feature. Some runtimes may return an empty info section. If this happens, the <code>.status</code> section will still contain essential information like the pod ID, state, labels, and creation time.</p> </div> <hr> <h3 id=step-05-listing-containers-with-crictl-ps>Step 05 - Listing Containers with crictl ps<a class=headerlink href=#step-05-listing-containers-with-crictl-ps title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl ps</code> command lists containers managed by the container runtime.</li> <li>By default, it shows only <strong>running</strong> containers. Use the <code>-a</code> flag to include all states.</li> </ul> <h4 id=basic-container-listing>Basic Container Listing<a class=headerlink href=#basic-container-listing title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>## List all running containers</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>crictl<span class=w> </span>ps
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1>## Example output:</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1>## CONTAINER      IMAGE          CREATED        STATE    NAME       ATTEMPT  POD ID         POD</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=c1>## b1c2d3e4f5g6   nginx:1.25     2 hours ago    Running  nginx      0        a1b2c3d4e5f6   nginx-7d456b8f9c-abcde</span>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=c1>## h7i8j9k0l1m2   coredns:1.11   3 hours ago    Running  coredns    0        f6e5d4c3b2a1   coredns-5dd5756b68-xyz12</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=c1>## List ALL containers (including exited, created, unknown states)</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>crictl<span class=w> </span>ps<span class=w> </span>-a
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=c1>## Example output showing exited containers:</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=c1>## CONTAINER      IMAGE          CREATED        STATE    NAME       ATTEMPT  POD ID         POD</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=c1>## b1c2d3e4f5g6   nginx:1.25     2 hours ago    Running  nginx      0        a1b2c3d4e5f6   nginx-...</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=c1>## n3o4p5q6r7s8   busybox:1.36   1 hour ago     Exited   init-db    0        t9u0v1w2x3y4   myapp-...</span>
</span></code></pre></div> <h4 id=filtering-containers>Filtering Containers<a class=headerlink href=#filtering-containers title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>## Filter containers by name</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>crictl<span class=w> </span>ps<span class=w> </span>--name<span class=w> </span>nginx
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=c1>## Filter containers by state</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>crictl<span class=w> </span>ps<span class=w> </span>--state<span class=w> </span>Running
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>crictl<span class=w> </span>ps<span class=w> </span>--state<span class=w> </span>Exited
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a>crictl<span class=w> </span>ps<span class=w> </span>--state<span class=w> </span>Created
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a>crictl<span class=w> </span>ps<span class=w> </span>--state<span class=w> </span>Unknown
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=c1>## Filter containers by image</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a>crictl<span class=w> </span>ps<span class=w> </span>--image<span class=w> </span>nginx
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=c1>## Filter containers by label</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>crictl<span class=w> </span>ps<span class=w> </span>--label<span class=w> </span>io.kubernetes.container.name<span class=o>=</span>nginx
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=c1>## Filter containers belonging to a specific pod</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>crictl<span class=w> </span>ps<span class=w> </span>--pod<span class=w> </span>a1b2c3d4e5f6
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=c1>## Combine filters: show exited containers for a specific pod</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>--pod<span class=w> </span>a1b2c3d4e5f6
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a><span class=c1>## Show only the last N containers</span>
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--last<span class=w> </span><span class=m>10</span>
</span></code></pre></div> <h4 id=output-formatting>Output Formatting<a class=headerlink href=#output-formatting title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1>## Show full IDs (not truncated)</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>crictl<span class=w> </span>ps<span class=w> </span>--no-trunc
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1>## Show only container IDs (useful for scripting)</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>crictl<span class=w> </span>ps<span class=w> </span>--quiet
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=c1>## JSON output for programmatic processing</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>crictl<span class=w> </span>ps<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=c1>## YAML output</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>crictl<span class=w> </span>ps<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=c1>## Show all containers with verbose output</span>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--verbose
</span></code></pre></div> <h4 id=counting-containers-by-state>Counting Containers by State<a class=headerlink href=#counting-containers-by-state title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1>## Count running containers</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>crictl<span class=w> </span>ps<span class=w> </span>--quiet<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=c1>## Count all containers (including stopped)</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--quiet<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=c1>## Count exited containers only</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>--quiet<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=c1>## List all containers with their exit codes (exited containers)</span>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.containers[] | {name: .metadata.name, id: .id, exitCode: .state}&#39;</span>
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Container States</p> <p>Containers in CRI can be in one of four states:</p> <ul> <li><strong>Created</strong>: The container has been created but not started.</li> <li><strong>Running</strong>: The container is currently executing.</li> <li><strong>Exited</strong>: The container has finished executing (with an exit code).</li> <li><strong>Unknown</strong>: The container state cannot be determined.</li> </ul> </div> <hr> <h3 id=step-06-inspecting-containers-with-crictl-inspect>Step 06 - Inspecting Containers with crictl inspect<a class=headerlink href=#step-06-inspecting-containers-with-crictl-inspect title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl inspect</code> command provides detailed information about a specific container.</li> <li>This includes the container&rsquo;s full configuration, resource limits, mounts, environment variables, process info, and more.</li> </ul> <h4 id=inspect-a-container>Inspect a Container<a class=headerlink href=#inspect-a-container title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1>## First, get the container ID</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>crictl<span class=w> </span>ps
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=c1>## Note the CONTAINER ID (e.g., b1c2d3e4f5g6)</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=c1>## Inspect the container</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=c1>## Inspect with pretty-printed JSON (pipe through jq)</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span></code></pre></div> <h4 id=extract-specific-information>Extract Specific Information<a class=headerlink href=#extract-specific-information title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1>## Get the container&#39;s image reference</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.image.image&#39;</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=c1>## Get the container&#39;s PID (process ID on the host)</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.pid&#39;</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1>## Get the container&#39;s resource limits (CPU and memory)</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources&#39;</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=c1>## Get CPU limits specifically</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources.cpu&#39;</span>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=c1>## Get memory limits specifically</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources.memory&#39;</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=c1>## Get the container&#39;s environment variables</span>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.process.env&#39;</span>
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a><span class=c1>## Get the container&#39;s mount points</span>
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.mounts&#39;</span>
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a>
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a><span class=c1>## Get the container&#39;s startup command and arguments</span>
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.process.args&#39;</span>
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a>
</span><span id=__span-23-25><a id=__codelineno-23-25 name=__codelineno-23-25 href=#__codelineno-23-25></a><span class=c1>## Get the container&#39;s working directory</span>
</span><span id=__span-23-26><a id=__codelineno-23-26 name=__codelineno-23-26 href=#__codelineno-23-26></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.process.cwd&#39;</span>
</span><span id=__span-23-27><a id=__codelineno-23-27 name=__codelineno-23-27 href=#__codelineno-23-27></a>
</span><span id=__span-23-28><a id=__codelineno-23-28 name=__codelineno-23-28 href=#__codelineno-23-28></a><span class=c1>## Get the container&#39;s state and exit code (for exited containers)</span>
</span><span id=__span-23-29><a id=__codelineno-23-29 name=__codelineno-23-29 href=#__codelineno-23-29></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{state: .status.state, exitCode: .status.exitCode, reason: .status.reason}&#39;</span>
</span><span id=__span-23-30><a id=__codelineno-23-30 name=__codelineno-23-30 href=#__codelineno-23-30></a>
</span><span id=__span-23-31><a id=__codelineno-23-31 name=__codelineno-23-31 href=#__codelineno-23-31></a><span class=c1>## Get the container&#39;s creation and start timestamps</span>
</span><span id=__span-23-32><a id=__codelineno-23-32 name=__codelineno-23-32 href=#__codelineno-23-32></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{created: .status.createdAt, started: .status.startedAt, finished: .status.finishedAt}&#39;</span>
</span><span id=__span-23-33><a id=__codelineno-23-33 name=__codelineno-23-33 href=#__codelineno-23-33></a>
</span><span id=__span-23-34><a id=__codelineno-23-34 name=__codelineno-23-34 href=#__codelineno-23-34></a><span class=c1>## Get the container&#39;s log path</span>
</span><span id=__span-23-35><a id=__codelineno-23-35 name=__codelineno-23-35 href=#__codelineno-23-35></a>crictl<span class=w> </span>inspect<span class=w> </span>b1c2d3e4f5g6<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.logPath&#39;</span>
</span></code></pre></div> <h4 id=inspecting-exited-containers>Inspecting Exited Containers<a class=headerlink href=#inspecting-exited-containers title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1>## When debugging a CrashLoopBackOff, inspect the exited container</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=c1>## to find the exit code and reason</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=c1>## List exited containers</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=c1>## Inspect the exited container</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>crictl<span class=w> </span>inspect<span class=w> </span>n3o4p5q6r7s8<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=s1>  name: .status.metadata.name,</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=s1>  state: .status.state,</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=s1>  exitCode: .status.exitCode,</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=s1>  reason: .status.reason,</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=s1>  message: .status.message,</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=s1>  startedAt: .status.startedAt,</span>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=s1>  finishedAt: .status.finishedAt</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=s1>}&#39;</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>
</span><span id=__span-24-18><a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a><span class=c1>## Common exit codes:</span>
</span><span id=__span-24-19><a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a><span class=c1>## 0   = Success (normal termination)</span>
</span><span id=__span-24-20><a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a><span class=c1>## 1   = General error</span>
</span><span id=__span-24-21><a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a><span class=c1>## 126 = Command not executable</span>
</span><span id=__span-24-22><a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a><span class=c1>## 127 = Command not found</span>
</span><span id=__span-24-23><a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a><span class=c1>## 137 = Killed by SIGKILL (OOMKilled or manual kill)</span>
</span><span id=__span-24-24><a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a><span class=c1>## 139 = Segmentation fault (SIGSEGV)</span>
</span><span id=__span-24-25><a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a><span class=c1>## 143 = Killed by SIGTERM (graceful shutdown)</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Understanding Exit Code 137</p> <p>Exit code <strong>137</strong> (128 + 9 = SIGKILL) is one of the most common crash indicators. It usually means the container was <strong>OOMKilled</strong> (ran out of memory) or was killed by the kubelet because it exceeded its memory limit. Check the container&rsquo;s memory limits and actual usage with <code>crictl inspect</code> and <code>crictl stats</code> to confirm.</p> </div> <hr> <h3 id=step-07-viewing-container-logs-with-crictl-logs>Step 07 - Viewing Container Logs with crictl logs<a class=headerlink href=#step-07-viewing-container-logs-with-crictl-logs title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl logs</code> command reads the stdout/stderr logs of a container.</li> <li>It works similarly to <code>kubectl logs</code> but operates directly at the runtime level.</li> <li>This is especially useful when the Kubernetes API server is unavailable.</li> </ul> <h4 id=basic-log-viewing>Basic Log Viewing<a class=headerlink href=#basic-log-viewing title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1>## View logs for a running container</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>crictl<span class=w> </span>logs<span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=c1>## View logs for an exited container (useful for crash debugging)</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=c1>## First find the exited container ID</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=c1>## Then view its logs</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a>crictl<span class=w> </span>logs<span class=w> </span>n3o4p5q6r7s8
</span></code></pre></div> <h4 id=log-options>Log Options<a class=headerlink href=#log-options title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1>## Follow logs in real-time (like tail -f)</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>crictl<span class=w> </span>logs<span class=w> </span>--follow<span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=c1>## Show only the last N lines</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>crictl<span class=w> </span>logs<span class=w> </span>--tail<span class=w> </span><span class=m>50</span><span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=c1>## Show only the last 10 lines</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>crictl<span class=w> </span>logs<span class=w> </span>--tail<span class=w> </span><span class=m>10</span><span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a><span class=c1>## Show logs with timestamps</span>
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>crictl<span class=w> </span>logs<span class=w> </span>--timestamps<span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=c1>## Example output with timestamps:</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=c1>## 2024-01-15T10:30:45.123456789Z 172.17.0.1 - - [15/Jan/2024:10:30:45 +0000] &quot;GET / HTTP/1.1&quot; 200 615</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a><span class=c1>## Show logs since a specific time (RFC3339 format)</span>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a>crictl<span class=w> </span>logs<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;2024-01-15T10:00:00Z&quot;</span><span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>
</span><span id=__span-26-19><a id=__codelineno-26-19 name=__codelineno-26-19 href=#__codelineno-26-19></a><span class=c1>## Show logs from the last 5 minutes</span>
</span><span id=__span-26-20><a id=__codelineno-26-20 name=__codelineno-26-20 href=#__codelineno-26-20></a><span class=c1>## (Calculate the timestamp 5 minutes ago)</span>
</span><span id=__span-26-21><a id=__codelineno-26-21 name=__codelineno-26-21 href=#__codelineno-26-21></a>crictl<span class=w> </span>logs<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;</span><span class=k>$(</span>date<span class=w> </span>-u<span class=w> </span>-d<span class=w> </span><span class=s1>&#39;5 minutes ago&#39;</span><span class=w> </span>+%Y-%m-%dT%H:%M:%SZ<span class=k>)</span><span class=s2>&quot;</span><span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-22><a id=__codelineno-26-22 name=__codelineno-26-22 href=#__codelineno-26-22></a>
</span><span id=__span-26-23><a id=__codelineno-26-23 name=__codelineno-26-23 href=#__codelineno-26-23></a><span class=c1>## Show logs until a specific time</span>
</span><span id=__span-26-24><a id=__codelineno-26-24 name=__codelineno-26-24 href=#__codelineno-26-24></a>crictl<span class=w> </span>logs<span class=w> </span>--until<span class=w> </span><span class=s2>&quot;2024-01-15T11:00:00Z&quot;</span><span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-26-25><a id=__codelineno-26-25 name=__codelineno-26-25 href=#__codelineno-26-25></a>
</span><span id=__span-26-26><a id=__codelineno-26-26 name=__codelineno-26-26 href=#__codelineno-26-26></a><span class=c1>## Combine: follow logs with timestamps, showing only the last 20 lines</span>
</span><span id=__span-26-27><a id=__codelineno-26-27 name=__codelineno-26-27 href=#__codelineno-26-27></a>crictl<span class=w> </span>logs<span class=w> </span>--follow<span class=w> </span>--timestamps<span class=w> </span>--tail<span class=w> </span><span class=m>20</span><span class=w> </span>b1c2d3e4f5g6
</span></code></pre></div> <h4 id=viewing-logs-of-previous-container-instances>Viewing Logs of Previous Container Instances<a class=headerlink href=#viewing-logs-of-previous-container-instances title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1>## When a container restarts (CrashLoopBackOff), you may want to see</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a><span class=c1>## logs from the previous instance</span>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=c1>## List all containers (including exited) for a specific pod</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--pod<span class=w> </span>a1b2c3d4e5f6
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=c1>## The output shows ATTEMPT numbers:</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=c1>## CONTAINER      IMAGE     CREATED        STATE    NAME     ATTEMPT  POD ID</span>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=c1>## b1c2d3e4f5g6   nginx     1 min ago      Running  nginx    3        a1b2...</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=c1>## x1y2z3a4b5c6   nginx     3 min ago      Exited   nginx    2        a1b2...</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=c1>## d6e7f8g9h0i1   nginx     5 min ago      Exited   nginx    1        a1b2...</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=c1>## View logs from the previous (exited) container instance</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>crictl<span class=w> </span>logs<span class=w> </span>x1y2z3a4b5c6
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=c1>## View logs from the oldest instance</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>crictl<span class=w> </span>logs<span class=w> </span>d6e7f8g9h0i1
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Log File Location</p> <p>Container logs are stored on disk at a path determined by the container runtime. You can find the log path with <code>crictl inspect &lt;container-id&gt; | jq '.status.logPath'</code>. For <code>containerd</code>, logs are typically stored under <code>/var/log/pods/</code>.</p> </div> <hr> <h3 id=step-08-executing-commands-inside-containers-with-crictl-exec>Step 08 - Executing Commands Inside Containers with crictl exec<a class=headerlink href=#step-08-executing-commands-inside-containers-with-crictl-exec title="Permanent link">&para;</a></h3> <ul> <li>The <code>crictl exec</code> command runs a command inside a running container.</li> <li>It works similarly to <code>kubectl exec</code> but at the runtime level.</li> </ul> <h4 id=basic-command-execution>Basic Command Execution<a class=headerlink href=#basic-command-execution title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1>## Execute a single command in a container</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>ls<span class=w> </span>/
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=c1>## Execute a command with arguments</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>cat<span class=w> </span>/etc/hostname
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=c1>## Check the container&#39;s IP address</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>ip<span class=w> </span>addr<span class=w> </span>show
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=c1>## View running processes inside the container</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>ps<span class=w> </span>aux
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=c1>## Check DNS resolution inside the container</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>cat<span class=w> </span>/etc/resolv.conf
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a><span class=c1>## Test network connectivity from inside the container</span>
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>wget<span class=w> </span>-qO-<span class=w> </span>http://kubernetes.default.svc.cluster.local/healthz
</span></code></pre></div> <h4 id=interactive-shell>Interactive Shell<a class=headerlink href=#interactive-shell title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1>## Open an interactive shell inside the container</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=c1>## -i = interactive (keep stdin open)</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=c1>## -t = allocate a pseudo-TTY</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>b1c2d3e4f5g6<span class=w> </span>/bin/sh
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=c1>## If the container has bash available</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>b1c2d3e4f5g6<span class=w> </span>/bin/bash
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=c1>## Once inside the container, you can run commands interactively:</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=c1>## # ls /app</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=c1>## # env</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=c1>## # curl localhost:8080/health</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=c1>## # exit</span>
</span></code></pre></div> <h4 id=debugging-with-exec>Debugging with exec<a class=headerlink href=#debugging-with-exec title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1>## Check if a specific port is listening inside the container</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>netstat<span class=w> </span>-tlnp
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=c1>## Check environment variables (useful for debugging misconfiguration)</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>env
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=c1>## Check file system mounts inside the container</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>mount
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=c1>## Read application configuration files</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>cat<span class=w> </span>/etc/nginx/nginx.conf
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=c1>## Check available disk space inside the container</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>df<span class=w> </span>-h
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=c1>## Test if another service is reachable from this container</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>b1c2d3e4f5g6<span class=w> </span>ping<span class=w> </span>-c<span class=w> </span><span class=m>3</span><span class=w> </span>google.com
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>exec Only Works on Running Containers</p> <p>You cannot use <code>crictl exec</code> on exited or stopped containers. For debugging crashed containers, use <code>crictl logs</code> to view their output, or <code>crictl inspect</code> to examine their exit code and state.</p> </div> <hr> <h3 id=step-09-image-management>Step 09 - Image Management<a class=headerlink href=#step-09-image-management title="Permanent link">&para;</a></h3> <ul> <li><code>crictl</code> provides commands to manage container images on the node.</li> <li>This is useful for verifying that images are available, checking disk usage, and cleaning up unused images.</li> </ul> <h4 id=listing-images>Listing Images<a class=headerlink href=#listing-images title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1>## List all images on the node</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>crictl<span class=w> </span>images
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=c1>## Example output:</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=c1>## IMAGE                                     TAG        IMAGE ID       SIZE</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=c1>## docker.io/library/nginx                   1.25       a6bd71f48f68   67.3MB</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=c1>## registry.k8s.io/coredns/coredns           v1.11.1    cbb01a7bd410   16.2MB</span>
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a><span class=c1>## registry.k8s.io/etcd                      3.5.10     a0d6d4a97e3c   102MB</span>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=c1>## registry.k8s.io/kube-apiserver            v1.29.0    e7972205b661   128MB</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=c1>## registry.k8s.io/kube-proxy                v1.29.0    2d4e6e23bb50   82.5MB</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a><span class=c1>## registry.k8s.io/pause                     3.9        e6f181688397   744kB</span>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=c1>## Show full image IDs (not truncated)</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>crictl<span class=w> </span>images<span class=w> </span>--no-trunc
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a><span class=c1>## Show only image IDs (useful for scripting)</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a>crictl<span class=w> </span>images<span class=w> </span>--quiet
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a><span class=c1>## Show images with digests</span>
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a>crictl<span class=w> </span>images<span class=w> </span>--digests
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21 href=#__codelineno-31-21></a>
</span><span id=__span-31-22><a id=__codelineno-31-22 name=__codelineno-31-22 href=#__codelineno-31-22></a><span class=c1>## Output in JSON format</span>
</span><span id=__span-31-23><a id=__codelineno-31-23 name=__codelineno-31-23 href=#__codelineno-31-23></a>crictl<span class=w> </span>images<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-31-24><a id=__codelineno-31-24 name=__codelineno-31-24 href=#__codelineno-31-24></a>
</span><span id=__span-31-25><a id=__codelineno-31-25 name=__codelineno-31-25 href=#__codelineno-31-25></a><span class=c1>## Output in YAML format</span>
</span><span id=__span-31-26><a id=__codelineno-31-26 name=__codelineno-31-26 href=#__codelineno-31-26></a>crictl<span class=w> </span>images<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-31-27><a id=__codelineno-31-27 name=__codelineno-31-27 href=#__codelineno-31-27></a>
</span><span id=__span-31-28><a id=__codelineno-31-28 name=__codelineno-31-28 href=#__codelineno-31-28></a><span class=c1>## Filter images by repository name</span>
</span><span id=__span-31-29><a id=__codelineno-31-29 name=__codelineno-31-29 href=#__codelineno-31-29></a>crictl<span class=w> </span>images<span class=w> </span>nginx
</span><span id=__span-31-30><a id=__codelineno-31-30 name=__codelineno-31-30 href=#__codelineno-31-30></a>
</span><span id=__span-31-31><a id=__codelineno-31-31 name=__codelineno-31-31 href=#__codelineno-31-31></a><span class=c1>## Filter images by full reference</span>
</span><span id=__span-31-32><a id=__codelineno-31-32 name=__codelineno-31-32 href=#__codelineno-31-32></a>crictl<span class=w> </span>images<span class=w> </span>docker.io/library/nginx:1.25
</span></code></pre></div> <h4 id=pulling-images>Pulling Images<a class=headerlink href=#pulling-images title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1>## Pull an image from a registry</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>crictl<span class=w> </span>pull<span class=w> </span>nginx:latest
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=c1>## Pull a specific version</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>crictl<span class=w> </span>pull<span class=w> </span>nginx:1.25.3
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=c1>## Pull from a specific registry</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a>crictl<span class=w> </span>pull<span class=w> </span>docker.io/library/alpine:3.19
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=c1>## Pull from a private registry (requires authentication configured in containerd)</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a>crictl<span class=w> </span>pull<span class=w> </span>myregistry.example.com/myapp:v1.0
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class=c1>## Pull and show progress</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>crictl<span class=w> </span>pull<span class=w> </span>--no-trunc<span class=w> </span>busybox:latest
</span></code></pre></div> <h4 id=inspecting-images>Inspecting Images<a class=headerlink href=#inspecting-images title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1>## Inspect a specific image to see its details</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=c1>## Pretty-print the image inspection</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=c1>## Get the image size</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.size&#39;</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=c1>## Get the image&#39;s environment variables</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.imageSpec.config.Env&#39;</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=c1>## Get the image&#39;s entrypoint and command</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{entrypoint: .info.imageSpec.config.Entrypoint, cmd: .info.imageSpec.config.Cmd}&#39;</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=c1>## Get the image&#39;s exposed ports</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.imageSpec.config.ExposedPorts&#39;</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a><span class=c1>## Get the image&#39;s labels</span>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a>crictl<span class=w> </span>inspecti<span class=w> </span>nginx:latest<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.imageSpec.config.Labels&#39;</span>
</span></code></pre></div> <h4 id=removing-images>Removing Images<a class=headerlink href=#removing-images title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1>## Remove a specific image by tag</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>crictl<span class=w> </span>rmi<span class=w> </span>nginx:latest
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=c1>## Remove a specific image by image ID</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>crictl<span class=w> </span>rmi<span class=w> </span>a6bd71f48f68
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=c1>## Remove multiple images at once</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>crictl<span class=w> </span>rmi<span class=w> </span>nginx:latest<span class=w> </span>alpine:3.19<span class=w> </span>busybox:latest
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=c1>## Remove all unused images (images not referenced by any container)</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>crictl<span class=w> </span>rmi<span class=w> </span>--prune
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=c1>## Force remove all images (use with caution!)</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=c1>## This will remove images even if containers are using them</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>crictl<span class=w> </span>rmi<span class=w> </span>--all
</span></code></pre></div> <h4 id=image-filesystem-information>Image Filesystem Information<a class=headerlink href=#image-filesystem-information title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1>## Show image filesystem usage on the node</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>crictl<span class=w> </span>imagefsinfo
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=c1>## Pretty-print the output</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>crictl<span class=w> </span>imagefsinfo<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=c1>## This shows:</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a><span class=c1>## - Timestamp of the information</span>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=c1>## - Filesystem identifier (device, mountpoint)</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a><span class=c1>## - Used bytes and inodes</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=c1>## - Total bytes and inodes available</span>
</span></code></pre></div> <div class="admonition danger"> <p class=admonition-title>Removing Images in Production</p> <p>Be very careful when removing images on production nodes. If you remove an image that a running pod depends on, the pod may fail to restart (e.g., during a node reboot or pod rescheduling). Always use <code>crictl rmi --prune</code> instead of <code>crictl rmi --all</code> in production environments.</p> </div> <hr> <h3 id=step-10-stats-and-resource-usage>Step 10 - Stats and Resource Usage<a class=headerlink href=#step-10-stats-and-resource-usage title="Permanent link">&para;</a></h3> <ul> <li><code>crictl</code> provides commands to monitor resource usage of containers and pods in real-time.</li> <li>This is useful for identifying resource-hungry containers and debugging performance issues.</li> </ul> <h4 id=container-stats>Container Stats<a class=headerlink href=#container-stats title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1>## Show resource usage for all running containers</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>crictl<span class=w> </span>stats
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=c1>## Example output:</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=c1>## CONTAINER        CPU %   MEM         DISK        INODES</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=c1>## b1c2d3e4f5g6     0.15    25.6MB      12.4kB      15</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a><span class=c1>## h7i8j9k0l1m2     0.08    18.2MB      8.2kB       12</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=c1>## Show stats for a specific container</span>
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>crictl<span class=w> </span>stats<span class=w> </span>b1c2d3e4f5g6
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a><span class=c1>## Show stats for all containers (including stopped)</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>crictl<span class=w> </span>stats<span class=w> </span>-a
</span><span id=__span-36-14><a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>
</span><span id=__span-36-15><a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a><span class=c1>## Output stats in JSON format</span>
</span><span id=__span-36-16><a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-36-17><a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>
</span><span id=__span-36-18><a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=c1>## Output stats in YAML format</span>
</span><span id=__span-36-19><a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-36-20><a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a>
</span><span id=__span-36-21><a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a><span class=c1>## Filter stats by label</span>
</span><span id=__span-36-22><a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a>crictl<span class=w> </span>stats<span class=w> </span>--label<span class=w> </span>io.kubernetes.container.name<span class=o>=</span>nginx
</span><span id=__span-36-23><a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>
</span><span id=__span-36-24><a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a><span class=c1>## Show stats by container ID</span>
</span><span id=__span-36-25><a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a>crictl<span class=w> </span>stats<span class=w> </span>--id<span class=w> </span>b1c2d3e4f5g6
</span></code></pre></div> <h4 id=pod-stats>Pod Stats<a class=headerlink href=#pod-stats title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1>## Show resource usage for all pods (aggregated)</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>crictl<span class=w> </span>statsp
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=c1>## Example output:</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=c1>## POD                                CPU %   MEM</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=c1>## a1b2c3d4e5f6                       0.23    43.8MB</span>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=c1>## f6e5d4c3b2a1                       0.08    18.2MB</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a><span class=c1>## Show stats for a specific pod</span>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a>crictl<span class=w> </span>statsp<span class=w> </span>--id<span class=w> </span>a1b2c3d4e5f6
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a><span class=c1>## Filter pod stats by label</span>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a>crictl<span class=w> </span>statsp<span class=w> </span>--label<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a><span class=c1>## Output pod stats in JSON format</span>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a>crictl<span class=w> </span>statsp<span class=w> </span>-o<span class=w> </span>json
</span></code></pre></div> <h4 id=analyzing-resource-usage>Analyzing Resource Usage<a class=headerlink href=#analyzing-resource-usage title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=c1>## Find the container using the most memory</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=c1>## (using JSON output and jq for sorting)</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.stats | sort_by(.memory.workingSetBytes.value) | reverse | .[] | &quot;\(.attributes.id[0:12]) \(.attributes.labels[&quot;io.kubernetes.container.name&quot;]) \(.memory.workingSetBytes.value / 1048576)MB&quot;&#39;</span>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=c1>## Find the container using the most CPU</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.stats | sort_by(.cpu.usageCoreNanoSeconds.value) | reverse | .[] | &quot;\(.attributes.id[0:12]) \(.attributes.labels[&quot;io.kubernetes.container.name&quot;]) CPU: \(.cpu.usageCoreNanoSeconds.value)&quot;&#39;</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=c1>## Monitor stats continuously (watch mode)</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=c1>## Use the &#39;watch&#39; command to refresh stats every 2 seconds</span>
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>watch<span class=w> </span>-n<span class=w> </span><span class=m>2</span><span class=w> </span>crictl<span class=w> </span>stats
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a><span class=c1>## Monitor a specific container continuously</span>
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>watch<span class=w> </span>-n<span class=w> </span><span class=m>2</span><span class=w> </span>crictl<span class=w> </span>stats<span class=w> </span>--id<span class=w> </span>b1c2d3e4f5g6
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Comparing with kubectl top</p> <p><code>crictl stats</code> shows the raw resource usage from the container runtime, while <code>kubectl top pods</code> shows metrics from the Kubernetes Metrics Server. The values may differ slightly because they come from different sources and measure different things. <code>crictl stats</code> is node-local and does not require the Metrics Server to be installed.</p> </div> <hr> <h3 id=step-11-runtime-info-and-debugging>Step 11 - Runtime Info and Debugging<a class=headerlink href=#step-11-runtime-info-and-debugging title="Permanent link">&para;</a></h3> <ul> <li><code>crictl</code> provides commands to query the container runtime itself for version information, configuration, and health status.</li> <li>These commands are essential for diagnosing runtime-level issues.</li> </ul> <h4 id=runtime-version>Runtime Version<a class=headerlink href=#runtime-version title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=c1>## Show the CRI version and the container runtime version</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>crictl<span class=w> </span>version
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=c1>## Example output:</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=c1>## Version:  0.1.0</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=c1>## RuntimeName:  containerd</span>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=c1>## RuntimeVersion:  v1.7.11</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=c1>## RuntimeApiVersion:  v1</span>
</span></code></pre></div> <h4 id=runtime-information>Runtime Information<a class=headerlink href=#runtime-information title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=c1>## Show detailed runtime information (configuration, features, status)</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>crictl<span class=w> </span>info
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=c1>## Pretty-print the runtime info</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=c1>## Get the runtime&#39;s storage driver</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.config.containerd.snapshotter&#39;</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=c1>## Get the runtime&#39;s CNI configuration</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.config.cni&#39;</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=c1>## Get the runtime&#39;s cgroup driver</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.config.containerd.runtimes.runc.options.SystemdCgroup&#39;</span>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=c1>## Check if the runtime is ready</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.conditions&#39;</span>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=c1>## Example output for conditions:</span>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class=c1>## [</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=c1>##   { &quot;type&quot;: &quot;RuntimeReady&quot;, &quot;status&quot;: true, &quot;reason&quot;: &quot;&quot;, &quot;message&quot;: &quot;&quot; },</span>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=c1>##   { &quot;type&quot;: &quot;NetworkReady&quot;, &quot;status&quot;: true, &quot;reason&quot;: &quot;&quot;, &quot;message&quot;: &quot;&quot; }</span>
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a><span class=c1>## ]</span>
</span></code></pre></div> <h4 id=runtime-status-and-health-check>Runtime Status and Health Check<a class=headerlink href=#runtime-status-and-health-check title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=c1>## Check the runtime status conditions</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=c1>## This tells you if the runtime and network plugins are healthy</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status&#39;</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=c1>## Check specifically if RuntimeReady is true</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.conditions[] | select(.type==&quot;RuntimeReady&quot;)&#39;</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=c1>## Check specifically if NetworkReady is true</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.conditions[] | select(.type==&quot;NetworkReady&quot;)&#39;</span>
</span></code></pre></div> <h4 id=debugging-common-runtime-issues>Debugging Common Runtime Issues<a class=headerlink href=#debugging-common-runtime-issues title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=c1>## Check if the runtime socket exists and is accessible</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a>ls<span class=w> </span>-la<span class=w> </span>/run/containerd/containerd.sock
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=c1>## Check if the containerd service is running</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>systemctl<span class=w> </span>status<span class=w> </span>containerd
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=c1>## Check containerd logs for errors</span>
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>journalctl<span class=w> </span>-u<span class=w> </span>containerd<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;10 minutes ago&quot;</span><span class=w> </span>--no-pager
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=c1>## For CRI-O:</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a>systemctl<span class=w> </span>status<span class=w> </span>crio
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a>journalctl<span class=w> </span>-u<span class=w> </span>crio<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;10 minutes ago&quot;</span><span class=w> </span>--no-pager
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=c1>## Check the kubelet logs for CRI-related errors</span>
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a>journalctl<span class=w> </span>-u<span class=w> </span>kubelet<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;10 minutes ago&quot;</span><span class=w> </span>--no-pager<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span><span class=s2>&quot;cri\|runtime\|container&quot;</span>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=c1>## Verify the CRI socket permissions</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a>stat<span class=w> </span>/run/containerd/containerd.sock
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a>
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a><span class=c1>## Test connectivity to the runtime socket directly</span>
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a>crictl<span class=w> </span>--runtime-endpoint<span class=w> </span>unix:///run/containerd/containerd.sock<span class=w> </span>version
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>RuntimeReady and NetworkReady</p> <p>If <code>crictl info</code> shows <code>RuntimeReady: false</code> or <code>NetworkReady: false</code>, it means the container runtime or the CNI plugin is not functioning correctly. This will prevent new pods from starting on this node. Check the runtime logs and CNI configuration immediately.</p> </div> <hr> <h3 id=step-12-advanced-debugging-creating-pods-and-containers-manually>Step 12 - Advanced Debugging: Creating Pods and Containers Manually<a class=headerlink href=#step-12-advanced-debugging-creating-pods-and-containers-manually title="Permanent link">&para;</a></h3> <ul> <li>For advanced debugging scenarios, <code>crictl</code> allows you to manually create pod sandboxes and containers.</li> <li>This is useful for testing runtime behavior, reproducing issues, and understanding the pod lifecycle.</li> </ul> <div class="admonition danger"> <p class=admonition-title>Manual Pod/Container Creation</p> <p>Pods and containers created manually with <code>crictl</code> are <strong>not managed by the kubelet</strong>. The kubelet will not know about them, they will not appear in <code>kubectl get pods</code>, and they will not be automatically restarted or garbage collected. <strong>Use this only for debugging purposes and clean up afterward.</strong></p> </div> <h4 id=create-a-pod-sandbox>Create a Pod Sandbox<a class=headerlink href=#create-a-pod-sandbox title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=c1>## First, create a pod sandbox configuration file</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>cat<span class=w> </span><span class=s>&lt;&lt;EOF &gt; /tmp/pod-sandbox-config.json</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=s>{</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=s>  &quot;metadata&quot;: {</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=s>    &quot;name&quot;: &quot;debug-sandbox&quot;,</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=s>    &quot;namespace&quot;: &quot;default&quot;,</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=s>    &quot;attempt&quot;: 1,</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=s>    &quot;uid&quot;: &quot;debug-sandbox-uid-001&quot;</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=s>  },</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a><span class=s>  &quot;log_directory&quot;: &quot;/tmp/debug-sandbox-logs&quot;,</span>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=s>  &quot;linux&quot;: {}</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a><span class=s>}</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=s>EOF</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a><span class=c1>## Create the log directory</span>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a>mkdir<span class=w> </span>-p<span class=w> </span>/tmp/debug-sandbox-logs
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a>
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a><span class=c1>## Create (run) the pod sandbox</span>
</span><span id=__span-43-19><a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a><span class=c1>## The &#39;runp&#39; command creates and starts a new pod sandbox</span>
</span><span id=__span-43-20><a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a><span class=nv>SANDBOX_ID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>runp<span class=w> </span>/tmp/pod-sandbox-config.json<span class=k>)</span>
</span><span id=__span-43-21><a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Created sandbox: </span><span class=nv>$SANDBOX_ID</span><span class=s2>&quot;</span>
</span><span id=__span-43-22><a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a>
</span><span id=__span-43-23><a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a><span class=c1>## Verify the sandbox was created</span>
</span><span id=__span-43-24><a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a>crictl<span class=w> </span>pods<span class=w> </span>--name<span class=w> </span>debug-sandbox
</span><span id=__span-43-25><a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a>
</span><span id=__span-43-26><a id=__codelineno-43-26 name=__codelineno-43-26 href=#__codelineno-43-26></a><span class=c1>## Inspect the sandbox</span>
</span><span id=__span-43-27><a id=__codelineno-43-27 name=__codelineno-43-27 href=#__codelineno-43-27></a>crictl<span class=w> </span>inspectp<span class=w> </span><span class=nv>$SANDBOX_ID</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span></code></pre></div> <h4 id=create-a-container-inside-the-sandbox>Create a Container Inside the Sandbox<a class=headerlink href=#create-a-container-inside-the-sandbox title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=c1>## Create a container configuration file</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>cat<span class=w> </span><span class=s>&lt;&lt;EOF &gt; /tmp/container-config.json</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=s>{</span>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=s>  &quot;metadata&quot;: {</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a><span class=s>    &quot;name&quot;: &quot;debug-container&quot;</span>
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a><span class=s>  },</span>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=s>  &quot;image&quot;: {</span>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a><span class=s>    &quot;image&quot;: &quot;docker.io/library/busybox:latest&quot;</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a><span class=s>  },</span>
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a><span class=s>  &quot;command&quot;: [</span>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a><span class=s>    &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;echo &#39;Hello from crictl debug container!&#39; &amp;&amp; sleep 3600&quot;</span>
</span><span id=__span-44-12><a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a><span class=s>  ],</span>
</span><span id=__span-44-13><a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a><span class=s>  &quot;log_path&quot;: &quot;debug-container.log&quot;,</span>
</span><span id=__span-44-14><a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a><span class=s>  &quot;linux&quot;: {}</span>
</span><span id=__span-44-15><a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a><span class=s>}</span>
</span><span id=__span-44-16><a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a><span class=s>EOF</span>
</span><span id=__span-44-17><a id=__codelineno-44-17 name=__codelineno-44-17 href=#__codelineno-44-17></a>
</span><span id=__span-44-18><a id=__codelineno-44-18 name=__codelineno-44-18 href=#__codelineno-44-18></a><span class=c1>## Make sure the image is available locally</span>
</span><span id=__span-44-19><a id=__codelineno-44-19 name=__codelineno-44-19 href=#__codelineno-44-19></a>crictl<span class=w> </span>pull<span class=w> </span>busybox:latest
</span><span id=__span-44-20><a id=__codelineno-44-20 name=__codelineno-44-20 href=#__codelineno-44-20></a>
</span><span id=__span-44-21><a id=__codelineno-44-21 name=__codelineno-44-21 href=#__codelineno-44-21></a><span class=c1>## Create the container (does NOT start it yet)</span>
</span><span id=__span-44-22><a id=__codelineno-44-22 name=__codelineno-44-22 href=#__codelineno-44-22></a><span class=c1>## Arguments: container-config sandbox-config sandbox-id</span>
</span><span id=__span-44-23><a id=__codelineno-44-23 name=__codelineno-44-23 href=#__codelineno-44-23></a><span class=nv>CONTAINER_ID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>create<span class=w> </span><span class=nv>$SANDBOX_ID</span><span class=w> </span>/tmp/container-config.json<span class=w> </span>/tmp/pod-sandbox-config.json<span class=k>)</span>
</span><span id=__span-44-24><a id=__codelineno-44-24 name=__codelineno-44-24 href=#__codelineno-44-24></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Created container: </span><span class=nv>$CONTAINER_ID</span><span class=s2>&quot;</span>
</span><span id=__span-44-25><a id=__codelineno-44-25 name=__codelineno-44-25 href=#__codelineno-44-25></a>
</span><span id=__span-44-26><a id=__codelineno-44-26 name=__codelineno-44-26 href=#__codelineno-44-26></a><span class=c1>## Verify the container was created (state = Created)</span>
</span><span id=__span-44-27><a id=__codelineno-44-27 name=__codelineno-44-27 href=#__codelineno-44-27></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--id<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-44-28><a id=__codelineno-44-28 name=__codelineno-44-28 href=#__codelineno-44-28></a>
</span><span id=__span-44-29><a id=__codelineno-44-29 name=__codelineno-44-29 href=#__codelineno-44-29></a><span class=c1>## Start the container</span>
</span><span id=__span-44-30><a id=__codelineno-44-30 name=__codelineno-44-30 href=#__codelineno-44-30></a>crictl<span class=w> </span>start<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-44-31><a id=__codelineno-44-31 name=__codelineno-44-31 href=#__codelineno-44-31></a>
</span><span id=__span-44-32><a id=__codelineno-44-32 name=__codelineno-44-32 href=#__codelineno-44-32></a><span class=c1>## Verify the container is now running</span>
</span><span id=__span-44-33><a id=__codelineno-44-33 name=__codelineno-44-33 href=#__codelineno-44-33></a>crictl<span class=w> </span>ps<span class=w> </span>--id<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span></code></pre></div> <h4 id=interact-with-the-manual-container>Interact with the Manual Container<a class=headerlink href=#interact-with-the-manual-container title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=c1>## View the container logs</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a>crictl<span class=w> </span>logs<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=c1>## Execute a command inside the container</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span>hostname
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=c1>## Open an interactive shell</span>
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span>/bin/sh
</span></code></pre></div> <h4 id=clean-up-manual-pods-and-containers>Clean Up Manual Pods and Containers<a class=headerlink href=#clean-up-manual-pods-and-containers title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=c1>## Stop the container</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>crictl<span class=w> </span>stop<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=c1>## Remove the container</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>crictl<span class=w> </span>rm<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-46-6><a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a>
</span><span id=__span-46-7><a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=c1>## Stop the pod sandbox</span>
</span><span id=__span-46-8><a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a>crictl<span class=w> </span>stopp<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-46-9><a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a>
</span><span id=__span-46-10><a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a><span class=c1>## Remove the pod sandbox</span>
</span><span id=__span-46-11><a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a>crictl<span class=w> </span>rmp<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-46-12><a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a>
</span><span id=__span-46-13><a id=__codelineno-46-13 name=__codelineno-46-13 href=#__codelineno-46-13></a><span class=c1>## Verify everything is cleaned up</span>
</span><span id=__span-46-14><a id=__codelineno-46-14 name=__codelineno-46-14 href=#__codelineno-46-14></a>crictl<span class=w> </span>pods<span class=w> </span>--name<span class=w> </span>debug-sandbox
</span><span id=__span-46-15><a id=__codelineno-46-15 name=__codelineno-46-15 href=#__codelineno-46-15></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--id<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-46-16><a id=__codelineno-46-16 name=__codelineno-46-16 href=#__codelineno-46-16></a>
</span><span id=__span-46-17><a id=__codelineno-46-17 name=__codelineno-46-17 href=#__codelineno-46-17></a><span class=c1>## Remove the temporary config files</span>
</span><span id=__span-46-18><a id=__codelineno-46-18 name=__codelineno-46-18 href=#__codelineno-46-18></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/pod-sandbox-config.json<span class=w> </span>/tmp/container-config.json
</span><span id=__span-46-19><a id=__codelineno-46-19 name=__codelineno-46-19 href=#__codelineno-46-19></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/debug-sandbox-logs
</span></code></pre></div> <h4 id=understanding-the-manual-lifecycle>Understanding the Manual Lifecycle<a class=headerlink href=#understanding-the-manual-lifecycle title="Permanent link">&para;</a></h4> <p>The manual pod/container lifecycle mirrors what the kubelet does automatically:</p> <pre class=mermaid><code>graph LR
    A["runp&lt;br/&gt;(create sandbox)"] --&gt; B["create&lt;br/&gt;(create container)"]
    B --&gt; C["start&lt;br/&gt;(start container)"]
    C --&gt; D["exec / logs&lt;br/&gt;(interact)"]
    D --&gt; E["stop&lt;br/&gt;(stop container)"]
    E --&gt; F["rm&lt;br/&gt;(remove container)"]
    F --&gt; G["stopp&lt;br/&gt;(stop sandbox)"]
    G --&gt; H["rmp&lt;br/&gt;(remove sandbox)"]

    style A fill:#42a5f5,stroke:#1565c0,color:#000
    style B fill:#66bb6a,stroke:#2e7d32,color:#000
    style C fill:#66bb6a,stroke:#2e7d32,color:#000
    style D fill:#f9a825,stroke:#f57f17,color:#000
    style E fill:#ef5350,stroke:#c62828,color:#fff
    style F fill:#ef5350,stroke:#c62828,color:#fff
    style G fill:#ef5350,stroke:#c62828,color:#fff
    style H fill:#ef5350,stroke:#c62828,color:#fff</code></pre> <div class="admonition tip"> <p class=admonition-title>kubelet Garbage Collection</p> <p>In normal Kubernetes operation, the kubelet automatically garbage collects exited containers and unused pod sandboxes. When you create pods and containers manually with <code>crictl</code>, the kubelet <strong>may</strong> garbage collect them if they are not associated with a known pod in the API server. Always clean up your manual resources promptly.</p> </div> <hr> <h3 id=crictl-command-reference>crictl Command Reference<a class=headerlink href=#crictl-command-reference title="Permanent link">&para;</a></h3> <p>Below is a quick-reference table of all major <code>crictl</code> commands:</p> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>crictl pods</code></td> <td>List pod sandboxes</td> </tr> <tr> <td><code>crictl inspectp</code></td> <td>Inspect a pod sandbox</td> </tr> <tr> <td><code>crictl runp</code></td> <td>Create and start a pod sandbox</td> </tr> <tr> <td><code>crictl stopp</code></td> <td>Stop a pod sandbox</td> </tr> <tr> <td><code>crictl rmp</code></td> <td>Remove a pod sandbox</td> </tr> <tr> <td><code>crictl ps</code></td> <td>List containers</td> </tr> <tr> <td><code>crictl inspect</code></td> <td>Inspect a container</td> </tr> <tr> <td><code>crictl create</code></td> <td>Create a container</td> </tr> <tr> <td><code>crictl start</code></td> <td>Start a container</td> </tr> <tr> <td><code>crictl stop</code></td> <td>Stop a container</td> </tr> <tr> <td><code>crictl rm</code></td> <td>Remove a container</td> </tr> <tr> <td><code>crictl exec</code></td> <td>Execute a command in a running container</td> </tr> <tr> <td><code>crictl logs</code></td> <td>View container logs</td> </tr> <tr> <td><code>crictl attach</code></td> <td>Attach to a running container</td> </tr> <tr> <td><code>crictl port-forward</code></td> <td>Forward local port to a pod sandbox</td> </tr> <tr> <td><code>crictl images</code></td> <td>List images</td> </tr> <tr> <td><code>crictl inspecti</code></td> <td>Inspect an image</td> </tr> <tr> <td><code>crictl pull</code></td> <td>Pull an image</td> </tr> <tr> <td><code>crictl rmi</code></td> <td>Remove an image</td> </tr> <tr> <td><code>crictl imagefsinfo</code></td> <td>Show image filesystem info</td> </tr> <tr> <td><code>crictl stats</code></td> <td>Show container resource usage</td> </tr> <tr> <td><code>crictl statsp</code></td> <td>Show pod resource usage</td> </tr> <tr> <td><code>crictl info</code></td> <td>Show runtime information</td> </tr> <tr> <td><code>crictl version</code></td> <td>Show CRI and runtime versions</td> </tr> <tr> <td><code>crictl completion</code></td> <td>Generate shell completion scripts</td> </tr> </tbody> </table> <hr> <h1 id=exercises>Exercises<a class=headerlink href=#exercises title="Permanent link">&para;</a></h1> <p>The following exercises will test your understanding of <code>crictl</code> concepts. Try to solve each exercise on your own before revealing the solution.</p> <hr> <h4 id=01-list-all-pods-in-a-specific-namespace>01. List All Pods in a Specific Namespace<a class=headerlink href=#01-list-all-pods-in-a-specific-namespace title="Permanent link">&para;</a></h4> <p>List all pod sandboxes running in the <code>kube-system</code> namespace using <code>crictl</code>.</p> <h4 id=scenario>Scenario:<a class=headerlink href=#scenario title="Permanent link">&para;</a></h4> <p> You are debugging DNS issues and need to check the state of CoreDNS pods on a specific node.  You need to verify that all system-level pods are in the <code>Ready</code> state.</p> <p><strong>Hint:</strong> Use <code>crictl pods</code> with the <code>--namespace</code> filter.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=c1>## List all pods in the kube-system namespace</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>kube-system
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a>
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a><span class=c1>## List only Ready pods in kube-system</span>
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>kube-system<span class=w> </span>--state<span class=w> </span>Ready
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=c1>## List pods in kube-system with specific labels (e.g., CoreDNS)</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>kube-system<span class=w> </span>--label<span class=w> </span>k8s-app<span class=o>=</span>kube-dns
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=c1>## Show full output in JSON format for detailed inspection</span>
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a>crictl<span class=w> </span>pods<span class=w> </span>--namespace<span class=w> </span>kube-system<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[] | {name: .metadata.name, state: .state, id: .id}&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=02-find-all-exited-containers-and-get-their-exit-codes>02. Find All Exited Containers and Get Their Exit Codes<a class=headerlink href=#02-find-all-exited-containers-and-get-their-exit-codes title="Permanent link">&para;</a></h4> <p>Identify all containers that have exited and determine their exit codes.</p> <h4 id=scenario_1>Scenario:<a class=headerlink href=#scenario_1 title="Permanent link">&para;</a></h4> <p> A pod is in <code>CrashLoopBackOff</code> and you need to understand why containers keep failing.  Exit codes provide critical information about the nature of the failure.</p> <p><strong>Hint:</strong> Use <code>crictl ps -a</code> to show all containers, filter by state <code>Exited</code>, and then use <code>crictl inspect</code> to get the exit codes.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=c1>## List all exited containers</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=c1>## Get exit codes for all exited containers using JSON output and jq</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.containers[] | {</span>
</span><span id=__span-48-6><a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a><span class=s1>  name: .metadata.name,</span>
</span><span id=__span-48-7><a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=s1>  id: .id,</span>
</span><span id=__span-48-8><a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=s1>  podSandboxId: .podSandboxId,</span>
</span><span id=__span-48-9><a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=s1>  state: .state,</span>
</span><span id=__span-48-10><a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a><span class=s1>  createdAt: .createdAt,</span>
</span><span id=__span-48-11><a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a><span class=s1>  finishedAt: .finishedAt</span>
</span><span id=__span-48-12><a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a><span class=s1>}&#39;</span>
</span><span id=__span-48-13><a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>
</span><span id=__span-48-14><a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a><span class=c1>## Inspect a specific exited container for its exit code</span>
</span><span id=__span-48-15><a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a><span class=c1>## Replace &lt;container-id&gt; with the actual container ID</span>
</span><span id=__span-48-16><a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a>crictl<span class=w> </span>inspect<span class=w> </span>&lt;container-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-48-17><a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a><span class=s1>  name: .status.metadata.name,</span>
</span><span id=__span-48-18><a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a><span class=s1>  exitCode: .status.exitCode,</span>
</span><span id=__span-48-19><a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a><span class=s1>  reason: .status.reason,</span>
</span><span id=__span-48-20><a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a><span class=s1>  message: .status.message,</span>
</span><span id=__span-48-21><a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a><span class=s1>  finishedAt: .status.finishedAt</span>
</span><span id=__span-48-22><a id=__codelineno-48-22 name=__codelineno-48-22 href=#__codelineno-48-22></a><span class=s1>}&#39;</span>
</span><span id=__span-48-23><a id=__codelineno-48-23 name=__codelineno-48-23 href=#__codelineno-48-23></a>
</span><span id=__span-48-24><a id=__codelineno-48-24 name=__codelineno-48-24 href=#__codelineno-48-24></a><span class=c1>## Quick one-liner: list all exited containers with exit codes</span>
</span><span id=__span-48-25><a id=__codelineno-48-25 name=__codelineno-48-25 href=#__codelineno-48-25></a><span class=k>for</span><span class=w> </span>CID<span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>$(</span>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>-q<span class=k>)</span><span class=p>;</span><span class=w> </span><span class=k>do</span>
</span><span id=__span-48-26><a id=__codelineno-48-26 name=__codelineno-48-26 href=#__codelineno-48-26></a><span class=w>  </span><span class=nv>NAME</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspect<span class=w> </span><span class=nv>$CID</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.status.metadata.name&#39;</span><span class=k>)</span>
</span><span id=__span-48-27><a id=__codelineno-48-27 name=__codelineno-48-27 href=#__codelineno-48-27></a><span class=w>  </span><span class=nv>EXIT</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspect<span class=w> </span><span class=nv>$CID</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.status.exitCode&#39;</span><span class=k>)</span>
</span><span id=__span-48-28><a id=__codelineno-48-28 name=__codelineno-48-28 href=#__codelineno-48-28></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Container: </span><span class=nv>$CID</span><span class=s2> Name: </span><span class=nv>$NAME</span><span class=s2> ExitCode: </span><span class=nv>$EXIT</span><span class=s2>&quot;</span>
</span><span id=__span-48-29><a id=__codelineno-48-29 name=__codelineno-48-29 href=#__codelineno-48-29></a><span class=k>done</span>
</span><span id=__span-48-30><a id=__codelineno-48-30 name=__codelineno-48-30 href=#__codelineno-48-30></a>
</span><span id=__span-48-31><a id=__codelineno-48-31 name=__codelineno-48-31 href=#__codelineno-48-31></a><span class=c1>## Common exit codes reference:</span>
</span><span id=__span-48-32><a id=__codelineno-48-32 name=__codelineno-48-32 href=#__codelineno-48-32></a><span class=c1>##   0   = Success</span>
</span><span id=__span-48-33><a id=__codelineno-48-33 name=__codelineno-48-33 href=#__codelineno-48-33></a><span class=c1>##   1   = General error</span>
</span><span id=__span-48-34><a id=__codelineno-48-34 name=__codelineno-48-34 href=#__codelineno-48-34></a><span class=c1>##   137 = OOMKilled (SIGKILL)</span>
</span><span id=__span-48-35><a id=__codelineno-48-35 name=__codelineno-48-35 href=#__codelineno-48-35></a><span class=c1>##   139 = Segfault (SIGSEGV)</span>
</span><span id=__span-48-36><a id=__codelineno-48-36 name=__codelineno-48-36 href=#__codelineno-48-36></a><span class=c1>##   143 = Graceful termination (SIGTERM)</span>
</span></code></pre></div> </details> <hr> <h4 id=03-get-container-logs-from-the-last-5-minutes>03. Get Container Logs from the Last 5 Minutes<a class=headerlink href=#03-get-container-logs-from-the-last-5-minutes title="Permanent link">&para;</a></h4> <p>Retrieve the logs from a specific container, showing only entries from the last 5 minutes, with timestamps.</p> <h4 id=scenario_2>Scenario:<a class=headerlink href=#scenario_2 title="Permanent link">&para;</a></h4> <p> An application started misbehaving 5 minutes ago, and you need to see only the recent log entries.  Including timestamps helps correlate log events with external incidents.</p> <p><strong>Hint:</strong> Use <code>crictl logs</code> with <code>--since</code> and <code>--timestamps</code> flags. You will need to calculate the timestamp for 5 minutes ago.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=c1>## First, identify the container you want to inspect</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>crictl<span class=w> </span>ps
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=c1>## Note the container ID from the output</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a><span class=c1>## Calculate the timestamp for 5 minutes ago and get logs</span>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=c1>## On most Linux systems:</span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a><span class=nv>SINCE</span><span class=o>=</span><span class=k>$(</span>date<span class=w> </span>-u<span class=w> </span>-d<span class=w> </span><span class=s1>&#39;5 minutes ago&#39;</span><span class=w> </span>+%Y-%m-%dT%H:%M:%SZ<span class=k>)</span>
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>crictl<span class=w> </span>logs<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;</span><span class=nv>$SINCE</span><span class=s2>&quot;</span><span class=w> </span>--timestamps<span class=w> </span>&lt;container-id&gt;
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a>
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a><span class=c1>## On systems without GNU date (e.g., Alpine / BusyBox):</span>
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a><span class=c1>## Use a specific timestamp instead</span>
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a>crictl<span class=w> </span>logs<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;2024-01-15T10:25:00Z&quot;</span><span class=w> </span>--timestamps<span class=w> </span>&lt;container-id&gt;
</span><span id=__span-49-14><a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a>
</span><span id=__span-49-15><a id=__codelineno-49-15 name=__codelineno-49-15 href=#__codelineno-49-15></a><span class=c1>## Alternative: get the last 100 lines with timestamps</span>
</span><span id=__span-49-16><a id=__codelineno-49-16 name=__codelineno-49-16 href=#__codelineno-49-16></a><span class=c1>## (useful when you are not sure of the exact time range)</span>
</span><span id=__span-49-17><a id=__codelineno-49-17 name=__codelineno-49-17 href=#__codelineno-49-17></a>crictl<span class=w> </span>logs<span class=w> </span>--tail<span class=w> </span><span class=m>100</span><span class=w> </span>--timestamps<span class=w> </span>&lt;container-id&gt;
</span><span id=__span-49-18><a id=__codelineno-49-18 name=__codelineno-49-18 href=#__codelineno-49-18></a>
</span><span id=__span-49-19><a id=__codelineno-49-19 name=__codelineno-49-19 href=#__codelineno-49-19></a><span class=c1>## Follow logs from now with timestamps (real-time monitoring)</span>
</span><span id=__span-49-20><a id=__codelineno-49-20 name=__codelineno-49-20 href=#__codelineno-49-20></a>crictl<span class=w> </span>logs<span class=w> </span>--follow<span class=w> </span>--timestamps<span class=w> </span>--tail<span class=w> </span><span class=m>0</span><span class=w> </span>&lt;container-id&gt;
</span></code></pre></div> </details> <hr> <h4 id=04-execute-a-command-inside-a-running-container>04. Execute a Command Inside a Running Container<a class=headerlink href=#04-execute-a-command-inside-a-running-container title="Permanent link">&para;</a></h4> <p>Use <code>crictl exec</code> to check the environment variables and network configuration of a running container.</p> <h4 id=scenario_3>Scenario:<a class=headerlink href=#scenario_3 title="Permanent link">&para;</a></h4> <p> An application is failing to connect to a database, and you suspect the environment variables are misconfigured.  You need to verify both the environment variables and the network connectivity from inside the container.</p> <p><strong>Hint:</strong> Use <code>crictl exec</code> with commands like <code>env</code>, <code>cat /etc/resolv.conf</code>, and <code>wget</code> or <code>curl</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=c1>## First, identify the running container</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>crictl<span class=w> </span>ps
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=c1>## Check environment variables inside the container</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>env
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a><span class=c1>## Filter for specific environment variables (e.g., database-related)</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>env<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>db
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=c1>## Check DNS configuration</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>cat<span class=w> </span>/etc/resolv.conf
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=c1>## Check the container&#39;s IP address</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>ip<span class=w> </span>addr<span class=w> </span>show<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a><span class=w>  </span>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>cat<span class=w> </span>/etc/hosts
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a>
</span><span id=__span-50-17><a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a><span class=c1>## Test connectivity to a database service</span>
</span><span id=__span-50-18><a id=__codelineno-50-18 name=__codelineno-50-18 href=#__codelineno-50-18></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>wget<span class=w> </span>-qO-<span class=w> </span>--timeout<span class=o>=</span><span class=m>5</span><span class=w> </span>http://db-service:5432<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-19><a id=__codelineno-50-19 name=__codelineno-50-19 href=#__codelineno-50-19></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Connection test completed (non-zero exit may be expected for non-HTTP services)&quot;</span>
</span><span id=__span-50-20><a id=__codelineno-50-20 name=__codelineno-50-20 href=#__codelineno-50-20></a>
</span><span id=__span-50-21><a id=__codelineno-50-21 name=__codelineno-50-21 href=#__codelineno-50-21></a><span class=c1>## Test DNS resolution</span>
</span><span id=__span-50-22><a id=__codelineno-50-22 name=__codelineno-50-22 href=#__codelineno-50-22></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>nslookup<span class=w> </span>db-service.default.svc.cluster.local<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-23><a id=__codelineno-50-23 name=__codelineno-50-23 href=#__codelineno-50-23></a><span class=w>  </span>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>cat<span class=w> </span>/etc/hosts
</span><span id=__span-50-24><a id=__codelineno-50-24 name=__codelineno-50-24 href=#__codelineno-50-24></a>
</span><span id=__span-50-25><a id=__codelineno-50-25 name=__codelineno-50-25 href=#__codelineno-50-25></a><span class=c1>## Check listening ports inside the container</span>
</span><span id=__span-50-26><a id=__codelineno-50-26 name=__codelineno-50-26 href=#__codelineno-50-26></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>netstat<span class=w> </span>-tlnp<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-27><a id=__codelineno-50-27 name=__codelineno-50-27 href=#__codelineno-50-27></a><span class=w>  </span>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>&lt;container-id&gt;<span class=w> </span>ss<span class=w> </span>-tlnp<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-50-28><a id=__codelineno-50-28 name=__codelineno-50-28 href=#__codelineno-50-28></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Neither netstat nor ss available in container&quot;</span>
</span><span id=__span-50-29><a id=__codelineno-50-29 name=__codelineno-50-29 href=#__codelineno-50-29></a>
</span><span id=__span-50-30><a id=__codelineno-50-30 name=__codelineno-50-30 href=#__codelineno-50-30></a><span class=c1>## Open an interactive shell for more thorough investigation</span>
</span><span id=__span-50-31><a id=__codelineno-50-31 name=__codelineno-50-31 href=#__codelineno-50-31></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>&lt;container-id&gt;<span class=w> </span>/bin/sh
</span></code></pre></div> </details> <hr> <h4 id=05-pull-an-image-and-verify-it-is-available>05. Pull an Image and Verify It Is Available<a class=headerlink href=#05-pull-an-image-and-verify-it-is-available title="Permanent link">&para;</a></h4> <p>Pull the <code>alpine:3.19</code> image using <code>crictl</code> and verify it is available in the local container runtime image store.</p> <h4 id=scenario_4>Scenario:<a class=headerlink href=#scenario_4 title="Permanent link">&para;</a></h4> <p> You need to pre-pull images on a node before deploying pods to reduce startup time.  You want to verify that a specific image version is available on the node.</p> <p><strong>Hint:</strong> Use <code>crictl pull</code> to download the image and <code>crictl images</code> to verify it is present.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=c1>## Check if the image is already available</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>crictl<span class=w> </span>images<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>alpine
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=c1>## Pull the specific image</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a>crictl<span class=w> </span>pull<span class=w> </span>alpine:3.19
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a>
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=c1>## Verify the image was pulled successfully</span>
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>crictl<span class=w> </span>images<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>alpine
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a>
</span><span id=__span-51-10><a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a><span class=c1>## Get detailed information about the pulled image</span>
</span><span id=__span-51-11><a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a>crictl<span class=w> </span>inspecti<span class=w> </span>alpine:3.19<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-51-12><a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a><span class=s1>  size: .info.size,</span>
</span><span id=__span-51-13><a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a><span class=s1>  entrypoint: .info.imageSpec.config.Entrypoint,</span>
</span><span id=__span-51-14><a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a><span class=s1>  cmd: .info.imageSpec.config.Cmd,</span>
</span><span id=__span-51-15><a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a><span class=s1>  env: .info.imageSpec.config.Env</span>
</span><span id=__span-51-16><a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a><span class=s1>}&#39;</span>
</span><span id=__span-51-17><a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a>
</span><span id=__span-51-18><a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a><span class=c1>## Verify by pulling with the full registry path</span>
</span><span id=__span-51-19><a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a>crictl<span class=w> </span>pull<span class=w> </span>docker.io/library/alpine:3.19
</span><span id=__span-51-20><a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a>
</span><span id=__span-51-21><a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a><span class=c1>## List all alpine images with their digests</span>
</span><span id=__span-51-22><a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a>crictl<span class=w> </span>images<span class=w> </span>--digests<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>alpine
</span><span id=__span-51-23><a id=__codelineno-51-23 name=__codelineno-51-23 href=#__codelineno-51-23></a>
</span><span id=__span-51-24><a id=__codelineno-51-24 name=__codelineno-51-24 href=#__codelineno-51-24></a><span class=c1>## Show image filesystem usage to see the impact of the new image</span>
</span><span id=__span-51-25><a id=__codelineno-51-25 name=__codelineno-51-25 href=#__codelineno-51-25></a>crictl<span class=w> </span>imagefsinfo<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.usedBytes&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=06-find-the-container-runtime-version-and-socket-path>06. Find the Container Runtime Version and Socket Path<a class=headerlink href=#06-find-the-container-runtime-version-and-socket-path title="Permanent link">&para;</a></h4> <p>Determine the container runtime version, the CRI socket path, and whether the runtime is healthy.</p> <h4 id=scenario_5>Scenario:<a class=headerlink href=#scenario_5 title="Permanent link">&para;</a></h4> <p> You are troubleshooting node issues and need to verify that the container runtime is functioning correctly.  You need to document the runtime version for compliance and compatibility purposes.</p> <p><strong>Hint:</strong> Use <code>crictl version</code>, <code>crictl info</code>, and check the configuration file at <code>/etc/crictl.yaml</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=c1>## Get the CRI and runtime version</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>crictl<span class=w> </span>version
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=c1>## Sample output:</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=c1>## Version:  0.1.0</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=c1>## RuntimeName:  containerd</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=c1>## RuntimeVersion:  v1.7.11</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a><span class=c1>## RuntimeApiVersion:  v1</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=c1>## Check the configured socket path</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a>cat<span class=w> </span>/etc/crictl.yaml
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a>
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=c1>## Get detailed runtime information</span>
</span><span id=__span-52-14><a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-52-15><a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a><span class=s1>  runtime: .status,</span>
</span><span id=__span-52-16><a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=s1>  cniConfig: .config.cni,</span>
</span><span id=__span-52-17><a id=__codelineno-52-17 name=__codelineno-52-17 href=#__codelineno-52-17></a><span class=s1>  cgroupDriver: .config.containerd.runtimes.runc.options.SystemdCgroup</span>
</span><span id=__span-52-18><a id=__codelineno-52-18 name=__codelineno-52-18 href=#__codelineno-52-18></a><span class=s1>}&#39;</span>
</span><span id=__span-52-19><a id=__codelineno-52-19 name=__codelineno-52-19 href=#__codelineno-52-19></a>
</span><span id=__span-52-20><a id=__codelineno-52-20 name=__codelineno-52-20 href=#__codelineno-52-20></a><span class=c1>## Check the runtime health (conditions)</span>
</span><span id=__span-52-21><a id=__codelineno-52-21 name=__codelineno-52-21 href=#__codelineno-52-21></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.conditions[] | {type, status}&#39;</span>
</span><span id=__span-52-22><a id=__codelineno-52-22 name=__codelineno-52-22 href=#__codelineno-52-22></a>
</span><span id=__span-52-23><a id=__codelineno-52-23 name=__codelineno-52-23 href=#__codelineno-52-23></a><span class=c1>## Verify the socket file exists and check permissions</span>
</span><span id=__span-52-24><a id=__codelineno-52-24 name=__codelineno-52-24 href=#__codelineno-52-24></a>ls<span class=w> </span>-la<span class=w> </span>/run/containerd/containerd.sock
</span><span id=__span-52-25><a id=__codelineno-52-25 name=__codelineno-52-25 href=#__codelineno-52-25></a>
</span><span id=__span-52-26><a id=__codelineno-52-26 name=__codelineno-52-26 href=#__codelineno-52-26></a><span class=c1>## Check the containerd (or CRI-O) service status</span>
</span><span id=__span-52-27><a id=__codelineno-52-27 name=__codelineno-52-27 href=#__codelineno-52-27></a>systemctl<span class=w> </span>status<span class=w> </span>containerd<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span>systemctl<span class=w> </span>status<span class=w> </span>crio<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span><span id=__span-52-28><a id=__codelineno-52-28 name=__codelineno-52-28 href=#__codelineno-52-28></a>
</span><span id=__span-52-29><a id=__codelineno-52-29 name=__codelineno-52-29 href=#__codelineno-52-29></a><span class=c1>## Get the runtime&#39;s build information</span>
</span><span id=__span-52-30><a id=__codelineno-52-30 name=__codelineno-52-30 href=#__codelineno-52-30></a>containerd<span class=w> </span>--version<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span>crio<span class=w> </span>--version<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span></code></pre></div> </details> <hr> <h4 id=07-get-resource-usage-stats-for-all-running-pods>07. Get Resource Usage Stats for All Running Pods<a class=headerlink href=#07-get-resource-usage-stats-for-all-running-pods title="Permanent link">&para;</a></h4> <p>Display the CPU and memory usage for all running pods on this node.</p> <h4 id=scenario_6>Scenario:<a class=headerlink href=#scenario_6 title="Permanent link">&para;</a></h4> <p> You suspect a noisy-neighbor problem where one pod is consuming excessive resources.  You need a quick overview of resource consumption on this specific node.</p> <p><strong>Hint:</strong> Use <code>crictl statsp</code> to get pod-level stats and <code>crictl stats</code> for container-level stats.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=c1>## Show resource usage for all pods</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>crictl<span class=w> </span>statsp
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=c1>## Show resource usage for all containers (more granular)</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a>crictl<span class=w> </span>stats
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=c1>## Get pod stats in JSON format for analysis</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a>crictl<span class=w> </span>statsp<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.stats[] | {</span>
</span><span id=__span-53-9><a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a><span class=s1>  podId: .attributes.id[0:12],</span>
</span><span id=__span-53-10><a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a><span class=s1>  podName: .attributes.labels[&quot;io.kubernetes.pod.name&quot;],</span>
</span><span id=__span-53-11><a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a><span class=s1>  namespace: .attributes.labels[&quot;io.kubernetes.pod.namespace&quot;],</span>
</span><span id=__span-53-12><a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a><span class=s1>  cpu: .cpu.usageCoreNanoSeconds.value,</span>
</span><span id=__span-53-13><a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a><span class=s1>  memory: (.memory.workingSetBytes.value / 1048576)</span>
</span><span id=__span-53-14><a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a><span class=s1>}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-50
</span><span id=__span-53-15><a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a>
</span><span id=__span-53-16><a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a><span class=c1>## Get container stats in JSON format for analysis</span>
</span><span id=__span-53-17><a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.stats[] | {</span>
</span><span id=__span-53-18><a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a><span class=s1>  containerId: .attributes.id[0:12],</span>
</span><span id=__span-53-19><a id=__codelineno-53-19 name=__codelineno-53-19 href=#__codelineno-53-19></a><span class=s1>  containerName: .attributes.labels[&quot;io.kubernetes.container.name&quot;],</span>
</span><span id=__span-53-20><a id=__codelineno-53-20 name=__codelineno-53-20 href=#__codelineno-53-20></a><span class=s1>  cpu: .cpu.usageCoreNanoSeconds.value,</span>
</span><span id=__span-53-21><a id=__codelineno-53-21 name=__codelineno-53-21 href=#__codelineno-53-21></a><span class=s1>  memoryMB: (.memory.workingSetBytes.value / 1048576)</span>
</span><span id=__span-53-22><a id=__codelineno-53-22 name=__codelineno-53-22 href=#__codelineno-53-22></a><span class=s1>}&#39;</span>
</span><span id=__span-53-23><a id=__codelineno-53-23 name=__codelineno-53-23 href=#__codelineno-53-23></a>
</span><span id=__span-53-24><a id=__codelineno-53-24 name=__codelineno-53-24 href=#__codelineno-53-24></a><span class=c1>## Monitor stats in real-time with watch</span>
</span><span id=__span-53-25><a id=__codelineno-53-25 name=__codelineno-53-25 href=#__codelineno-53-25></a>watch<span class=w> </span>-n<span class=w> </span><span class=m>5</span><span class=w> </span>crictl<span class=w> </span>statsp
</span><span id=__span-53-26><a id=__codelineno-53-26 name=__codelineno-53-26 href=#__codelineno-53-26></a>
</span><span id=__span-53-27><a id=__codelineno-53-27 name=__codelineno-53-27 href=#__codelineno-53-27></a><span class=c1>## Sort containers by memory usage (highest first)</span>
</span><span id=__span-53-28><a id=__codelineno-53-28 name=__codelineno-53-28 href=#__codelineno-53-28></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;[.stats[] | {</span>
</span><span id=__span-53-29><a id=__codelineno-53-29 name=__codelineno-53-29 href=#__codelineno-53-29></a><span class=s1>  name: .attributes.labels[&quot;io.kubernetes.container.name&quot;],</span>
</span><span id=__span-53-30><a id=__codelineno-53-30 name=__codelineno-53-30 href=#__codelineno-53-30></a><span class=s1>  memoryMB: (.memory.workingSetBytes.value / 1048576)</span>
</span><span id=__span-53-31><a id=__codelineno-53-31 name=__codelineno-53-31 href=#__codelineno-53-31></a><span class=s1>}] | sort_by(.memoryMB) | reverse&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=08-inspect-a-pods-network-configuration>08. Inspect a Pod&rsquo;s Network Configuration<a class=headerlink href=#08-inspect-a-pods-network-configuration title="Permanent link">&para;</a></h4> <p>Find the IP address, DNS settings, and network namespace of a specific pod using <code>crictl</code>.</p> <h4 id=scenario_7>Scenario:<a class=headerlink href=#scenario_7 title="Permanent link">&para;</a></h4> <p> A pod cannot communicate with other pods, and you need to verify its network configuration.  You need the network namespace path to run low-level debugging tools like <code>tcpdump</code>.</p> <p><strong>Hint:</strong> Use <code>crictl inspectp</code> with jq to extract the network information, and <code>nsenter</code> to inspect the network namespace.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=c1>## First, identify the pod sandbox</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a>crictl<span class=w> </span>pods<span class=w> </span>--name<span class=w> </span>&lt;pod-name&gt;
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=c1>## Note the POD ID from the output</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=c1>## Get the pod&#39;s IP address</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>crictl<span class=w> </span>inspectp<span class=w> </span>&lt;pod-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.network&#39;</span>
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>
</span><span id=__span-54-9><a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a><span class=c1>## Expected output:</span>
</span><span id=__span-54-10><a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a><span class=c1>## { &quot;additionalIps&quot;: [], &quot;ip&quot;: &quot;10.244.0.15&quot; }</span>
</span><span id=__span-54-11><a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a>
</span><span id=__span-54-12><a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a><span class=c1>## Get the pod&#39;s full network namespace information</span>
</span><span id=__span-54-13><a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a>crictl<span class=w> </span>inspectp<span class=w> </span>&lt;pod-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.namespaces[] | select(.type==&quot;network&quot;)&#39;</span>
</span><span id=__span-54-14><a id=__codelineno-54-14 name=__codelineno-54-14 href=#__codelineno-54-14></a>
</span><span id=__span-54-15><a id=__codelineno-54-15 name=__codelineno-54-15 href=#__codelineno-54-15></a><span class=c1>## Get the network namespace path</span>
</span><span id=__span-54-16><a id=__codelineno-54-16 name=__codelineno-54-16 href=#__codelineno-54-16></a><span class=nv>NETNS</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspectp<span class=w> </span>&lt;pod-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.namespaces[] | select(.type==&quot;network&quot;) | .path&#39;</span><span class=k>)</span>
</span><span id=__span-54-17><a id=__codelineno-54-17 name=__codelineno-54-17 href=#__codelineno-54-17></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Network namespace: </span><span class=nv>$NETNS</span><span class=s2>&quot;</span>
</span><span id=__span-54-18><a id=__codelineno-54-18 name=__codelineno-54-18 href=#__codelineno-54-18></a>
</span><span id=__span-54-19><a id=__codelineno-54-19 name=__codelineno-54-19 href=#__codelineno-54-19></a><span class=c1>## Enter the pod&#39;s network namespace and inspect network interfaces</span>
</span><span id=__span-54-20><a id=__codelineno-54-20 name=__codelineno-54-20 href=#__codelineno-54-20></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>ip<span class=w> </span>addr<span class=w> </span>show
</span><span id=__span-54-21><a id=__codelineno-54-21 name=__codelineno-54-21 href=#__codelineno-54-21></a>
</span><span id=__span-54-22><a id=__codelineno-54-22 name=__codelineno-54-22 href=#__codelineno-54-22></a><span class=c1>## Check routes in the pod&#39;s network namespace</span>
</span><span id=__span-54-23><a id=__codelineno-54-23 name=__codelineno-54-23 href=#__codelineno-54-23></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>ip<span class=w> </span>route<span class=w> </span>show
</span><span id=__span-54-24><a id=__codelineno-54-24 name=__codelineno-54-24 href=#__codelineno-54-24></a>
</span><span id=__span-54-25><a id=__codelineno-54-25 name=__codelineno-54-25 href=#__codelineno-54-25></a><span class=c1>## Check DNS resolution from the pod&#39;s perspective</span>
</span><span id=__span-54-26><a id=__codelineno-54-26 name=__codelineno-54-26 href=#__codelineno-54-26></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>cat<span class=w> </span>/etc/resolv.conf
</span><span id=__span-54-27><a id=__codelineno-54-27 name=__codelineno-54-27 href=#__codelineno-54-27></a>
</span><span id=__span-54-28><a id=__codelineno-54-28 name=__codelineno-54-28 href=#__codelineno-54-28></a><span class=c1>## Run tcpdump in the pod&#39;s network namespace (for packet capture)</span>
</span><span id=__span-54-29><a id=__codelineno-54-29 name=__codelineno-54-29 href=#__codelineno-54-29></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>tcpdump<span class=w> </span>-i<span class=w> </span>eth0<span class=w> </span>-c<span class=w> </span><span class=m>10</span>
</span><span id=__span-54-30><a id=__codelineno-54-30 name=__codelineno-54-30 href=#__codelineno-54-30></a>
</span><span id=__span-54-31><a id=__codelineno-54-31 name=__codelineno-54-31 href=#__codelineno-54-31></a><span class=c1>## Check iptables rules in the pod&#39;s namespace</span>
</span><span id=__span-54-32><a id=__codelineno-54-32 name=__codelineno-54-32 href=#__codelineno-54-32></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>iptables<span class=w> </span>-L<span class=w> </span>-n<span class=w> </span>-v
</span><span id=__span-54-33><a id=__codelineno-54-33 name=__codelineno-54-33 href=#__codelineno-54-33></a>
</span><span id=__span-54-34><a id=__codelineno-54-34 name=__codelineno-54-34 href=#__codelineno-54-34></a><span class=c1>## Test connectivity from the pod&#39;s namespace</span>
</span><span id=__span-54-35><a id=__codelineno-54-35 name=__codelineno-54-35 href=#__codelineno-54-35></a>sudo<span class=w> </span>nsenter<span class=w> </span>--net<span class=o>=</span><span class=nv>$NETNS</span><span class=w> </span>ping<span class=w> </span>-c<span class=w> </span><span class=m>3</span><span class=w> </span>&lt;target-ip&gt;
</span></code></pre></div> </details> <hr> <h4 id=09-find-which-container-is-using-the-most-memory>09. Find Which Container Is Using the Most Memory<a class=headerlink href=#09-find-which-container-is-using-the-most-memory title="Permanent link">&para;</a></h4> <p>Identify the container on this node that is consuming the most memory.</p> <h4 id=scenario_8>Scenario:<a class=headerlink href=#scenario_8 title="Permanent link">&para;</a></h4> <p> The node is under memory pressure and pods are being evicted.  You need to quickly identify the biggest memory consumer to take corrective action.</p> <p><strong>Hint:</strong> Use <code>crictl stats</code> with JSON output and jq to sort by memory usage.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=c1>## Get stats in JSON and sort by memory (highest first)</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;[.stats[] | {</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=s1>  id: .attributes.id[0:12],</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=s1>  name: .attributes.labels[&quot;io.kubernetes.container.name&quot;],</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a><span class=s1>  pod: .attributes.labels[&quot;io.kubernetes.pod.name&quot;],</span>
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a><span class=s1>  namespace: .attributes.labels[&quot;io.kubernetes.pod.namespace&quot;],</span>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=s1>  memoryMB: ((.memory.workingSetBytes.value // 0) / 1048576 | floor)</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a><span class=s1>}] | sort_by(.memoryMB) | reverse | .[0:10]&#39;</span>
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>
</span><span id=__span-55-10><a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a><span class=c1>## Quick one-liner to find the top memory consumer</span>
</span><span id=__span-55-11><a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>crictl<span class=w> </span>stats<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;[.stats[] | {</span>
</span><span id=__span-55-12><a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a><span class=s1>  name: .attributes.labels[&quot;io.kubernetes.container.name&quot;],</span>
</span><span id=__span-55-13><a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a><span class=s1>  memoryMB: ((.memory.workingSetBytes.value // 0) / 1048576 | floor)</span>
</span><span id=__span-55-14><a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a><span class=s1>}] | sort_by(.memoryMB) | reverse | .[0]&#39;</span>
</span><span id=__span-55-15><a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>
</span><span id=__span-55-16><a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a><span class=c1>## After identifying the container, inspect its memory limits</span>
</span><span id=__span-55-17><a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>crictl<span class=w> </span>inspect<span class=w> </span>&lt;container-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources.memory&#39;</span>
</span><span id=__span-55-18><a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a>
</span><span id=__span-55-19><a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a><span class=c1>## Check if the container has an OOMKilled history</span>
</span><span id=__span-55-20><a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a><span class=c1>## Look for exited containers with exit code 137</span>
</span><span id=__span-55-21><a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.containers[] | select(.metadata.name == &quot;&lt;container-name&gt;&quot;)&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20
</span><span id=__span-55-22><a id=__codelineno-55-22 name=__codelineno-55-22 href=#__codelineno-55-22></a>
</span><span id=__span-55-23><a id=__codelineno-55-23 name=__codelineno-55-23 href=#__codelineno-55-23></a><span class=c1>## Get the PID of the top consumer and check its memory map on the host</span>
</span><span id=__span-55-24><a id=__codelineno-55-24 name=__codelineno-55-24 href=#__codelineno-55-24></a><span class=nv>PID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspect<span class=w> </span>&lt;container-id&gt;<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.pid&#39;</span><span class=k>)</span>
</span><span id=__span-55-25><a id=__codelineno-55-25 name=__codelineno-55-25 href=#__codelineno-55-25></a>cat<span class=w> </span>/proc/<span class=nv>$PID</span>/status<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>vmrss
</span></code></pre></div> </details> <hr> <h4 id=10-debug-a-crashloopbackoff-pod-using-crictl>10. Debug a CrashLoopBackOff Pod Using crictl<a class=headerlink href=#10-debug-a-crashloopbackoff-pod-using-crictl title="Permanent link">&para;</a></h4> <p>A pod is in <code>CrashLoopBackOff</code>. Use <code>crictl</code> to investigate the root cause by examining container exit codes and logs.</p> <h4 id=scenario_9>Scenario:<a class=headerlink href=#scenario_9 title="Permanent link">&para;</a></h4> <p> <code>kubectl describe pod</code> shows the pod is in <code>CrashLoopBackOff</code>, but the events do not give enough detail.  You need to inspect the actual container exit codes and logs from previous crash instances to understand the failure.</p> <p><strong>Hint:</strong> Use <code>crictl ps -a</code> to find all container instances (including exited ones), then use <code>crictl inspect</code> for exit codes and <code>crictl logs</code> for the crash output.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=c1>## Step 1: Find the pod sandbox for the crashing pod</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>crictl<span class=w> </span>pods<span class=w> </span>--name<span class=w> </span>&lt;pod-name&gt;
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=c1>## Note the POD ID</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=c1>## Step 2: List ALL containers for this pod (including exited ones)</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--pod<span class=w> </span>&lt;pod-id&gt;
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=c1>## You should see multiple instances with increasing ATTEMPT numbers:</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=c1>## CONTAINER      IMAGE     CREATED        STATE    NAME     ATTEMPT  POD ID</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a><span class=c1>## aaa111bbb222   myapp     30s ago        Running  myapp    5        pod-id...</span>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=c1>## ccc333ddd444   myapp     2m ago         Exited   myapp    4        pod-id...</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a><span class=c1>## eee555fff666   myapp     4m ago         Exited   myapp    3        pod-id...</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=c1>## Step 3: Inspect an exited container to find the exit code</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a>crictl<span class=w> </span>inspect<span class=w> </span>ccc333ddd444<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a><span class=s1>  name: .status.metadata.name,</span>
</span><span id=__span-56-17><a id=__codelineno-56-17 name=__codelineno-56-17 href=#__codelineno-56-17></a><span class=s1>  state: .status.state,</span>
</span><span id=__span-56-18><a id=__codelineno-56-18 name=__codelineno-56-18 href=#__codelineno-56-18></a><span class=s1>  exitCode: .status.exitCode,</span>
</span><span id=__span-56-19><a id=__codelineno-56-19 name=__codelineno-56-19 href=#__codelineno-56-19></a><span class=s1>  reason: .status.reason,</span>
</span><span id=__span-56-20><a id=__codelineno-56-20 name=__codelineno-56-20 href=#__codelineno-56-20></a><span class=s1>  message: .status.message,</span>
</span><span id=__span-56-21><a id=__codelineno-56-21 name=__codelineno-56-21 href=#__codelineno-56-21></a><span class=s1>  startedAt: .status.startedAt,</span>
</span><span id=__span-56-22><a id=__codelineno-56-22 name=__codelineno-56-22 href=#__codelineno-56-22></a><span class=s1>  finishedAt: .status.finishedAt</span>
</span><span id=__span-56-23><a id=__codelineno-56-23 name=__codelineno-56-23 href=#__codelineno-56-23></a><span class=s1>}&#39;</span>
</span><span id=__span-56-24><a id=__codelineno-56-24 name=__codelineno-56-24 href=#__codelineno-56-24></a>
</span><span id=__span-56-25><a id=__codelineno-56-25 name=__codelineno-56-25 href=#__codelineno-56-25></a><span class=c1>## Step 4: View the logs from the exited (crashed) container</span>
</span><span id=__span-56-26><a id=__codelineno-56-26 name=__codelineno-56-26 href=#__codelineno-56-26></a>crictl<span class=w> </span>logs<span class=w> </span>ccc333ddd444
</span><span id=__span-56-27><a id=__codelineno-56-27 name=__codelineno-56-27 href=#__codelineno-56-27></a>
</span><span id=__span-56-28><a id=__codelineno-56-28 name=__codelineno-56-28 href=#__codelineno-56-28></a><span class=c1>## Step 5: View logs from the oldest crash instance for comparison</span>
</span><span id=__span-56-29><a id=__codelineno-56-29 name=__codelineno-56-29 href=#__codelineno-56-29></a>crictl<span class=w> </span>logs<span class=w> </span>eee555fff666
</span><span id=__span-56-30><a id=__codelineno-56-30 name=__codelineno-56-30 href=#__codelineno-56-30></a>
</span><span id=__span-56-31><a id=__codelineno-56-31 name=__codelineno-56-31 href=#__codelineno-56-31></a><span class=c1>## Step 6: Check if it is an OOMKill (exit code 137)</span>
</span><span id=__span-56-32><a id=__codelineno-56-32 name=__codelineno-56-32 href=#__codelineno-56-32></a><span class=nv>EXIT_CODE</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>inspect<span class=w> </span>ccc333ddd444<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.exitCode&#39;</span><span class=k>)</span>
</span><span id=__span-56-33><a id=__codelineno-56-33 name=__codelineno-56-33 href=#__codelineno-56-33></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$EXIT_CODE</span><span class=s2>&quot;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;137&quot;</span><span class=w> </span><span class=o>]</span><span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-56-34><a id=__codelineno-56-34 name=__codelineno-56-34 href=#__codelineno-56-34></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Container was OOMKilled!&quot;</span>
</span><span id=__span-56-35><a id=__codelineno-56-35 name=__codelineno-56-35 href=#__codelineno-56-35></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Check memory limits:&quot;</span>
</span><span id=__span-56-36><a id=__codelineno-56-36 name=__codelineno-56-36 href=#__codelineno-56-36></a><span class=w>  </span>crictl<span class=w> </span>inspect<span class=w> </span>ccc333ddd444<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.linux.resources.memory&#39;</span>
</span><span id=__span-56-37><a id=__codelineno-56-37 name=__codelineno-56-37 href=#__codelineno-56-37></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Check current memory usage of the running instance:&quot;</span>
</span><span id=__span-56-38><a id=__codelineno-56-38 name=__codelineno-56-38 href=#__codelineno-56-38></a><span class=w>  </span><span class=nv>RUNNING_CID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>ps<span class=w> </span>--pod<span class=w> </span>&lt;pod-id&gt;<span class=w> </span>-q<span class=k>)</span>
</span><span id=__span-56-39><a id=__codelineno-56-39 name=__codelineno-56-39 href=#__codelineno-56-39></a><span class=w>  </span>crictl<span class=w> </span>stats<span class=w> </span>--id<span class=w> </span><span class=nv>$RUNNING_CID</span>
</span><span id=__span-56-40><a id=__codelineno-56-40 name=__codelineno-56-40 href=#__codelineno-56-40></a><span class=k>fi</span>
</span><span id=__span-56-41><a id=__codelineno-56-41 name=__codelineno-56-41 href=#__codelineno-56-41></a>
</span><span id=__span-56-42><a id=__codelineno-56-42 name=__codelineno-56-42 href=#__codelineno-56-42></a><span class=c1>## Step 7: Check if it is a command-not-found issue (exit code 127)</span>
</span><span id=__span-56-43><a id=__codelineno-56-43 name=__codelineno-56-43 href=#__codelineno-56-43></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$EXIT_CODE</span><span class=s2>&quot;</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=s2>&quot;127&quot;</span><span class=w> </span><span class=o>]</span><span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-56-44><a id=__codelineno-56-44 name=__codelineno-56-44 href=#__codelineno-56-44></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Command not found inside container!&quot;</span>
</span><span id=__span-56-45><a id=__codelineno-56-45 name=__codelineno-56-45 href=#__codelineno-56-45></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Check the entrypoint/command:&quot;</span>
</span><span id=__span-56-46><a id=__codelineno-56-46 name=__codelineno-56-46 href=#__codelineno-56-46></a><span class=w>  </span>crictl<span class=w> </span>inspect<span class=w> </span>ccc333ddd444<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.process.args&#39;</span>
</span><span id=__span-56-47><a id=__codelineno-56-47 name=__codelineno-56-47 href=#__codelineno-56-47></a><span class=k>fi</span>
</span><span id=__span-56-48><a id=__codelineno-56-48 name=__codelineno-56-48 href=#__codelineno-56-48></a>
</span><span id=__span-56-49><a id=__codelineno-56-49 name=__codelineno-56-49 href=#__codelineno-56-49></a><span class=c1>## Step 8: If it is a configuration issue, check env vars</span>
</span><span id=__span-56-50><a id=__codelineno-56-50 name=__codelineno-56-50 href=#__codelineno-56-50></a>crictl<span class=w> </span>inspect<span class=w> </span>ccc333ddd444<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.info.runtimeSpec.process.env&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=11-clean-up-unused-images-to-free-disk-space>11. Clean Up Unused Images to Free Disk Space<a class=headerlink href=#11-clean-up-unused-images-to-free-disk-space title="Permanent link">&para;</a></h4> <p>Remove all container images that are not currently referenced by any container on the node.</p> <h4 id=scenario_10>Scenario:<a class=headerlink href=#scenario_10 title="Permanent link">&para;</a></h4> <p> The node&rsquo;s disk is running low because old images from previous deployments are still cached.  You need to safely clean up unused images without affecting running workloads.</p> <p><strong>Hint:</strong> Use <code>crictl rmi --prune</code> to remove images not referenced by any container. Use <code>crictl imagefsinfo</code> to check disk usage before and after.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=c1>## Step 1: Check current disk usage by images</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a>crictl<span class=w> </span>imagefsinfo<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=s1>  usedBytes: .status.usedBytes.value,</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=s1>  usedMB: (.status.usedBytes.value / 1048576 | floor),</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=s1>  totalBytes: .status.fsId</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=s1>}&#39;</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=c1>## Step 2: List all images to see what is on the node</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>crictl<span class=w> </span>images
</span><span id=__span-57-10><a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a>
</span><span id=__span-57-11><a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a><span class=c1>## Step 3: Count total images</span>
</span><span id=__span-57-12><a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Total images: </span><span class=k>$(</span>crictl<span class=w> </span>images<span class=w> </span>-q<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l<span class=k>)</span><span class=s2>&quot;</span>
</span><span id=__span-57-13><a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>
</span><span id=__span-57-14><a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a><span class=c1>## Step 4: Count running containers (to understand which images are in use)</span>
</span><span id=__span-57-15><a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Running containers: </span><span class=k>$(</span>crictl<span class=w> </span>ps<span class=w> </span>-q<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l<span class=k>)</span><span class=s2>&quot;</span>
</span><span id=__span-57-16><a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a>
</span><span id=__span-57-17><a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a><span class=c1>## Step 5: Prune unused images (safe - only removes unreferenced images)</span>
</span><span id=__span-57-18><a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a>crictl<span class=w> </span>rmi<span class=w> </span>--prune
</span><span id=__span-57-19><a id=__codelineno-57-19 name=__codelineno-57-19 href=#__codelineno-57-19></a>
</span><span id=__span-57-20><a id=__codelineno-57-20 name=__codelineno-57-20 href=#__codelineno-57-20></a><span class=c1>## Step 6: Verify the cleanup</span>
</span><span id=__span-57-21><a id=__codelineno-57-21 name=__codelineno-57-21 href=#__codelineno-57-21></a>crictl<span class=w> </span>images
</span><span id=__span-57-22><a id=__codelineno-57-22 name=__codelineno-57-22 href=#__codelineno-57-22></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Remaining images: </span><span class=k>$(</span>crictl<span class=w> </span>images<span class=w> </span>-q<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l<span class=k>)</span><span class=s2>&quot;</span>
</span><span id=__span-57-23><a id=__codelineno-57-23 name=__codelineno-57-23 href=#__codelineno-57-23></a>
</span><span id=__span-57-24><a id=__codelineno-57-24 name=__codelineno-57-24 href=#__codelineno-57-24></a><span class=c1>## Step 7: Check disk usage after cleanup</span>
</span><span id=__span-57-25><a id=__codelineno-57-25 name=__codelineno-57-25 href=#__codelineno-57-25></a>crictl<span class=w> </span>imagefsinfo<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-57-26><a id=__codelineno-57-26 name=__codelineno-57-26 href=#__codelineno-57-26></a><span class=s1>  usedBytes: .status.usedBytes.value,</span>
</span><span id=__span-57-27><a id=__codelineno-57-27 name=__codelineno-57-27 href=#__codelineno-57-27></a><span class=s1>  usedMB: (.status.usedBytes.value / 1048576 | floor)</span>
</span><span id=__span-57-28><a id=__codelineno-57-28 name=__codelineno-57-28 href=#__codelineno-57-28></a><span class=s1>}&#39;</span>
</span><span id=__span-57-29><a id=__codelineno-57-29 name=__codelineno-57-29 href=#__codelineno-57-29></a>
</span><span id=__span-57-30><a id=__codelineno-57-30 name=__codelineno-57-30 href=#__codelineno-57-30></a><span class=c1>## Note: If you need to remove a specific old image</span>
</span><span id=__span-57-31><a id=__codelineno-57-31 name=__codelineno-57-31 href=#__codelineno-57-31></a>crictl<span class=w> </span>rmi<span class=w> </span>&lt;image-name&gt;:&lt;tag&gt;
</span><span id=__span-57-32><a id=__codelineno-57-32 name=__codelineno-57-32 href=#__codelineno-57-32></a>
</span><span id=__span-57-33><a id=__codelineno-57-33 name=__codelineno-57-33 href=#__codelineno-57-33></a><span class=c1>## To see which images are in use by running containers:</span>
</span><span id=__span-57-34><a id=__codelineno-57-34 name=__codelineno-57-34 href=#__codelineno-57-34></a><span class=k>for</span><span class=w> </span>CID<span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>$(</span>crictl<span class=w> </span>ps<span class=w> </span>-q<span class=k>)</span><span class=p>;</span><span class=w> </span><span class=k>do</span>
</span><span id=__span-57-35><a id=__codelineno-57-35 name=__codelineno-57-35 href=#__codelineno-57-35></a><span class=w>  </span>crictl<span class=w> </span>inspect<span class=w> </span><span class=nv>$CID</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>-r<span class=w> </span><span class=s1>&#39;.status.image.image&#39;</span>
</span><span id=__span-57-36><a id=__codelineno-57-36 name=__codelineno-57-36 href=#__codelineno-57-36></a><span class=k>done</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span></code></pre></div> </details> <hr> <h4 id=12-create-a-pod-sandbox-and-container-manually-with-crictl-advanced>12. Create a Pod Sandbox and Container Manually with crictl (Advanced)<a class=headerlink href=#12-create-a-pod-sandbox-and-container-manually-with-crictl-advanced title="Permanent link">&para;</a></h4> <p>Create a pod sandbox and run a container inside it manually using <code>crictl</code>. This simulates what the kubelet does when it creates a pod.</p> <h4 id=scenario_11>Scenario:<a class=headerlink href=#scenario_11 title="Permanent link">&para;</a></h4> <p> You want to understand the pod lifecycle at the runtime level.  You need to test whether the container runtime can create and run containers independently of the kubelet (to isolate issues).</p> <p><strong>Hint:</strong> Create JSON config files for the pod sandbox and container, then use <code>crictl runp</code>, <code>crictl create</code>, and <code>crictl start</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=c1>## Step 1: Create the pod sandbox configuration</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a>cat<span class=w> </span><span class=s>&lt;&lt;EOF &gt; /tmp/test-sandbox.json</span>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=s>{</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a><span class=s>  &quot;metadata&quot;: {</span>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=s>    &quot;name&quot;: &quot;test-pod&quot;,</span>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=s>    &quot;namespace&quot;: &quot;default&quot;,</span>
</span><span id=__span-58-7><a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=s>    &quot;attempt&quot;: 1,</span>
</span><span id=__span-58-8><a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a><span class=s>    &quot;uid&quot;: &quot;test-pod-uid-$(date +%s)&quot;</span>
</span><span id=__span-58-9><a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a><span class=s>  },</span>
</span><span id=__span-58-10><a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a><span class=s>  &quot;log_directory&quot;: &quot;/tmp/test-pod-logs&quot;,</span>
</span><span id=__span-58-11><a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=s>  &quot;linux&quot;: {}</span>
</span><span id=__span-58-12><a id=__codelineno-58-12 name=__codelineno-58-12 href=#__codelineno-58-12></a><span class=s>}</span>
</span><span id=__span-58-13><a id=__codelineno-58-13 name=__codelineno-58-13 href=#__codelineno-58-13></a><span class=s>EOF</span>
</span><span id=__span-58-14><a id=__codelineno-58-14 name=__codelineno-58-14 href=#__codelineno-58-14></a>
</span><span id=__span-58-15><a id=__codelineno-58-15 name=__codelineno-58-15 href=#__codelineno-58-15></a><span class=c1>## Create the log directory</span>
</span><span id=__span-58-16><a id=__codelineno-58-16 name=__codelineno-58-16 href=#__codelineno-58-16></a>mkdir<span class=w> </span>-p<span class=w> </span>/tmp/test-pod-logs
</span><span id=__span-58-17><a id=__codelineno-58-17 name=__codelineno-58-17 href=#__codelineno-58-17></a>
</span><span id=__span-58-18><a id=__codelineno-58-18 name=__codelineno-58-18 href=#__codelineno-58-18></a><span class=c1>## Step 2: Create the pod sandbox</span>
</span><span id=__span-58-19><a id=__codelineno-58-19 name=__codelineno-58-19 href=#__codelineno-58-19></a><span class=nv>SANDBOX_ID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>runp<span class=w> </span>/tmp/test-sandbox.json<span class=k>)</span>
</span><span id=__span-58-20><a id=__codelineno-58-20 name=__codelineno-58-20 href=#__codelineno-58-20></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Sandbox ID: </span><span class=nv>$SANDBOX_ID</span><span class=s2>&quot;</span>
</span><span id=__span-58-21><a id=__codelineno-58-21 name=__codelineno-58-21 href=#__codelineno-58-21></a>
</span><span id=__span-58-22><a id=__codelineno-58-22 name=__codelineno-58-22 href=#__codelineno-58-22></a><span class=c1>## Step 3: Verify the sandbox is running</span>
</span><span id=__span-58-23><a id=__codelineno-58-23 name=__codelineno-58-23 href=#__codelineno-58-23></a>crictl<span class=w> </span>pods<span class=w> </span>--id<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-58-24><a id=__codelineno-58-24 name=__codelineno-58-24 href=#__codelineno-58-24></a>
</span><span id=__span-58-25><a id=__codelineno-58-25 name=__codelineno-58-25 href=#__codelineno-58-25></a><span class=c1>## Step 4: Create the container configuration</span>
</span><span id=__span-58-26><a id=__codelineno-58-26 name=__codelineno-58-26 href=#__codelineno-58-26></a>cat<span class=w> </span><span class=s>&lt;&lt;EOF &gt; /tmp/test-container.json</span>
</span><span id=__span-58-27><a id=__codelineno-58-27 name=__codelineno-58-27 href=#__codelineno-58-27></a><span class=s>{</span>
</span><span id=__span-58-28><a id=__codelineno-58-28 name=__codelineno-58-28 href=#__codelineno-58-28></a><span class=s>  &quot;metadata&quot;: {</span>
</span><span id=__span-58-29><a id=__codelineno-58-29 name=__codelineno-58-29 href=#__codelineno-58-29></a><span class=s>    &quot;name&quot;: &quot;test-nginx&quot;</span>
</span><span id=__span-58-30><a id=__codelineno-58-30 name=__codelineno-58-30 href=#__codelineno-58-30></a><span class=s>  },</span>
</span><span id=__span-58-31><a id=__codelineno-58-31 name=__codelineno-58-31 href=#__codelineno-58-31></a><span class=s>  &quot;image&quot;: {</span>
</span><span id=__span-58-32><a id=__codelineno-58-32 name=__codelineno-58-32 href=#__codelineno-58-32></a><span class=s>    &quot;image&quot;: &quot;docker.io/library/nginx:alpine&quot;</span>
</span><span id=__span-58-33><a id=__codelineno-58-33 name=__codelineno-58-33 href=#__codelineno-58-33></a><span class=s>  },</span>
</span><span id=__span-58-34><a id=__codelineno-58-34 name=__codelineno-58-34 href=#__codelineno-58-34></a><span class=s>  &quot;log_path&quot;: &quot;test-nginx.log&quot;,</span>
</span><span id=__span-58-35><a id=__codelineno-58-35 name=__codelineno-58-35 href=#__codelineno-58-35></a><span class=s>  &quot;linux&quot;: {}</span>
</span><span id=__span-58-36><a id=__codelineno-58-36 name=__codelineno-58-36 href=#__codelineno-58-36></a><span class=s>}</span>
</span><span id=__span-58-37><a id=__codelineno-58-37 name=__codelineno-58-37 href=#__codelineno-58-37></a><span class=s>EOF</span>
</span><span id=__span-58-38><a id=__codelineno-58-38 name=__codelineno-58-38 href=#__codelineno-58-38></a>
</span><span id=__span-58-39><a id=__codelineno-58-39 name=__codelineno-58-39 href=#__codelineno-58-39></a><span class=c1>## Step 5: Pull the image if not already available</span>
</span><span id=__span-58-40><a id=__codelineno-58-40 name=__codelineno-58-40 href=#__codelineno-58-40></a>crictl<span class=w> </span>pull<span class=w> </span>nginx:alpine
</span><span id=__span-58-41><a id=__codelineno-58-41 name=__codelineno-58-41 href=#__codelineno-58-41></a>
</span><span id=__span-58-42><a id=__codelineno-58-42 name=__codelineno-58-42 href=#__codelineno-58-42></a><span class=c1>## Step 6: Create the container (returns container ID)</span>
</span><span id=__span-58-43><a id=__codelineno-58-43 name=__codelineno-58-43 href=#__codelineno-58-43></a><span class=nv>CONTAINER_ID</span><span class=o>=</span><span class=k>$(</span>crictl<span class=w> </span>create<span class=w> </span><span class=nv>$SANDBOX_ID</span><span class=w> </span>/tmp/test-container.json<span class=w> </span>/tmp/test-sandbox.json<span class=k>)</span>
</span><span id=__span-58-44><a id=__codelineno-58-44 name=__codelineno-58-44 href=#__codelineno-58-44></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Container ID: </span><span class=nv>$CONTAINER_ID</span><span class=s2>&quot;</span>
</span><span id=__span-58-45><a id=__codelineno-58-45 name=__codelineno-58-45 href=#__codelineno-58-45></a>
</span><span id=__span-58-46><a id=__codelineno-58-46 name=__codelineno-58-46 href=#__codelineno-58-46></a><span class=c1>## Step 7: Start the container</span>
</span><span id=__span-58-47><a id=__codelineno-58-47 name=__codelineno-58-47 href=#__codelineno-58-47></a>crictl<span class=w> </span>start<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-48><a id=__codelineno-58-48 name=__codelineno-58-48 href=#__codelineno-58-48></a>
</span><span id=__span-58-49><a id=__codelineno-58-49 name=__codelineno-58-49 href=#__codelineno-58-49></a><span class=c1>## Step 8: Verify the container is running</span>
</span><span id=__span-58-50><a id=__codelineno-58-50 name=__codelineno-58-50 href=#__codelineno-58-50></a>crictl<span class=w> </span>ps<span class=w> </span>--id<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-51><a id=__codelineno-58-51 name=__codelineno-58-51 href=#__codelineno-58-51></a>
</span><span id=__span-58-52><a id=__codelineno-58-52 name=__codelineno-58-52 href=#__codelineno-58-52></a><span class=c1>## Step 9: Test the container</span>
</span><span id=__span-58-53><a id=__codelineno-58-53 name=__codelineno-58-53 href=#__codelineno-58-53></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span>nginx<span class=w> </span>-v
</span><span id=__span-58-54><a id=__codelineno-58-54 name=__codelineno-58-54 href=#__codelineno-58-54></a>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span>curl<span class=w> </span>-s<span class=w> </span>http://localhost:80<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-58-55><a id=__codelineno-58-55 name=__codelineno-58-55 href=#__codelineno-58-55></a><span class=w>  </span>crictl<span class=w> </span><span class=nb>exec</span><span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span>wget<span class=w> </span>-qO-<span class=w> </span>http://localhost:80
</span><span id=__span-58-56><a id=__codelineno-58-56 name=__codelineno-58-56 href=#__codelineno-58-56></a>
</span><span id=__span-58-57><a id=__codelineno-58-57 name=__codelineno-58-57 href=#__codelineno-58-57></a><span class=c1>## Step 10: View container logs</span>
</span><span id=__span-58-58><a id=__codelineno-58-58 name=__codelineno-58-58 href=#__codelineno-58-58></a>crictl<span class=w> </span>logs<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-59><a id=__codelineno-58-59 name=__codelineno-58-59 href=#__codelineno-58-59></a>
</span><span id=__span-58-60><a id=__codelineno-58-60 name=__codelineno-58-60 href=#__codelineno-58-60></a><span class=c1>## Step 11: Inspect the container</span>
</span><span id=__span-58-61><a id=__codelineno-58-61 name=__codelineno-58-61 href=#__codelineno-58-61></a>crictl<span class=w> </span>inspect<span class=w> </span><span class=nv>$CONTAINER_ID</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-58-62><a id=__codelineno-58-62 name=__codelineno-58-62 href=#__codelineno-58-62></a><span class=s1>  state: .status.state,</span>
</span><span id=__span-58-63><a id=__codelineno-58-63 name=__codelineno-58-63 href=#__codelineno-58-63></a><span class=s1>  image: .status.image.image,</span>
</span><span id=__span-58-64><a id=__codelineno-58-64 name=__codelineno-58-64 href=#__codelineno-58-64></a><span class=s1>  pid: .info.pid,</span>
</span><span id=__span-58-65><a id=__codelineno-58-65 name=__codelineno-58-65 href=#__codelineno-58-65></a><span class=s1>  startedAt: .status.startedAt</span>
</span><span id=__span-58-66><a id=__codelineno-58-66 name=__codelineno-58-66 href=#__codelineno-58-66></a><span class=s1>}&#39;</span>
</span><span id=__span-58-67><a id=__codelineno-58-67 name=__codelineno-58-67 href=#__codelineno-58-67></a>
</span><span id=__span-58-68><a id=__codelineno-58-68 name=__codelineno-58-68 href=#__codelineno-58-68></a><span class=c1>## Step 12: Clean up everything</span>
</span><span id=__span-58-69><a id=__codelineno-58-69 name=__codelineno-58-69 href=#__codelineno-58-69></a>crictl<span class=w> </span>stop<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-70><a id=__codelineno-58-70 name=__codelineno-58-70 href=#__codelineno-58-70></a>crictl<span class=w> </span>rm<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-71><a id=__codelineno-58-71 name=__codelineno-58-71 href=#__codelineno-58-71></a>crictl<span class=w> </span>stopp<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-58-72><a id=__codelineno-58-72 name=__codelineno-58-72 href=#__codelineno-58-72></a>crictl<span class=w> </span>rmp<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-58-73><a id=__codelineno-58-73 name=__codelineno-58-73 href=#__codelineno-58-73></a>
</span><span id=__span-58-74><a id=__codelineno-58-74 name=__codelineno-58-74 href=#__codelineno-58-74></a><span class=c1>## Verify cleanup</span>
</span><span id=__span-58-75><a id=__codelineno-58-75 name=__codelineno-58-75 href=#__codelineno-58-75></a>crictl<span class=w> </span>pods<span class=w> </span>--id<span class=w> </span><span class=nv>$SANDBOX_ID</span>
</span><span id=__span-58-76><a id=__codelineno-58-76 name=__codelineno-58-76 href=#__codelineno-58-76></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--id<span class=w> </span><span class=nv>$CONTAINER_ID</span>
</span><span id=__span-58-77><a id=__codelineno-58-77 name=__codelineno-58-77 href=#__codelineno-58-77></a>
</span><span id=__span-58-78><a id=__codelineno-58-78 name=__codelineno-58-78 href=#__codelineno-58-78></a><span class=c1>## Remove temp files</span>
</span><span id=__span-58-79><a id=__codelineno-58-79 name=__codelineno-58-79 href=#__codelineno-58-79></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/test-sandbox.json<span class=w> </span>/tmp/test-container.json
</span><span id=__span-58-80><a id=__codelineno-58-80 name=__codelineno-58-80 href=#__codelineno-58-80></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/test-pod-logs
</span></code></pre></div> </details> <hr> <h2 id=finalize-cleanup>Finalize &amp; Cleanup<a class=headerlink href=#finalize-cleanup title="Permanent link">&para;</a></h2> <ul> <li>If you created any manual pods or containers during this lab, clean them up:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=c1>## List all manually created sandboxes (ones not managed by kubelet)</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=c1>## These typically have simple names like &quot;debug-sandbox&quot; or &quot;test-pod&quot;</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a>crictl<span class=w> </span>pods
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=c1>## Stop and remove any manual sandboxes</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=c1>## Replace &lt;sandbox-id&gt; with the actual ID</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a>crictl<span class=w> </span>stopp<span class=w> </span>&lt;sandbox-id&gt;
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a>crictl<span class=w> </span>rmp<span class=w> </span>&lt;sandbox-id&gt;
</span><span id=__span-59-9><a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a>
</span><span id=__span-59-10><a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a><span class=c1>## Clean up any stopped containers that you created</span>
</span><span id=__span-59-11><a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a>crictl<span class=w> </span>ps<span class=w> </span>-a<span class=w> </span>--state<span class=w> </span>Exited
</span><span id=__span-59-12><a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a>
</span><span id=__span-59-13><a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a><span class=c1>## Remove stopped containers by ID</span>
</span><span id=__span-59-14><a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a>crictl<span class=w> </span>rm<span class=w> </span>&lt;container-id&gt;
</span></code></pre></div> <ul> <li>If you pulled test images that you no longer need:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=c1>## Remove specific test images</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>crictl<span class=w> </span>rmi<span class=w> </span>busybox:latest
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a>crictl<span class=w> </span>rmi<span class=w> </span>alpine:3.19
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a>crictl<span class=w> </span>rmi<span class=w> </span>nginx:alpine
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a><span class=c1>## Or prune all unused images</span>
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a>crictl<span class=w> </span>rmi<span class=w> </span>--prune
</span></code></pre></div> <ul> <li>If you modified the <code>crictl</code> configuration (e.g., enabled debug mode), restore it:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=c1>## Restore the standard crictl configuration</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>sudo<span class=w> </span>tee<span class=w> </span>/etc/crictl.yaml<span class=w> </span><span class=s>&lt;&lt;EOF</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=s>runtime-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a><span class=s>image-endpoint: unix:///run/containerd/containerd.sock</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=s>timeout: 10</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=s>debug: false</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a><span class=s>EOF</span>
</span></code></pre></div> <ul> <li>Remove any temporary files created during the lab:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=c1>## Clean up temporary config files</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/pod-sandbox-config.json
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/container-config.json
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/test-sandbox.json
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/test-container.json
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/debug-sandbox-logs
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/test-pod-logs
</span></code></pre></div> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <ul> <li><strong>&ldquo;crictl: command not found&rdquo;:</strong></li> </ul> <p>Ensure <code>crictl</code> is installed and in your <code>PATH</code>. Check the installation step or verify the binary location:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=c1>## Check if crictl exists anywhere on the system</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>find<span class=w> </span>/<span class=w> </span>-name<span class=w> </span><span class=s2>&quot;crictl&quot;</span><span class=w> </span>-type<span class=w> </span>f<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=c1>## If found but not in PATH, add it</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=nb>export</span><span class=w> </span><span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/usr/local/bin
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;failed to connect: connection error: &hellip; /run/containerd/containerd.sock: no such file or directory&rdquo;:</strong></li> </ul> <p>The container runtime socket does not exist at the configured path. Check which runtime is installed and update the configuration:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=c1>## Check which sockets exist on the system</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a>ls<span class=w> </span>-la<span class=w> </span>/run/containerd/containerd.sock<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>ls<span class=w> </span>-la<span class=w> </span>/var/run/crio/crio.sock<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a>ls<span class=w> </span>-la<span class=w> </span>/run/cri-dockerd.sock<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a>
</span><span id=__span-64-6><a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=c1>## Check if containerd is running</span>
</span><span id=__span-64-7><a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>systemctl<span class=w> </span>status<span class=w> </span>containerd
</span><span id=__span-64-8><a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a>
</span><span id=__span-64-9><a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a><span class=c1>## Update /etc/crictl.yaml with the correct socket path</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;permission denied&rdquo; when running crictl commands:</strong></li> </ul> <p><code>crictl</code> needs access to the container runtime socket, which typically requires root privileges:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=c1>## Run with sudo</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a>sudo<span class=w> </span>crictl<span class=w> </span>ps
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=c1>## Or check socket permissions</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a>ls<span class=w> </span>-la<span class=w> </span>/run/containerd/containerd.sock
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a><span class=c1>## The socket should be owned by root:root with permissions srw-rw----</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a><span class=c1>## You can add your user to the appropriate group if needed</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;crictl pods&rdquo; returns empty output but pods are running (kubectl shows pods):</strong></li> </ul> <p>This usually means <code>crictl</code> is connected to the wrong runtime socket:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=c1>## Check which runtime the kubelet is using</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>ps<span class=w> </span>aux<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>kubelet<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>container-runtime-endpoint
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=c1>## Verify your crictl configuration matches</span>
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a>cat<span class=w> </span>/etc/crictl.yaml
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>
</span><span id=__span-66-7><a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=c1>## Try specifying the endpoint explicitly</span>
</span><span id=__span-66-8><a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a>crictl<span class=w> </span>--runtime-endpoint<span class=w> </span>unix:///run/containerd/containerd.sock<span class=w> </span>pods
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;context deadline exceeded&rdquo; errors:</strong></li> </ul> <p>The runtime is not responding within the configured timeout. This could indicate the runtime is overloaded or having issues:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=c1>## Increase the timeout in /etc/crictl.yaml</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>sudo<span class=w> </span>sed<span class=w> </span>-i<span class=w> </span><span class=s1>&#39;s/timeout: 10/timeout: 30/&#39;</span><span class=w> </span>/etc/crictl.yaml
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=c1>## Or pass a longer timeout on the command line</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>crictl<span class=w> </span>--timeout<span class=w> </span><span class=m>30</span><span class=w> </span>ps
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=c1>## Check the runtime&#39;s health</span>
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a>systemctl<span class=w> </span>status<span class=w> </span>containerd
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a>journalctl<span class=w> </span>-u<span class=w> </span>containerd<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;5 minutes ago&quot;</span><span class=w> </span>--no-pager
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;jq: command not found&rdquo; when trying to parse JSON output:</strong></li> </ul> <p>Install <code>jq</code> to parse JSON output from <code>crictl</code>:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=c1>## Debian/Ubuntu</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>sudo<span class=w> </span>apt-get<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>jq
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=c1>## RHEL/CentOS/Fedora</span>
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>sudo<span class=w> </span>yum<span class=w> </span>install<span class=w> </span>-y<span class=w> </span>jq
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a><span class=c1>## Alpine</span>
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>sudo<span class=w> </span>apk<span class=w> </span>add<span class=w> </span>jq
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;crictl info&rdquo; shows <code>RuntimeReady: false</code>:</strong></li> </ul> <p>The container runtime is not healthy. Check the runtime service and its logs:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=c1>## Restart the container runtime</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a>sudo<span class=w> </span>systemctl<span class=w> </span>restart<span class=w> </span>containerd
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=c1>## Check the runtime logs for errors</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a>journalctl<span class=w> </span>-u<span class=w> </span>containerd<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;10 minutes ago&quot;</span><span class=w> </span>--no-pager
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a>
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=c1>## Verify the runtime recovers</span>
</span><span id=__span-69-8><a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a>crictl<span class=w> </span>info<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.status.conditions&#39;</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>&ldquo;crictl info&rdquo; shows <code>NetworkReady: false</code>:</strong></li> </ul> <p>The CNI plugin is not functioning correctly. Check the CNI configuration:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=c1>## Check CNI configuration files</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a>ls<span class=w> </span>-la<span class=w> </span>/etc/cni/net.d/
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=c1>## Check CNI binary directory</span>
</span><span id=__span-70-5><a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a>ls<span class=w> </span>-la<span class=w> </span>/opt/cni/bin/
</span><span id=__span-70-6><a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a>
</span><span id=__span-70-7><a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=c1>## Check kubelet logs for CNI errors</span>
</span><span id=__span-70-8><a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a>journalctl<span class=w> </span>-u<span class=w> </span>kubelet<span class=w> </span>--since<span class=w> </span><span class=s2>&quot;10 minutes ago&quot;</span><span class=w> </span>--no-pager<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>cni
</span><span id=__span-70-9><a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a>
</span><span id=__span-70-10><a id=__codelineno-70-10 name=__codelineno-70-10 href=#__codelineno-70-10></a><span class=c1>## Restart the kubelet to re-initialize networking</span>
</span><span id=__span-70-11><a id=__codelineno-70-11 name=__codelineno-70-11 href=#__codelineno-70-11></a>sudo<span class=w> </span>systemctl<span class=w> </span>restart<span class=w> </span>kubelet
</span></code></pre></div> <hr> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <ul> <li>Explore <code>nerdctl</code> for a Docker-compatible CLI experience with <code>containerd</code>: <a href=https://github.com/containerd/nerdctl>nerdctl on GitHub</a>.</li> <li>Learn about <code>ctr</code>, the low-level <code>containerd</code> CLI tool, for even deeper runtime debugging.</li> <li>Study the CRI specification to understand the full gRPC API that <code>crictl</code> uses: <a href=https://github.com/kubernetes/cri-api>CRI API</a>.</li> <li>Practice using <code>nsenter</code> together with <code>crictl</code> for advanced network debugging inside pod sandboxes.</li> <li>Explore the <code>kubectl debug node/&lt;node-name&gt;</code> command as an alternative way to get a shell on a node without SSH.</li> <li>Learn about Kubernetes node-level troubleshooting: <a href=https://kubernetes.io/docs/tasks/debug/debug-cluster/ >Kubernetes Node Debugging Guide</a>.</li> <li>Set up shell completion for <code>crictl</code> to speed up your debugging workflow: <code>crictl completion bash &gt; /etc/bash_completion.d/crictl</code>.</li> <li>Explore the <code>RuntimeClass</code> feature to understand how Kubernetes supports multiple container runtimes on the same node.</li> </ul> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Render date of last update --> <!-- Render date of creation --> <!-- ---------------------------------------------------------------------- --> <!-- Render authors --> <!-- ---------------------------------------------------------------------- --> <!-- Render committers from GitHub --> <!-- Render committers from GitLab --> <!-- Render committers --> <!-- ---------------------------------------------------------------------- --> <!-- Determine date of last update --> <!-- Determine date of creation --> <!-- Source file information --> <aside class=md-source-file> <!-- Date of last update --> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 24, 2026 03:49:07 UTC">February 24, 2026</span> </span> <!-- Authors (git-authors plugin) --> <!-- Authors (git-committers plugin) --> <!-- Fallback: Manual GitHub avatar for repository owner --> <span class=md-source-file__fact> <nav> <a href=https://github.com/nirgeier class=md-author title=@nirgeier> <img src="https://avatars.githubusercontent.com/u/555154?size=256" alt="Nir Geier"> </a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class=logo1></div> <div class=logo2></div> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../30-Keda/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 30 KEDA"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> 30 KEDA </div> </div> </a> <!-- <ul class="social-badges">
          <li><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a></li>
          <li><a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener"><i class="fab fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn profile</span></a></li>
          <li><a href="mailto:nirgeier@gmail.com"><img src="https://img.shields.io/badge/-nirgeier@gmail.com-fcc624?style=flat&logo=Gmail&logoColor=red" alt="Gmail Badge"></a></li>
          <li><a href="mailto:nirg@codewizard.co.il"><img src="https://img.shields.io/badge/-nirg@codewizard.co.il-fcc624?style=flat&logo=microsoftoutlook&logoColor=blue" alt="Outlook Badge"></a></li>
        </ul> --> <!-- Link to next page --> <a href=../36-kubectl-Deep-Dive/ class="md-footer__link md-footer__link--next" aria-label="Next: 36 kubectl Deep Dive"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> 36 kubectl Deep Dive </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> 2021-2026 Nir Geier<br><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target=_blank rel=noopener><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a> </div> </div> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", {"navigation.expand": false}, "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.50899def.min.js></script> <script src=../js/print-site.js></script> <script src="https://buttons.github.io/buttons.js?v=1772199666"></script> <script src=https://unpkg.com/mermaid@11/dist/mermaid.esm.min.mjs type=module></script> </body> </html>