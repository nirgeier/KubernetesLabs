<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A collection of Kubernetes Labs for learning and practicing Kubernetes skills."><meta name=author content="Nir Geier - nirgeier@gmail.com"><link href=https://nirgeier.github.io/KubernetesLabs/36-kubectl-Deep-Dive/ rel=canonical><link href=../34-crictl/ rel=prev><link href=../Tasks/ rel=next><link rel=icon href=../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>36 kubectl Deep Dive - KubernetesLabs</title><link rel=stylesheet href=../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../css/print-site.css><link rel=stylesheet href=../css/print-site-material.css><link rel=stylesheet href="../assets/stylesheets/codewizard.css?v=1772199666"><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#kubectl-deep-dive class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <!-- Link to home --> <a href=.. title=KubernetesLabs class="md-header__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KubernetesLabs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 36 kubectl Deep Dive </span> </div> </div> </div> <div class=m-social__top> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_0> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../welcome/ class=md-tabs__link> Start Here </a> </li> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../05-Services/ class=md-tabs__link> Networking </a> </li> <li class=md-tabs__item> <a href=../31-RBAC/ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../06-DataStore/ class=md-tabs__link> Storage & Config </a> </li> <li class=md-tabs__item> <a href=../14-Logging/ class=md-tabs__link> Observability </a> </li> <li class=md-tabs__item> <a href=../13-HelmChart/ class=md-tabs__link> GitOps & CI/CD </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../11-CRD-Custom-Resource-Definition/ class=md-tabs__link> Advanced </a> </li> <li class=md-tabs__item> <a href=../Tasks/ class=md-tabs__link> Tasks </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=KubernetesLabs class="md-nav__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> KubernetesLabs </label> <div class=md-nav__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../welcome/ class=md-nav__link> <span class=md-ellipsis> Start Here </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=.. class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../05-Services/ class=md-nav__link> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../31-RBAC/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../06-DataStore/ class=md-nav__link> <span class=md-ellipsis> Storage & Config </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../14-Logging/ class=md-nav__link> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../13-HelmChart/ class=md-nav__link> <span class=md-ellipsis> GitOps & CI/CD </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8 checked> <div class="md-nav__link md-nav__container"> <a href=../11-CRD-Custom-Resource-Definition/ class="md-nav__link "> <span class=md-ellipsis> Advanced </span> </a> <label class="md-nav__link " for=__nav_8 id=__nav_8_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=true> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Advanced </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../16-Affinity-Taint-Tolleration/ class=md-nav__link> <span class=md-ellipsis> 16 Affinity Taint Toleration </span> </a> </li> <li class=md-nav__item> <a href=../17-PodDisruptionBudgets-PDB/ class=md-nav__link> <span class=md-ellipsis> 17 PodDisruptionBudgets PDB </span> </a> </li> <li class=md-nav__item> <a href=../19-CustomScheduler/ class=md-nav__link> <span class=md-ellipsis> 19 CustomScheduler </span> </a> </li> <li class=md-nav__item> <a href=../21-KubeAPI/ class=md-nav__link> <span class=md-ellipsis> 21 KubeAPI </span> </a> </li> <li class=md-nav__item> <a href=../24-kubebuilder/ class=md-nav__link> <span class=md-ellipsis> 24 Kubebuilder </span> </a> </li> <li class=md-nav__item> <a href=../25-krew/ class=md-nav__link> <span class=md-ellipsis> 25 Krew </span> </a> </li> <li class=md-nav__item> <a href=../27-kubeadm/ class=md-nav__link> <span class=md-ellipsis> 27 kubeadm </span> </a> </li> <li class=md-nav__item> <a href=../28-Telepresence/ class=md-nav__link> <span class=md-ellipsis> 28 Telepresence </span> </a> </li> <li class=md-nav__item> <a href=../30-Keda/ class=md-nav__link> <span class=md-ellipsis> 30 KEDA </span> </a> </li> <li class=md-nav__item> <a href=../34-crictl/ class=md-nav__link> <span class=md-ellipsis> 34 crictl </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 36 kubectl Deep Dive </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 36 kubectl Deep Dive </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#what-will-we-learn class=md-nav__link> <span class=md-ellipsis> What will we learn? </span> </a> </li> <li class=md-nav__item> <a href=#official-documentation-references class=md-nav__link> <span class=md-ellipsis> Official Documentation &amp; References </span> </a> </li> <li class=md-nav__item> <a href=#introduction class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> <nav class=md-nav aria-label=Introduction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#how-kubectl-works class=md-nav__link> <span class=md-ellipsis> How kubectl Works </span> </a> </li> <li class=md-nav__item> <a href=#kubeconfig-file-structure class=md-nav__link> <span class=md-ellipsis> kubeconfig File Structure </span> </a> </li> <li class=md-nav__item> <a href=#api-resource-model class=md-nav__link> <span class=md-ellipsis> API Resource Model </span> </a> </li> <li class=md-nav__item> <a href=#verbosity-levels class=md-nav__link> <span class=md-ellipsis> Verbosity Levels </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prerequisites class=md-nav__link> <span class=md-ellipsis> Prerequisites </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../Tasks/ class=md-nav__link> <span class=md-ellipsis> Tasks </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=kubectl-deep-dive>kubectl Deep Dive<a class=headerlink href=#kubectl-deep-dive title="Permanent link">&para;</a></h1> <ul> <li>Welcome to the <code>kubectl</code> deep-dive hands-on lab! This is not a beginner tutorial - it is a comprehensive, in-depth exploration of everything <code>kubectl</code> can do.</li> <li>You will master advanced output formatting, JSONPath expressions, resource patching strategies, interactive debugging, RBAC inspection, raw API access, plugin management, and performance optimization techniques.</li> <li>By the end of this lab, <code>kubectl</code> will feel like a natural extension of your hands when working with any Kubernetes cluster.</li> </ul> <hr> <h2 id=what-will-we-learn>What will we learn?<a class=headerlink href=#what-will-we-learn title="Permanent link">&para;</a></h2> <ul> <li>How <code>kubectl</code> communicates with the Kubernetes API server (the full request lifecycle)</li> <li>kubeconfig file structure: clusters, users, contexts, and merging multiple configs</li> <li>The Kubernetes API resource model (Group, Version, Resource)</li> <li>All output formats: JSON, YAML, wide, name, JSONPath, custom-columns, go-template</li> <li>Advanced JSONPath expressions for filtering, sorting, and extracting data</li> <li>Field selectors, label selectors, and advanced <code>get</code> operations</li> <li>Resource inspection with <code>describe</code>, <code>explain</code>, <code>api-resources</code>, and <code>api-versions</code></li> <li>Declarative vs. imperative resource management (<code>apply</code> vs. <code>create</code> vs. <code>replace</code>)</li> <li>Server-side apply, dry-run modes, and <code>kubectl diff</code></li> <li>All three patching strategies: strategic merge, JSON merge, and JSON patch</li> <li>Interactive debugging: <code>exec</code>, <code>cp</code>, <code>port-forward</code>, <code>attach</code>, and <code>debug</code></li> <li>Operational commands: <code>wait</code>, <code>rollout</code>, and <code>autoscale</code></li> <li>RBAC inspection with <code>auth can-i</code>, <code>auth whoami</code>, and <code>auth reconcile</code></li> <li>Extending kubectl with plugins and krew</li> <li>Raw API access via <code>kubectl proxy</code> and token-based requests</li> <li>Performance tips: watch mode, bash completion, aliases, and resource caching</li> </ul> <hr> <h2 id=official-documentation-references>Official Documentation &amp; References<a class=headerlink href=#official-documentation-references title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>Resource</th> <th>Link</th> </tr> </thead> <tbody> <tr> <td>kubectl Official Reference</td> <td><a href=https://kubernetes.io/docs/reference/kubectl/ >kubernetes.io/docs/reference/kubectl</a></td> </tr> <tr> <td>kubectl Cheat Sheet</td> <td><a href=https://kubernetes.io/docs/reference/kubectl/cheatsheet/ >kubernetes.io/docs/reference/kubectl/cheatsheet</a></td> </tr> <tr> <td>kubeconfig Documentation</td> <td><a href=https://kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig/ >kubernetes.io/docs/concepts/configuration/organize-cluster-access-kubeconfig</a></td> </tr> <tr> <td>JSONPath Support</td> <td><a href=https://kubernetes.io/docs/reference/kubectl/jsonpath/ >kubernetes.io/docs/reference/kubectl/jsonpath</a></td> </tr> <tr> <td>kubectl apply Documentation</td> <td><a href=https://kubernetes.io/docs/reference/kubectl/generated/kubectl_apply/ >kubernetes.io/docs/reference/kubectl/generated/kubectl_apply</a></td> </tr> <tr> <td>Server-Side Apply</td> <td><a href=https://kubernetes.io/docs/reference/using-api/server-side-apply/ >kubernetes.io/docs/reference/using-api/server-side-apply</a></td> </tr> <tr> <td>kubectl patch Documentation</td> <td><a href=https://kubernetes.io/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch/ >kubernetes.io/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch</a></td> </tr> <tr> <td>kubectl debug Documentation</td> <td><a href=https://kubernetes.io/docs/tasks/debug/debug-application/debug-running-pod/ >kubernetes.io/docs/tasks/debug/debug-application/debug-running-pod</a></td> </tr> <tr> <td>RBAC Authorization</td> <td><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/ >kubernetes.io/docs/reference/access-authn-authz/rbac</a></td> </tr> <tr> <td>Extending kubectl with Plugins</td> <td><a href=https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/ >kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins</a></td> </tr> <tr> <td>Krew Plugin Manager</td> <td><a href=https://krew.sigs.k8s.io/ >krew.sigs.k8s.io</a></td> </tr> <tr> <td>Kubernetes API Concepts</td> <td><a href=https://kubernetes.io/docs/reference/using-api/ >kubernetes.io/docs/reference/using-api</a></td> </tr> <tr> <td>Managing Resources</td> <td><a href=https://kubernetes.io/docs/concepts/cluster-administration/manage-deployment/ >kubernetes.io/docs/concepts/cluster-administration/manage-deployment</a></td> </tr> </tbody> </table> <hr> <h2 id=introduction>Introduction<a class=headerlink href=#introduction title="Permanent link">&para;</a></h2> <h3 id=how-kubectl-works>How kubectl Works<a class=headerlink href=#how-kubectl-works title="Permanent link">&para;</a></h3> <ul> <li><code>kubectl</code> is the <strong>command-line tool</strong> for interacting with Kubernetes clusters.</li> <li>It does <strong>not</strong> communicate directly with nodes, pods, or containers. Instead, every single <code>kubectl</code> command translates into one or more <strong>HTTP requests</strong> to the Kubernetes API server.</li> <li>The flow is always the same: <code>kubectl</code> reads your <strong>kubeconfig</strong> file to determine which cluster to talk to, authenticates with the API server, sends the request, and displays the response.</li> </ul> <p>The full request lifecycle looks like this:</p> <ol> <li><strong>Read kubeconfig</strong> - <code>kubectl</code> locates the kubeconfig file (default: <code>~/.kube/config</code> or <code>$KUBECONFIG</code>) and reads the current context.</li> <li><strong>Resolve cluster and credentials</strong> - From the current context, <code>kubectl</code> determines the API server URL, the client certificate or token, and the CA bundle.</li> <li><strong>Build HTTP request</strong> - The <code>kubectl</code> command is translated into an HTTP verb (<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>PATCH</code>, <code>DELETE</code>) against a REST endpoint (e.g., <code>/api/v1/namespaces/default/pods</code>).</li> <li><strong>TLS handshake and authentication</strong> - <code>kubectl</code> establishes a TLS connection to the API server and presents its credentials.</li> <li><strong>API server processing</strong> - The API server authenticates the request, checks authorization (RBAC), runs admission controllers, and reads from or writes to <strong>etcd</strong>.</li> <li><strong>Response</strong> - The API server returns a JSON response, which <code>kubectl</code> formats according to your output flags and displays.</li> </ol> <pre class=mermaid><code>flowchart LR
    A["kubectl&lt;br/&gt;(CLI)"] --&gt;|"1. Read config"| B["kubeconfig&lt;br/&gt;(~/.kube/config)"]
    B --&gt;|"2. Cluster + Creds"| A
    A --&gt;|"3. HTTPS REST call"| C["kube-apiserver&lt;br/&gt;(Control Plane)"]
    C --&gt;|"4. AuthN / AuthZ /&lt;br/&gt;Admission"| C
    C --&gt;|"5. Read / Write"| D["etcd&lt;br/&gt;(Data Store)"]
    D --&gt;|"6. Response data"| C
    C --&gt;|"7. JSON response"| A
    A --&gt;|"8. Formatted output"| E["Terminal&lt;br/&gt;(stdout)"]

    style A fill:#326CE5,stroke:#fff,color:#fff
    style B fill:#F5A623,stroke:#fff,color:#fff
    style C fill:#326CE5,stroke:#fff,color:#fff
    style D fill:#4DB33D,stroke:#fff,color:#fff
    style E fill:#666,stroke:#fff,color:#fff</code></pre> <div class="admonition note"> <p class=admonition-title>Every kubectl command is just an API call</p> <p>Understanding this is the single most important insight for mastering <code>kubectl</code>. When you run <code>kubectl get pods</code>, you are sending <code>GET /api/v1/namespaces/default/pods</code> to the API server. When you run <code>kubectl apply -f deployment.yaml</code>, you are sending a <code>PATCH</code> or <code>POST</code> request. This mental model will help you debug every issue you encounter.</p> </div> <hr> <h3 id=kubeconfig-file-structure>kubeconfig File Structure<a class=headerlink href=#kubeconfig-file-structure title="Permanent link">&para;</a></h3> <p>The kubeconfig file is a YAML file with three main sections: <strong>clusters</strong>, <strong>users</strong>, and <strong>contexts</strong>. A context binds a cluster to a user (and optionally a namespace).</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Config</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=c1>## The currently active context</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=nt>current-context</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-context</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1>## Cluster definitions - where to connect</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=nt>clusters</span><span class=p>:</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">production-cluster</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=w>    </span><span class=nt>cluster</span><span class=p>:</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=w>      </span><span class=c1>## The API server URL</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>      </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://k8s-prod.example.com:6443</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>      </span><span class=c1>## CA certificate to verify the API server&#39;s TLS cert</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>      </span><span class=nt>certificate-authority-data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LS0tLS1CRUdJTi...base64...</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">staging-cluster</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=w>    </span><span class=nt>cluster</span><span class=p>:</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=w>      </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://k8s-staging.example.com:6443</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=w>      </span><span class=nt>certificate-authority-data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LS0tLS1CRUdJTi...base64...</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=c1>## User credentials - how to authenticate</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=nt>users</span><span class=p>:</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-0-23><a id=__codelineno-0-23 name=__codelineno-0-23 href=#__codelineno-0-23></a><span class=w>    </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-0-24><a id=__codelineno-0-24 name=__codelineno-0-24 href=#__codelineno-0-24></a><span class=w>      </span><span class=c1>## Client certificate authentication</span>
</span><span id=__span-0-25><a id=__codelineno-0-25 name=__codelineno-0-25 href=#__codelineno-0-25></a><span class=w>      </span><span class=nt>client-certificate-data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LS0tLS1CRUdJTi...base64...</span>
</span><span id=__span-0-26><a id=__codelineno-0-26 name=__codelineno-0-26 href=#__codelineno-0-26></a><span class=w>      </span><span class=nt>client-key-data</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LS0tLS1CRUdJTi...base64...</span>
</span><span id=__span-0-27><a id=__codelineno-0-27 name=__codelineno-0-27 href=#__codelineno-0-27></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dev-user</span>
</span><span id=__span-0-28><a id=__codelineno-0-28 name=__codelineno-0-28 href=#__codelineno-0-28></a><span class=w>    </span><span class=nt>user</span><span class=p>:</span>
</span><span id=__span-0-29><a id=__codelineno-0-29 name=__codelineno-0-29 href=#__codelineno-0-29></a><span class=w>      </span><span class=c1>## Token-based authentication</span>
</span><span id=__span-0-30><a id=__codelineno-0-30 name=__codelineno-0-30 href=#__codelineno-0-30></a><span class=w>      </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">eyJhbGciOiJSUzI1Ni...</span>
</span><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31 href=#__codelineno-0-31></a>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32 href=#__codelineno-0-32></a><span class=c1>## Contexts bind a cluster + user + optional namespace</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33 href=#__codelineno-0-33></a><span class=nt>contexts</span><span class=p>:</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34 href=#__codelineno-0-34></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">my-cluster-context</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35 href=#__codelineno-0-35></a><span class=w>    </span><span class=nt>context</span><span class=p>:</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36 href=#__codelineno-0-36></a><span class=w>      </span><span class=nt>cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">production-cluster</span>
</span><span id=__span-0-37><a id=__codelineno-0-37 name=__codelineno-0-37 href=#__codelineno-0-37></a><span class=w>      </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin-user</span>
</span><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38 href=#__codelineno-0-38></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39 href=#__codelineno-0-39></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">staging-context</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40 href=#__codelineno-0-40></a><span class=w>    </span><span class=nt>context</span><span class=p>:</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41 href=#__codelineno-0-41></a><span class=w>      </span><span class=nt>cluster</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">staging-cluster</span>
</span><span id=__span-0-42><a id=__codelineno-0-42 name=__codelineno-0-42 href=#__codelineno-0-42></a><span class=w>      </span><span class=nt>user</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">dev-user</span>
</span><span id=__span-0-43><a id=__codelineno-0-43 name=__codelineno-0-43 href=#__codelineno-0-43></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">staging</span>
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>kubeconfig supports multiple authentication methods</p> <p>Besides client certificates and tokens, kubeconfig supports: exec-based credential plugins (e.g., <code>aws-iam-authenticator</code>, <code>gke-gcloud-auth-plugin</code>), OIDC tokens, username/password (deprecated), and auth provider plugins.</p> </div> <hr> <h3 id=api-resource-model>API Resource Model<a class=headerlink href=#api-resource-model title="Permanent link">&para;</a></h3> <p>Every Kubernetes resource belongs to an <strong>API Group</strong>, has a <strong>Version</strong>, and is identified by its <strong>Resource</strong> type (GVR). Understanding GVR is essential for advanced <code>kubectl</code> usage.</p> <table> <thead> <tr> <th>Component</th> <th>Description</th> <th>Examples</th> </tr> </thead> <tbody> <tr> <td><strong>Group</strong></td> <td>A logical collection of related resources</td> <td><code>""</code> (core), <code>apps</code>, <code>batch</code>, <code>networking.k8s.io</code></td> </tr> <tr> <td><strong>Version</strong></td> <td>The API version within a group</td> <td><code>v1</code>, <code>v1beta1</code>, <code>v2</code></td> </tr> <tr> <td><strong>Resource</strong></td> <td>The actual resource type</td> <td><code>pods</code>, <code>deployments</code>, <code>services</code>, <code>ingresses</code></td> </tr> </tbody> </table> <p>The REST path for a resource follows this pattern:</p> <ul> <li><strong>Core group:</strong> <code>/api/v1/namespaces/{ns}/{resource}</code></li> <li><strong>Named group:</strong> <code>/apis/{group}/{version}/namespaces/{ns}/{resource}</code></li> </ul> <p>For example:</p> <ul> <li>Pods: <code>/api/v1/namespaces/default/pods</code> (core group, so just <code>/api/v1</code>)</li> <li>Deployments: <code>/apis/apps/v1/namespaces/default/deployments</code> (apps group)</li> <li>Ingresses: <code>/apis/networking.k8s.io/v1/namespaces/default/ingresses</code></li> </ul> <hr> <h3 id=verbosity-levels>Verbosity Levels<a class=headerlink href=#verbosity-levels title="Permanent link">&para;</a></h3> <p><code>kubectl</code> supports verbosity levels from <code>-v=0</code> to <code>-v=9</code>. These are invaluable for debugging:</p> <table> <thead> <tr> <th>Level</th> <th>What it shows</th> </tr> </thead> <tbody> <tr> <td><code>-v=0</code></td> <td>Default output only</td> </tr> <tr> <td><code>-v=1</code></td> <td>Adds the HTTP method used (GET, POST, etc.)</td> </tr> <tr> <td><code>-v=2</code></td> <td>Adds timing information for API calls</td> </tr> <tr> <td><code>-v=3</code></td> <td>Adds extended information about changes</td> </tr> <tr> <td><code>-v=4</code></td> <td>Adds debug-level verbosity</td> </tr> <tr> <td><code>-v=5</code></td> <td>Adds trace-level verbosity</td> </tr> <tr> <td><code>-v=6</code></td> <td>Shows the full HTTP request URL</td> </tr> <tr> <td><code>-v=7</code></td> <td>Shows HTTP request headers</td> </tr> <tr> <td><code>-v=8</code></td> <td>Shows the HTTP request body</td> </tr> <tr> <td><code>-v=9</code></td> <td>Shows the full HTTP response body (untruncated) - everything the API server returns</td> </tr> </tbody> </table> <div class="admonition warning"> <p class=admonition-title>Use -v=6 or higher to debug API calls</p> <p>When something is not working as expected, <code>-v=6</code> is the sweet spot. It shows you the exact URL being called without flooding you with body content. Use <code>-v=9</code> only when you need to see the full response payload.</p> </div> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1>## See the exact API URL being called</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-v<span class=o>=</span><span class=m>6</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1>## See full request and response headers</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-v<span class=o>=</span><span class=m>7</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1>## See the complete request body (useful for apply/patch debugging)</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>deployment.yaml<span class=w> </span>-v<span class=o>=</span><span class=m>8</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=c1>## See the complete response body (the raw JSON from the API server)</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-v<span class=o>=</span><span class=m>9</span>
</span></code></pre></div> <hr> <h2 id=prerequisites>Prerequisites<a class=headerlink href=#prerequisites title="Permanent link">&para;</a></h2> <ul> <li>A running Kubernetes cluster (minikube, kind, Docker Desktop, or a remote cluster)</li> <li><code>kubectl</code> installed and configured (version 1.25 or higher recommended)</li> <li>Basic familiarity with Kubernetes concepts (pods, deployments, services, namespaces)</li> <li>Terminal access (bash or zsh)</li> </ul> <h4 id=verify-your-environment>Verify your environment<a class=headerlink href=#verify-your-environment title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1>## Check kubectl version (client and server)</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>kubectl<span class=w> </span>version
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1>## Check cluster connectivity</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>kubectl<span class=w> </span>cluster-info
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1>## Check that you have at least one node ready</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>kubectl<span class=w> </span>get<span class=w> </span>nodes
</span></code></pre></div> <hr> <h1 id=lab>Lab<a class=headerlink href=#lab title="Permanent link">&para;</a></h1> <h3 id=step-01-kubeconfig-mastery>Step 01 - kubeconfig Mastery<a class=headerlink href=#step-01-kubeconfig-mastery title="Permanent link">&para;</a></h3> <ul> <li>In this step you will learn to manage multiple cluster configurations, switch contexts, merge kubeconfig files, and use the <code>KUBECONFIG</code> environment variable.</li> </ul> <h4 id=view-your-current-kubeconfig>View your current kubeconfig<a class=headerlink href=#view-your-current-kubeconfig title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1>## Display the full kubeconfig (with sensitive data redacted)</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a>kubectl<span class=w> </span>config<span class=w> </span>view
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=c1>## Display the full kubeconfig with secrets visible</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a>kubectl<span class=w> </span>config<span class=w> </span>view<span class=w> </span>--raw
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=c1>## Show only the current context name</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>kubectl<span class=w> </span>config<span class=w> </span>current-context
</span></code></pre></div> <h4 id=work-with-contexts>Work with contexts<a class=headerlink href=#work-with-contexts title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1>## List all available contexts</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>kubectl<span class=w> </span>config<span class=w> </span>get-contexts
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=c1>## Switch to a different context</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>kubectl<span class=w> </span>config<span class=w> </span>use-context<span class=w> </span>&lt;context-name&gt;
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1>## Show details about a specific context</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>kubectl<span class=w> </span>config<span class=w> </span>get-contexts<span class=w> </span>&lt;context-name&gt;
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=c1>## Set a default namespace for the current context</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=c1>## This avoids having to pass -n &lt;namespace&gt; on every command</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a>kubectl<span class=w> </span>config<span class=w> </span>set-context<span class=w> </span>--current<span class=w> </span>--namespace<span class=o>=</span>kubectl-lab
</span></code></pre></div> <h4 id=create-and-manage-contexts-manually>Create and manage contexts manually<a class=headerlink href=#create-and-manage-contexts-manually title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1>## Add a new cluster entry</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>kubectl<span class=w> </span>config<span class=w> </span>set-cluster<span class=w> </span>my-new-cluster<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span>--server<span class=o>=</span>https://k8s.example.com:6443<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span>--certificate-authority<span class=o>=</span>/path/to/ca.crt
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=c1>## Add a new user entry with token authentication</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>kubectl<span class=w> </span>config<span class=w> </span>set-credentials<span class=w> </span>my-user<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>  </span>--token<span class=o>=</span>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=c1>## Add a new user entry with client certificate authentication</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>kubectl<span class=w> </span>config<span class=w> </span>set-credentials<span class=w> </span>cert-user<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=w>  </span>--client-certificate<span class=o>=</span>/path/to/client.crt<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>  </span>--client-key<span class=o>=</span>/path/to/client.key
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=c1>## Create a new context that binds cluster + user + namespace</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>kubectl<span class=w> </span>config<span class=w> </span>set-context<span class=w> </span>my-context<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>  </span>--cluster<span class=o>=</span>my-new-cluster<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>  </span>--user<span class=o>=</span>my-user<span class=w> </span><span class=se>\</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>  </span>--namespace<span class=o>=</span>default
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=c1>## Delete a context</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>kubectl<span class=w> </span>config<span class=w> </span>delete-context<span class=w> </span>my-context
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=c1>## Delete a cluster entry</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>kubectl<span class=w> </span>config<span class=w> </span>delete-cluster<span class=w> </span>my-new-cluster
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=c1>## Delete a user entry</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>kubectl<span class=w> </span>config<span class=w> </span>delete-user<span class=w> </span>my-user
</span></code></pre></div> <h4 id=merge-multiple-kubeconfig-files>Merge multiple kubeconfig files<a class=headerlink href=#merge-multiple-kubeconfig-files title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>## The KUBECONFIG environment variable accepts a colon-separated list of files</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=c1>## kubectl merges them at runtime (the first file is the default for writes)</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=nb>export</span><span class=w> </span><span class=nv>KUBECONFIG</span><span class=o>=</span>~/.kube/config:~/.kube/cluster-2.config:~/.kube/cluster-3.config
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=c1>## Verify that contexts from all files are visible</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a>kubectl<span class=w> </span>config<span class=w> </span>get-contexts
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=c1>## Permanently merge multiple files into one</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=c1>## This creates a single flat file with all clusters, users, and contexts</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=nv>KUBECONFIG</span><span class=o>=</span>~/.kube/config:~/.kube/cluster-2.config<span class=w> </span>kubectl<span class=w> </span>config<span class=w> </span>view<span class=w> </span><span class=se>\</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=w>  </span>--flatten<span class=w> </span>&gt;<span class=w> </span>~/.kube/merged-config
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=c1>## Use the merged config</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=nb>export</span><span class=w> </span><span class=nv>KUBECONFIG</span><span class=o>=</span>~/.kube/merged-config
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Use KUBECONFIG per terminal session</p> <p>You can set <code>KUBECONFIG</code> per shell session to isolate cluster access. This is safer than having all clusters in one file, because you cannot accidentally run commands against the wrong cluster.</p> </div> <h4 id=one-off-context-override-without-switching>One-off context override without switching<a class=headerlink href=#one-off-context-override-without-switching title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1>## Run a command against a different context without switching</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--context<span class=o>=</span>staging-context
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1>## Run a command in a specific namespace without changing default</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--namespace<span class=o>=</span>kube-system
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=c1>## Combine both overrides</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--context<span class=o>=</span>production-context<span class=w> </span>--namespace<span class=o>=</span>monitoring
</span></code></pre></div> <hr> <h3 id=step-02-output-formatting-mastery>Step 02 - Output Formatting Mastery<a class=headerlink href=#step-02-output-formatting-mastery title="Permanent link">&para;</a></h3> <ul> <li><code>kubectl</code> supports many output formats. Mastering them transforms you from someone who reads terminal walls to someone who extracts exactly the data they need.</li> </ul> <h4 id=set-up-the-lab-namespace-and-resources>Set up the lab namespace and resources<a class=headerlink href=#set-up-the-lab-namespace-and-resources title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1>## Create the lab namespace</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/namespace.yaml
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1>## Deploy sample resources</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=c1>## Wait for the deployment to be ready</span>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>available<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span></code></pre></div> <h4 id=all-output-formats>All output formats<a class=headerlink href=#all-output-formats title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>## Default table output (human-readable)</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=c1>## Wide output - shows additional columns (node name, IP, etc.)</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=c1>## YAML output - the full resource definition as YAML</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=c1>## JSON output - the full resource definition as JSON</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=c1>## Name-only output - just the resource type/name (great for scripting)</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>name
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=c1>## JSONPath output - extract specific fields using JSONPath expressions</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].metadata.name}&#39;</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=c1>## Custom columns - define your own tabular output</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;NAME:.metadata.name,STATUS:.status.phase,IP:.status.podIP&#39;</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=c1>## Go template - use Go template syntax for complex formatting</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=w>  </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{.metadata.name}}{{&quot;\n&quot;}}{{end}}&#39;</span>
</span></code></pre></div> <h4 id=yaml-and-json-output-details>YAML and JSON output details<a class=headerlink href=#yaml-and-json-output-details title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=c1>## Get a single pod as YAML (shows the complete spec including defaults)</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>kubectl<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-80
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=c1>## Get a single pod as JSON and pipe to jq for pretty formatting</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>kubectl<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[0].metadata&#39;</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=c1>## Get just the spec section of a deployment</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.spec&#39;</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=c1>## Get the status section of all pods</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[].status.phase&#39;</span>
</span></code></pre></div> <h4 id=name-output-for-scripting>Name output for scripting<a class=headerlink href=#name-output-for-scripting title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1>## Get just pod names (useful for loops)</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>name
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=c1>## Output: pod/nginx-lab-xxxx-yyyy</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=c1>## Use in a loop to describe each pod</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=k>for</span><span class=w> </span>pod<span class=w> </span><span class=k>in</span><span class=w> </span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>name<span class=k>)</span><span class=p>;</span><span class=w> </span><span class=k>do</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;=== </span><span class=nv>$pod</span><span class=s2> ===&quot;</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>  </span>kubectl<span class=w> </span>describe<span class=w> </span><span class=s2>&quot;</span><span class=nv>$pod</span><span class=s2>&quot;</span><span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=k>done</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=c1>## Delete all pods matching a label (using -o name)</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=c1>## (Dry run - remove --dry-run=client to actually delete)</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-o<span class=w> </span>name<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>  </span>xargs<span class=w> </span>kubectl<span class=w> </span>delete<span class=w> </span>--dry-run<span class=o>=</span>client
</span></code></pre></div> <hr> <h3 id=step-03-jsonpath-deep-dive>Step 03 - JSONPath Deep Dive<a class=headerlink href=#step-03-jsonpath-deep-dive title="Permanent link">&para;</a></h3> <ul> <li>JSONPath is a query language for JSON. kubectl&rsquo;s JSONPath implementation lets you extract, filter, and format data from API responses with surgical precision.</li> </ul> <h4 id=jsonpath-syntax-reference>JSONPath syntax reference<a class=headerlink href=#jsonpath-syntax-reference title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Expression</th> <th>Meaning</th> </tr> </thead> <tbody> <tr> <td><code>$</code></td> <td>The root object (implicit in kubectl, can be omitted)</td> </tr> <tr> <td><code>.field</code></td> <td>Child field access</td> </tr> <tr> <td><code>[n]</code></td> <td>Array index (0-based)</td> </tr> <tr> <td><code>[*]</code></td> <td>All elements of an array</td> </tr> <tr> <td><code>[start:end]</code></td> <td>Array slice</td> </tr> <tr> <td><code>[?(@.field==x)]</code></td> <td>Filter expression - select elements where condition is true</td> </tr> <tr> <td><code>..field</code></td> <td>Recursive descent - find field at any depth</td> </tr> <tr> <td><code>{"\n"}</code></td> <td>Newline character (for formatting)</td> </tr> <tr> <td><code>{"\t"}</code></td> <td>Tab character (for formatting)</td> </tr> <tr> <td><code>{range}{end}</code></td> <td>Iterate over array elements</td> </tr> </tbody> </table> <h4 id=basic-jsonpath-expressions>Basic JSONPath expressions<a class=headerlink href=#basic-jsonpath-expressions title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1>## Get all pod names as a space-separated list</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].metadata.name}&#39;</span>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a><span class=c1>## Get the first pod&#39;s name</span>
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=c1>## Get all pod IPs</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].status.podIP}&#39;</span>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a><span class=c1>## Get pod names with newlines between them</span>
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\n&quot;}{end}&#39;</span>
</span></code></pre></div> <h4 id=formatted-multi-field-output>Formatted multi-field output<a class=headerlink href=#formatted-multi-field-output title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1>## Get pod name and status on each line</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\t&quot;}{.status.phase}{&quot;\n&quot;}{end}&#39;</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=c1>## Get pod name, node name, and pod IP (tab-separated)</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\t&quot;}{.spec.nodeName}{&quot;\t&quot;}{.status.podIP}{&quot;\n&quot;}{end}&#39;</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=c1>## Get container images for all pods</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\t&quot;}{.spec.containers[*].image}{&quot;\n&quot;}{end}&#39;</span>
</span></code></pre></div> <h4 id=filter-expressions>Filter expressions<a class=headerlink href=#filter-expressions title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1>## Get pods that are in Running phase</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[?(@.status.phase==&quot;Running&quot;)].metadata.name}&#39;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=c1>## Get pods scheduled on a specific node (replace NODE_NAME with an actual node)</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=nv>NODE_NAME</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span><span class=k>)</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&quot;{.items[?(@.spec.nodeName==\&quot;</span><span class=si>${</span><span class=nv>NODE_NAME</span><span class=si>}</span><span class=s2>\&quot;)].metadata.name}&quot;</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=c1>## Get containers with memory limit of 128Mi</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].spec.containers[?(@.resources.limits.memory==&quot;128Mi&quot;)].name}&#39;</span>
</span></code></pre></div> <h4 id=nested-and-recursive-descent>Nested and recursive descent<a class=headerlink href=#nested-and-recursive-descent title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1>## Find all container names across all pods (recursive descent)</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{..containers[*].name}&#39;</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=c1>## Find all image names using recursive descent</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{..image}&#39;</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=c1>## Get all label values for the &quot;app&quot; key</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].metadata.labels.app}&#39;</span>
</span></code></pre></div> <h4 id=real-world-jsonpath-examples>Real-world JSONPath examples<a class=headerlink href=#real-world-jsonpath-examples title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1>## Get all node names and their kernel versions</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\t&quot;}{.status.nodeInfo.kernelVersion}{&quot;\n&quot;}{end}&#39;</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=c1>## Get all namespaces and their status</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a>kubectl<span class=w> </span>get<span class=w> </span>namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.name}{&quot;\t&quot;}{.status.phase}{&quot;\n&quot;}{end}&#39;</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=c1>## Get all PVCs with their capacity and storage class</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>kubectl<span class=w> </span>get<span class=w> </span>pvc<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{.metadata.namespace}{&quot;\t&quot;}{.metadata.name}{&quot;\t&quot;}{.spec.resources.requests.storage}{&quot;\t&quot;}{.spec.storageClassName}{&quot;\n&quot;}{end}&#39;</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=c1>## Extract all unique container images running in the cluster</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].spec.containers[*].image}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=s1>&#39;\n&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span></code></pre></div> <hr> <h3 id=step-04-custom-columns-and-advanced-get-operations>Step 04 - Custom Columns and Advanced Get Operations<a class=headerlink href=#step-04-custom-columns-and-advanced-get-operations title="Permanent link">&para;</a></h3> <ul> <li>Custom columns give you full control over tabular output. Combined with field selectors, label selectors, and sort operations, <code>get</code> becomes an incredibly powerful query tool.</li> </ul> <h4 id=custom-columns>Custom columns<a class=headerlink href=#custom-columns title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1>## Basic custom columns - pod name and status</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;NAME:.metadata.name,STATUS:.status.phase&#39;</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=c1>## Extended custom columns - name, node, IP, status, restarts</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=s1>NODE:.spec.nodeName,\</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=s1>IP:.status.podIP,\</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=s1>STATUS:.status.phase,\</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=s1>RESTARTS:.status.containerStatuses[0].restartCount&#39;</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=c1>## Custom columns for deployments - name, replicas, available, image</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>kubectl<span class=w> </span>get<span class=w> </span>deployments<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=s1>DESIRED:.spec.replicas,\</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=s1>AVAILABLE:.status.availableReplicas,\</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=s1>IMAGE:.spec.template.spec.containers[0].image&#39;</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=c1>## Custom columns from a file (for reuse)</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=c1>## Create a columns file:</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a><span class=c1>## NAME          NAMESPACE          NODE             STATUS</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a><span class=c1>## .metadata.name .metadata.namespace .spec.nodeName  .status.phase</span>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=c1>## Then use it:</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a><span class=c1>## kubectl get pods --all-namespaces -o custom-columns-file=columns.txt</span>
</span></code></pre></div> <h4 id=label-selectors-l-selector>Label selectors (-l / &ndash;selector)<a class=headerlink href=#label-selectors-l-selector title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1>## Select pods with a specific label</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1>## Select pods with multiple label requirements (AND logic)</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab,tier<span class=o>=</span>frontend
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=c1>## Select pods where a label exists (any value)</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;tier&#39;</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a><span class=c1>## Select pods where a label does NOT exist</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;!tier&#39;</span>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=c1>## Select pods with set-based requirements</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;tier in (frontend, backend)&#39;</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;environment notin (production)&#39;</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;version in (v1, v2),tier=frontend&#39;</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=c1>## Show labels as columns in the output</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--show-labels
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=c1>## Show specific labels as extra columns</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-L<span class=w> </span>app,tier,version
</span></code></pre></div> <h4 id=field-selectors-field-selector>Field selectors (&ndash;field-selector)<a class=headerlink href=#field-selectors-field-selector title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1>## Get pods by their status phase</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--field-selector<span class=w> </span>status.phase<span class=o>=</span>Running
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=c1>## Get pods NOT in Running state (find problematic pods)</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span>--field-selector<span class=w> </span>status.phase!<span class=o>=</span>Running
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=c1>## Get pods on a specific node</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=nv>NODE_NAME</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span><span class=k>)</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span>--field-selector<span class=w> </span><span class=s2>&quot;spec.nodeName=</span><span class=si>${</span><span class=nv>NODE_NAME</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=c1>## Get a specific pod by name using field selector</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--field-selector<span class=w> </span>metadata.name<span class=o>=</span>nginx-lab
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=c1>## Combine field selectors (AND logic)</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=w>  </span>--field-selector<span class=w> </span><span class=s1>&#39;status.phase=Running,metadata.namespace!=kube-system&#39;</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=c1>## Get events for a specific namespace</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a>kubectl<span class=w> </span>get<span class=w> </span>events<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--field-selector<span class=w> </span><span class=nv>type</span><span class=o>=</span>Warning
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Field selectors are limited</p> <p>Not all fields support field selectors. The supported fields vary by resource type. Common supported fields are <code>metadata.name</code>, <code>metadata.namespace</code>, <code>spec.nodeName</code>, and <code>status.phase</code> for pods. Use <code>kubectl get pods --field-selector help</code> to see which fields are supported (this will produce an error message listing valid fields).</p> </div> <h4 id=sorting>Sorting<a class=headerlink href=#sorting title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1>## Sort pods by creation timestamp (oldest first)</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span><span class=s1>&#39;.metadata.creationTimestamp&#39;</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1>## Sort pods by restart count (ascending)</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>  </span>--sort-by<span class=o>=</span><span class=s1>&#39;.status.containerStatuses[0].restartCount&#39;</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=c1>## Sort nodes by capacity CPU</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>--sort-by<span class=o>=</span><span class=s1>&#39;.status.capacity.cpu&#39;</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=c1>## Sort events by last timestamp</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>kubectl<span class=w> </span>get<span class=w> </span>events<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span><span class=s1>&#39;.lastTimestamp&#39;</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=c1>## Sort namespaces by name</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>kubectl<span class=w> </span>get<span class=w> </span>namespaces<span class=w> </span>--sort-by<span class=o>=</span><span class=s1>&#39;.metadata.name&#39;</span>
</span></code></pre></div> <h4 id=all-namespaces-flag>All-namespaces flag<a class=headerlink href=#all-namespaces-flag title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1>## List pods across ALL namespaces</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-A<span class=w>  </span><span class=c1>## shorthand</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=c1>## Combine with selectors and output formatting</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-A<span class=w> </span>-l<span class=w> </span><span class=nv>tier</span><span class=o>=</span>frontend<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=c1>## Get all services across all namespaces with custom columns</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-A<span class=w> </span><span class=se>\</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;NAMESPACE:.metadata.namespace,NAME:.metadata.name,TYPE:.spec.type,CLUSTER-IP:.spec.clusterIP&#39;</span>
</span></code></pre></div> <hr> <h3 id=step-05-resource-inspection>Step 05 - Resource Inspection<a class=headerlink href=#step-05-resource-inspection title="Permanent link">&para;</a></h3> <ul> <li>Beyond <code>get</code>, kubectl provides powerful commands for understanding resource schemas, discovering API capabilities, and deep-inspecting running resources.</li> </ul> <h4 id=kubectl-describe>kubectl describe<a class=headerlink href=#kubectl-describe title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1>## Describe a pod - shows events, conditions, container status, volumes, etc.</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>kubectl<span class=w> </span>describe<span class=w> </span>pod<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=c1>## Describe a deployment - shows rollout status, replica sets, conditions</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>kubectl<span class=w> </span>describe<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=c1>## Describe a node - shows capacity, allocatable, conditions, running pods</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a>kubectl<span class=w> </span>describe<span class=w> </span>node<span class=w> </span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span><span class=k>)</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=c1>## Describe a namespace</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a>kubectl<span class=w> </span>describe<span class=w> </span>namespace<span class=w> </span>kubectl-lab
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=c1>## Describe a service</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a>kubectl<span class=w> </span>describe<span class=w> </span>service<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title><code>describe</code> vs <code>get -o yaml</code></p> <p><code>describe</code> gives you a human-readable summary with events and computed status. <code>get -o yaml</code> gives you the raw API object, which is useful for programmatic access and for understanding exactly what is stored in etcd. Use <code>describe</code> for debugging and <code>get -o yaml</code> for full detail.</p> </div> <h4 id=kubectl-explain>kubectl explain<a class=headerlink href=#kubectl-explain title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1>## Explain a resource type (top-level fields)</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>kubectl<span class=w> </span>explain<span class=w> </span>pod
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=c1>## Explain a specific field</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>kubectl<span class=w> </span>explain<span class=w> </span>pod.spec
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1>## Explain a deeply nested field</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>kubectl<span class=w> </span>explain<span class=w> </span>pod.spec.containers
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=c1>## Explain with full recursive output (shows ALL fields at all levels)</span>
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>kubectl<span class=w> </span>explain<span class=w> </span>pod.spec.containers<span class=w> </span>--recursive
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=c1>## Explain deployment spec</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a>kubectl<span class=w> </span>explain<span class=w> </span>deployment.spec
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a><span class=c1>## Explain deployment strategy (shows the rollingUpdate fields)</span>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a>kubectl<span class=w> </span>explain<span class=w> </span>deployment.spec.strategy
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a><span class=c1>## Explain a CRD resource (if installed)</span>
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a><span class=c1>## kubectl explain myresource.spec</span>
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a>
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a><span class=c1>## Specify an API version if multiple versions exist</span>
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a>kubectl<span class=w> </span>explain<span class=w> </span>deployment<span class=w> </span>--api-version<span class=o>=</span>apps/v1
</span></code></pre></div> <h4 id=kubectl-api-resources>kubectl api-resources<a class=headerlink href=#kubectl-api-resources title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=c1>## List ALL available resource types in the cluster</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a>kubectl<span class=w> </span>api-resources
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=c1>## Show only namespaced resources</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--namespaced<span class=o>=</span><span class=nb>true</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=c1>## Show only cluster-scoped resources</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--namespaced<span class=o>=</span><span class=nb>false</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=c1>## Show resources in a specific API group</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--api-group<span class=o>=</span>apps
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--api-group<span class=o>=</span>batch
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--api-group<span class=o>=</span>networking.k8s.io
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--api-group<span class=o>=</span>rbac.authorization.k8s.io
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=c1>## Show resources that support a specific verb</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>list
</span><span id=__span-24-18><a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>create,delete
</span><span id=__span-24-19><a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>watch
</span><span id=__span-24-20><a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a>
</span><span id=__span-24-21><a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a><span class=c1>## Show output with more detail (including short names and API group)</span>
</span><span id=__span-24-22><a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a>kubectl<span class=w> </span>api-resources<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-24-23><a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a>
</span><span id=__span-24-24><a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a><span class=c1>## Find a resource by short name</span>
</span><span id=__span-24-25><a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a>kubectl<span class=w> </span>api-resources<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>deploy
</span><span id=__span-24-26><a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a><span class=c1>## Shows: deployments  deploy  apps/v1  true  Deployment</span>
</span></code></pre></div> <h4 id=kubectl-api-versions>kubectl api-versions<a class=headerlink href=#kubectl-api-versions title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=c1>## List all available API versions</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>kubectl<span class=w> </span>api-versions
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=c1>## Filter for a specific group</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a>kubectl<span class=w> </span>api-versions<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>apps
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a>kubectl<span class=w> </span>api-versions<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>networking
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a>kubectl<span class=w> </span>api-versions<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>batch
</span></code></pre></div> <h4 id=comparing-resources>Comparing resources<a class=headerlink href=#comparing-resources title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1>## Get the full YAML of a running resource (useful for comparison)</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>&gt;<span class=w> </span>running-deployment.yaml
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=c1>## Compare a local manifest with what is running in the cluster</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a><span class=c1>## (This shows what would change if you applied the local file)</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=c1>## Clean up the temporary file</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>rm<span class=w> </span>-f<span class=w> </span>running-deployment.yaml
</span></code></pre></div> <hr> <h3 id=step-06-apply-vs-create-vs-replace>Step 06 - apply vs create vs replace<a class=headerlink href=#step-06-apply-vs-create-vs-replace title="Permanent link">&para;</a></h3> <ul> <li>Understanding when to use <code>apply</code>, <code>create</code>, or <code>replace</code> is critical for managing resources safely and predictably.</li> </ul> <h4 id=the-three-approaches>The three approaches<a class=headerlink href=#the-three-approaches title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Command</th> <th>Style</th> <th>Behavior</th> <th>When to use</th> </tr> </thead> <tbody> <tr> <td><code>kubectl apply</code></td> <td>Declarative</td> <td>Creates or updates resources by merging with existing state</td> <td>Day-to-day GitOps and config management</td> </tr> <tr> <td><code>kubectl create</code></td> <td>Imperative</td> <td>Creates a resource. Fails if the resource already exists</td> <td>One-time creation, quick prototyping</td> </tr> <tr> <td><code>kubectl replace</code></td> <td>Imperative</td> <td>Replaces the entire resource. Fails if it does not exist</td> <td>Full replacement (all unspecified fields are removed)</td> </tr> </tbody> </table> <h4 id=kubectl-create-imperative>kubectl create (imperative)<a class=headerlink href=#kubectl-create-imperative title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=c1>## Create a namespace imperatively</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>test-imperative
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=c1>## Create a deployment imperatively (no manifest file needed)</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>kubectl<span class=w> </span>create<span class=w> </span>deployment<span class=w> </span>nginx-test<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>  </span>--image<span class=o>=</span>nginx:1.25-alpine<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>  </span>--replicas<span class=o>=</span><span class=m>2</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=w>  </span>-n<span class=w> </span>test-imperative
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=c1>## Create a service imperatively</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>kubectl<span class=w> </span>create<span class=w> </span>service<span class=w> </span>clusterip<span class=w> </span>nginx-test<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=w>  </span>--tcp<span class=o>=</span><span class=m>80</span>:80<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=w>  </span>-n<span class=w> </span>test-imperative
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=c1>## Create a configmap from literal values</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>kubectl<span class=w> </span>create<span class=w> </span>configmap<span class=w> </span>app-config<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>key1</span><span class=o>=</span>value1<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>key2</span><span class=o>=</span>value2<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=w>  </span>-n<span class=w> </span>test-imperative
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=c1>## Create a secret from literal values</span>
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>generic<span class=w> </span>db-secret<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>username</span><span class=o>=</span>admin<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-24><a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>password</span><span class=o>=</span>secret123<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-25><a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a><span class=w>  </span>-n<span class=w> </span>test-imperative
</span><span id=__span-27-26><a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a>
</span><span id=__span-27-27><a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a><span class=c1>## Generate YAML without creating the resource (useful for bootstrapping manifests)</span>
</span><span id=__span-27-28><a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>kubectl<span class=w> </span>create<span class=w> </span>deployment<span class=w> </span>nginx-gen<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-29><a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a><span class=w>  </span>--image<span class=o>=</span>nginx:1.25-alpine<span class=w> </span><span class=se>\</span>
</span><span id=__span-27-30><a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a><span class=w>  </span>--replicas<span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-27-31><a id=__codelineno-27-31 name=__codelineno-27-31 href=#__codelineno-27-31></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>&gt;<span class=w> </span>generated-deployment.yaml
</span><span id=__span-27-32><a id=__codelineno-27-32 name=__codelineno-27-32 href=#__codelineno-27-32></a>
</span><span id=__span-27-33><a id=__codelineno-27-33 name=__codelineno-27-33 href=#__codelineno-27-33></a><span class=c1>## Clean up</span>
</span><span id=__span-27-34><a id=__codelineno-27-34 name=__codelineno-27-34 href=#__codelineno-27-34></a>kubectl<span class=w> </span>delete<span class=w> </span>namespace<span class=w> </span>test-imperative
</span><span id=__span-27-35><a id=__codelineno-27-35 name=__codelineno-27-35 href=#__codelineno-27-35></a>rm<span class=w> </span>-f<span class=w> </span>generated-deployment.yaml
</span></code></pre></div> <h4 id=kubectl-apply-declarative>kubectl apply (declarative)<a class=headerlink href=#kubectl-apply-declarative title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1>## Apply a single manifest file</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=c1>## Apply all manifests in a directory</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=c1>## Apply with a specific namespace override</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=c1>## Apply from a URL</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=c1>## kubectl apply -f https://raw.githubusercontent.com/example/repo/main/manifest.yaml</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=c1>## Apply and record the command in the annotation (deprecated but still used)</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--record
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a><span class=c1>## Server-side apply (recommended for CI/CD and controllers)</span>
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a><span class=c1>## Server-side apply tracks field ownership and prevents conflicts</span>
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--server-side
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a>
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a><span class=c1>## Server-side apply with a custom field manager name</span>
</span><span id=__span-28-21><a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-28-22><a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a><span class=w>  </span>--server-side<span class=w> </span><span class=se>\</span>
</span><span id=__span-28-23><a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a><span class=w>  </span>--field-manager<span class=o>=</span>my-ci-pipeline
</span><span id=__span-28-24><a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a>
</span><span id=__span-28-25><a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a><span class=c1>## Force-apply to resolve conflicts (use with caution)</span>
</span><span id=__span-28-26><a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-28-27><a id=__codelineno-28-27 name=__codelineno-28-27 href=#__codelineno-28-27></a><span class=w>  </span>--server-side<span class=w> </span><span class=se>\</span>
</span><span id=__span-28-28><a id=__codelineno-28-28 name=__codelineno-28-28 href=#__codelineno-28-28></a><span class=w>  </span>--force-conflicts
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>Server-Side Apply vs Client-Side Apply</p> <p><strong>Client-side apply</strong> (default) uses the <code>kubectl.kubernetes.io/last-applied-configuration</code> annotation to compute diffs. <strong>Server-side apply</strong> (SSA) uses field ownership tracking in the API server. SSA is more reliable and is the recommended approach for CI/CD pipelines and controllers. SSA allows multiple managers to own different fields of the same resource without conflicts.</p> </div> <h4 id=dry-run-modes>Dry-run modes<a class=headerlink href=#dry-run-modes title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1>## Client-side dry run - validates locally, does NOT contact the API server</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=c1>## Catches YAML syntax errors but NOT schema violations</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--dry-run<span class=o>=</span>client
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=c1>## Server-side dry run - sends the request to the API server but does NOT persist</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=c1>## Catches schema violations, admission webhook rejections, and RBAC issues</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--dry-run<span class=o>=</span>server
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=c1>## Combine dry-run with output to see what would be created</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--dry-run<span class=o>=</span>server<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=c1>## Generate manifests with create and dry-run (great for bootstrapping)</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>kubectl<span class=w> </span>create<span class=w> </span>deployment<span class=w> </span>test-gen<span class=w> </span><span class=se>\</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=w>  </span>--image<span class=o>=</span>nginx:latest<span class=w> </span><span class=se>\</span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a><span class=w>  </span>--replicas<span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>Always prefer &ndash;dry-run=server over &ndash;dry-run=client</p> <p>Client-side dry-run only validates YAML syntax. Server-side dry-run sends the request to the API server, which validates the schema, runs admission webhooks, and checks RBAC - without actually creating the resource. This catches many more errors.</p> </div> <h4 id=kubectl-diff>kubectl diff<a class=headerlink href=#kubectl-diff title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1>## Show what would change if you applied a manifest</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=c1>## (similar to &#39;git diff&#39; - shows additions, removals, changes)</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=c1>## Diff all manifests in a directory</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>manifests/
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=c1>## Diff with server-side apply</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--server-side
</span></code></pre></div> <h4 id=kubectl-replace>kubectl replace<a class=headerlink href=#kubectl-replace title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1>## Replace replaces the ENTIRE resource (not a merge)</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=c1>## First export the current state</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>&gt;<span class=w> </span>/tmp/nginx-lab.yaml
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=c1>## Modify the file, then replace</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=c1>## Any fields not in the file will be REMOVED from the resource</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>kubectl<span class=w> </span>replace<span class=w> </span>-f<span class=w> </span>/tmp/nginx-lab.yaml
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=c1>## Replace with --force (deletes and re-creates the resource)</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a><span class=c1>## WARNING: this causes downtime!</span>
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>kubectl<span class=w> </span>replace<span class=w> </span>-f<span class=w> </span>/tmp/nginx-lab.yaml<span class=w> </span>--force
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a><span class=c1>## Clean up temp file</span>
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/nginx-lab.yaml
</span></code></pre></div> <hr> <h3 id=step-07-kubectl-patch>Step 07 - kubectl patch<a class=headerlink href=#step-07-kubectl-patch title="Permanent link">&para;</a></h3> <ul> <li><code>kubectl patch</code> modifies a resource in-place without replacing the entire object. There are three patch types, each with different merge semantics.</li> </ul> <h4 id=deploy-the-patch-target>Deploy the patch target<a class=headerlink href=#deploy-the-patch-target title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1>## Deploy the resource we will use for patching exercises</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/patch-examples.yaml
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=c1>## Verify the initial state</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-40
</span></code></pre></div> <h4 id=patch-type-1-strategic-merge-patch-default>Patch type 1: Strategic Merge Patch (default)<a class=headerlink href=#patch-type-1-strategic-merge-patch-default title="Permanent link">&para;</a></h4> <ul> <li>This is the default and most commonly used patch type. It is Kubernetes-specific and understands how to merge lists (e.g., containers, volumes) by their merge key (usually <code>name</code>).</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1>## Add an annotation using strategic merge patch</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=w>  </span>--type<span class=o>=</span>strategic<span class=w> </span><span class=se>\</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;patched-by&quot;:&quot;strategic-merge&quot;}}}&#39;</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=c1>## Update the replica count</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;spec&quot;:{&quot;replicas&quot;:3}}&#39;</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=c1>## Add a new container to the pod spec</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=c1>## Strategic merge patch uses the container &quot;name&quot; as the merge key,</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=c1>## so this ADDS a sidecar without removing the existing nginx container</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;sidecar&quot;,&quot;image&quot;:&quot;busybox:1.36&quot;,&quot;command&quot;:[&quot;sh&quot;,&quot;-c&quot;,&quot;while true; do echo sidecar; sleep 60; done&quot;]}]}}}}&#39;</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=c1>## Update an existing container&#39;s image (matched by name)</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx&quot;,&quot;image&quot;:&quot;nginx:1.25-alpine&quot;}]}}}}&#39;</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a><span class=c1>## Verify the patch was applied</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.spec.template.spec.containers[*].name}&#39;</span>
</span></code></pre></div> <h4 id=patch-type-2-json-merge-patch-rfc-7386>Patch type 2: JSON Merge Patch (RFC 7386)<a class=headerlink href=#patch-type-2-json-merge-patch-rfc-7386 title="Permanent link">&para;</a></h4> <ul> <li>JSON merge patch is simpler but less powerful. It completely replaces lists instead of merging them.</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1>## Reset the deployment first</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/patch-examples.yaml
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=c1>## Add an annotation using JSON merge patch</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>  </span>--type<span class=o>=</span>merge<span class=w> </span><span class=se>\</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;metadata&quot;:{&quot;annotations&quot;:{&quot;patched-by&quot;:&quot;json-merge&quot;}}}&#39;</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=c1>## Update the image</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=w>  </span>--type<span class=o>=</span>merge<span class=w> </span><span class=se>\</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;spec&quot;:{&quot;template&quot;:{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;nginx&quot;,&quot;image&quot;:&quot;nginx:1.25-alpine&quot;}]}}}}&#39;</span>
</span></code></pre></div> <div class="admonition danger"> <p class=admonition-title>JSON Merge Patch replaces arrays entirely</p> <p>If you use <code>--type=merge</code> and specify a containers list with only one container, it will <strong>replace</strong> the entire containers array. Any containers not in your patch will be removed. This is why strategic merge patch is the default for Kubernetes resources.</p> </div> <h4 id=patch-type-3-json-patch-rfc-6902>Patch type 3: JSON Patch (RFC 6902)<a class=headerlink href=#patch-type-3-json-patch-rfc-6902 title="Permanent link">&para;</a></h4> <ul> <li>JSON Patch uses an array of operations (<code>add</code>, <code>remove</code>, <code>replace</code>, <code>move</code>, <code>copy</code>, <code>test</code>) with explicit paths. It is the most precise patch type.</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1>## Reset the deployment</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/patch-examples.yaml
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=c1>## Add an annotation using JSON Patch</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[{&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/metadata/annotations/patched-by&quot;,&quot;value&quot;:&quot;json-patch&quot;}]&#39;</span>
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=c1>## Replace the replica count using JSON Patch</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[{&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/replicas&quot;,&quot;value&quot;:4}]&#39;</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a><span class=c1>## Add a new label using JSON Patch</span>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[{&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/metadata/labels/patched&quot;,&quot;value&quot;:&quot;true&quot;}]&#39;</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a><span class=c1>## Remove an annotation using JSON Patch</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-22><a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[{&quot;op&quot;:&quot;remove&quot;,&quot;path&quot;:&quot;/metadata/annotations/patched-by&quot;}]&#39;</span>
</span><span id=__span-35-23><a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>
</span><span id=__span-35-24><a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a><span class=c1>## Multiple operations in a single patch</span>
</span><span id=__span-35-25><a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-26><a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-27><a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[</span>
</span><span id=__span-35-28><a id=__codelineno-35-28 name=__codelineno-35-28 href=#__codelineno-35-28></a><span class=s1>    {&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/replicas&quot;,&quot;value&quot;:2},</span>
</span><span id=__span-35-29><a id=__codelineno-35-29 name=__codelineno-35-29 href=#__codelineno-35-29></a><span class=s1>    {&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;/metadata/labels/multi-patched&quot;,&quot;value&quot;:&quot;true&quot;},</span>
</span><span id=__span-35-30><a id=__codelineno-35-30 name=__codelineno-35-30 href=#__codelineno-35-30></a><span class=s1>    {&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/template/spec/containers/0/image&quot;,&quot;value&quot;:&quot;nginx:1.25-alpine&quot;}</span>
</span><span id=__span-35-31><a id=__codelineno-35-31 name=__codelineno-35-31 href=#__codelineno-35-31></a><span class=s1>  ]&#39;</span>
</span><span id=__span-35-32><a id=__codelineno-35-32 name=__codelineno-35-32 href=#__codelineno-35-32></a>
</span><span id=__span-35-33><a id=__codelineno-35-33 name=__codelineno-35-33 href=#__codelineno-35-33></a><span class=c1>## Test operation - succeeds only if the value matches (useful for conditional updates)</span>
</span><span id=__span-35-34><a id=__codelineno-35-34 name=__codelineno-35-34 href=#__codelineno-35-34></a><span class=c1>## This will fail if the replicas is not 2</span>
</span><span id=__span-35-35><a id=__codelineno-35-35 name=__codelineno-35-35 href=#__codelineno-35-35></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>patch-target<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-36><a id=__codelineno-35-36 name=__codelineno-35-36 href=#__codelineno-35-36></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-35-37><a id=__codelineno-35-37 name=__codelineno-35-37 href=#__codelineno-35-37></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[</span>
</span><span id=__span-35-38><a id=__codelineno-35-38 name=__codelineno-35-38 href=#__codelineno-35-38></a><span class=s1>    {&quot;op&quot;:&quot;test&quot;,&quot;path&quot;:&quot;/spec/replicas&quot;,&quot;value&quot;:2},</span>
</span><span id=__span-35-39><a id=__codelineno-35-39 name=__codelineno-35-39 href=#__codelineno-35-39></a><span class=s1>    {&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;/spec/replicas&quot;,&quot;value&quot;:5}</span>
</span><span id=__span-35-40><a id=__codelineno-35-40 name=__codelineno-35-40 href=#__codelineno-35-40></a><span class=s1>  ]&#39;</span>
</span></code></pre></div> <h4 id=patch-comparison-summary>Patch comparison summary<a class=headerlink href=#patch-comparison-summary title="Permanent link">&para;</a></h4> <table> <thead> <tr> <th>Feature</th> <th>Strategic Merge</th> <th>JSON Merge</th> <th>JSON Patch</th> </tr> </thead> <tbody> <tr> <td>Flag</td> <td><code>--type=strategic</code></td> <td><code>--type=merge</code></td> <td><code>--type=json</code></td> </tr> <tr> <td>List handling</td> <td>Merges by key (e.g. name)</td> <td>Replaces entire list</td> <td>Operates on specific indices</td> </tr> <tr> <td>Can delete fields</td> <td>Set to <code>null</code></td> <td>Set to <code>null</code></td> <td>Use <code>"op":"remove"</code></td> </tr> <tr> <td>Kubernetes-aware</td> <td>Yes</td> <td>No</td> <td>No</td> </tr> <tr> <td>Best for</td> <td>Most K8s resources</td> <td>Simple updates</td> <td>Surgical precision</td> </tr> </tbody> </table> <hr> <h3 id=step-08-exec-cp-port-forward-attach-debug>Step 08 - exec, cp, port-forward, attach, debug<a class=headerlink href=#step-08-exec-cp-port-forward-attach-debug title="Permanent link">&para;</a></h3> <ul> <li>These commands are your interactive debugging toolkit for troubleshooting running pods.</li> </ul> <h4 id=deploy-the-multi-container-pod>Deploy the multi-container pod<a class=headerlink href=#deploy-the-multi-container-pod title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1>## Deploy the multi-container pod for debugging exercises</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/multi-container-pod.yaml
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=c1>## Wait for the pod to be ready</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready<span class=w> </span>pod/multi-container-pod<span class=w> </span><span class=se>\</span>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span></code></pre></div> <h4 id=kubectl-exec>kubectl exec<a class=headerlink href=#kubectl-exec title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1>## Execute a command in the default container</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span>ls<span class=w> </span>/
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=c1>## Execute a command in a specific container</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>app<span class=w> </span>--<span class=w> </span>nginx<span class=w> </span>-v
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=c1>## Execute a command in the sidecar container</span>
</span><span id=__span-37-8><a id=__codelineno-37-8 name=__codelineno-37-8 href=#__codelineno-37-8></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar<span class=w> </span>--<span class=w> </span>cat<span class=w> </span>/var/log/app/sidecar.log
</span><span id=__span-37-9><a id=__codelineno-37-9 name=__codelineno-37-9 href=#__codelineno-37-9></a>
</span><span id=__span-37-10><a id=__codelineno-37-10 name=__codelineno-37-10 href=#__codelineno-37-10></a><span class=c1>## Open an interactive shell in the default container</span>
</span><span id=__span-37-11><a id=__codelineno-37-11 name=__codelineno-37-11 href=#__codelineno-37-11></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span>/bin/sh
</span><span id=__span-37-12><a id=__codelineno-37-12 name=__codelineno-37-12 href=#__codelineno-37-12></a>
</span><span id=__span-37-13><a id=__codelineno-37-13 name=__codelineno-37-13 href=#__codelineno-37-13></a><span class=c1>## Open an interactive shell in a specific container</span>
</span><span id=__span-37-14><a id=__codelineno-37-14 name=__codelineno-37-14 href=#__codelineno-37-14></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>-it<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar<span class=w> </span>--<span class=w> </span>/bin/sh
</span><span id=__span-37-15><a id=__codelineno-37-15 name=__codelineno-37-15 href=#__codelineno-37-15></a>
</span><span id=__span-37-16><a id=__codelineno-37-16 name=__codelineno-37-16 href=#__codelineno-37-16></a><span class=c1>## Run multiple commands using sh -c</span>
</span><span id=__span-37-17><a id=__codelineno-37-17 name=__codelineno-37-17 href=#__codelineno-37-17></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-37-18><a id=__codelineno-37-18 name=__codelineno-37-18 href=#__codelineno-37-18></a><span class=w>  </span>sh<span class=w> </span>-c<span class=w> </span><span class=s1>&#39;echo &quot;Hostname: $(hostname)&quot; &amp;&amp; echo &quot;Date: $(date)&quot;&#39;</span>
</span><span id=__span-37-19><a id=__codelineno-37-19 name=__codelineno-37-19 href=#__codelineno-37-19></a>
</span><span id=__span-37-20><a id=__codelineno-37-20 name=__codelineno-37-20 href=#__codelineno-37-20></a><span class=c1>## Check environment variables</span>
</span><span id=__span-37-21><a id=__codelineno-37-21 name=__codelineno-37-21 href=#__codelineno-37-21></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span>env
</span><span id=__span-37-22><a id=__codelineno-37-22 name=__codelineno-37-22 href=#__codelineno-37-22></a>
</span><span id=__span-37-23><a id=__codelineno-37-23 name=__codelineno-37-23 href=#__codelineno-37-23></a><span class=c1>## Check network connectivity from inside the pod</span>
</span><span id=__span-37-24><a id=__codelineno-37-24 name=__codelineno-37-24 href=#__codelineno-37-24></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-37-25><a id=__codelineno-37-25 name=__codelineno-37-25 href=#__codelineno-37-25></a><span class=w>  </span>sh<span class=w> </span>-c<span class=w> </span><span class=s1>&#39;wget -qO- --timeout=5 http://nginx-lab.kubectl-lab.svc.cluster.local || echo &quot;Service not reachable&quot;&#39;</span>
</span><span id=__span-37-26><a id=__codelineno-37-26 name=__codelineno-37-26 href=#__codelineno-37-26></a>
</span><span id=__span-37-27><a id=__codelineno-37-27 name=__codelineno-37-27 href=#__codelineno-37-27></a><span class=c1>## Check DNS resolution inside the pod</span>
</span><span id=__span-37-28><a id=__codelineno-37-28 name=__codelineno-37-28 href=#__codelineno-37-28></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-37-29><a id=__codelineno-37-29 name=__codelineno-37-29 href=#__codelineno-37-29></a><span class=w>  </span>sh<span class=w> </span>-c<span class=w> </span><span class=s1>&#39;nslookup kubernetes.default.svc.cluster.local 2&gt;/dev/null || cat /etc/resolv.conf&#39;</span>
</span></code></pre></div> <h4 id=kubectl-logs>kubectl logs<a class=headerlink href=#kubectl-logs title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=c1>## View logs from the default container</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>kubectl<span class=w> </span>logs<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=c1>## View logs from a specific container</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>kubectl<span class=w> </span>logs<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>app
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a>kubectl<span class=w> </span>logs<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a><span class=c1>## Follow logs in real time (like tail -f)</span>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a>kubectl<span class=w> </span>logs<span class=w> </span>-f<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-38-10><a id=__codelineno-38-10 name=__codelineno-38-10 href=#__codelineno-38-10></a>
</span><span id=__span-38-11><a id=__codelineno-38-11 name=__codelineno-38-11 href=#__codelineno-38-11></a><span class=c1>## Show logs from the last 10 lines</span>
</span><span id=__span-38-12><a id=__codelineno-38-12 name=__codelineno-38-12 href=#__codelineno-38-12></a>kubectl<span class=w> </span>logs<span class=w> </span>--tail<span class=o>=</span><span class=m>10</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-38-13><a id=__codelineno-38-13 name=__codelineno-38-13 href=#__codelineno-38-13></a>
</span><span id=__span-38-14><a id=__codelineno-38-14 name=__codelineno-38-14 href=#__codelineno-38-14></a><span class=c1>## Show logs from the last 30 seconds</span>
</span><span id=__span-38-15><a id=__codelineno-38-15 name=__codelineno-38-15 href=#__codelineno-38-15></a>kubectl<span class=w> </span>logs<span class=w> </span>--since<span class=o>=</span>30s<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-38-16><a id=__codelineno-38-16 name=__codelineno-38-16 href=#__codelineno-38-16></a>
</span><span id=__span-38-17><a id=__codelineno-38-17 name=__codelineno-38-17 href=#__codelineno-38-17></a><span class=c1>## Show logs from all containers in a pod</span>
</span><span id=__span-38-18><a id=__codelineno-38-18 name=__codelineno-38-18 href=#__codelineno-38-18></a>kubectl<span class=w> </span>logs<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--all-containers<span class=o>=</span><span class=nb>true</span>
</span><span id=__span-38-19><a id=__codelineno-38-19 name=__codelineno-38-19 href=#__codelineno-38-19></a>
</span><span id=__span-38-20><a id=__codelineno-38-20 name=__codelineno-38-20 href=#__codelineno-38-20></a><span class=c1>## Show logs from all pods with a specific label</span>
</span><span id=__span-38-21><a id=__codelineno-38-21 name=__codelineno-38-21 href=#__codelineno-38-21></a>kubectl<span class=w> </span>logs<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-38-22><a id=__codelineno-38-22 name=__codelineno-38-22 href=#__codelineno-38-22></a>
</span><span id=__span-38-23><a id=__codelineno-38-23 name=__codelineno-38-23 href=#__codelineno-38-23></a><span class=c1>## Show logs with timestamps</span>
</span><span id=__span-38-24><a id=__codelineno-38-24 name=__codelineno-38-24 href=#__codelineno-38-24></a>kubectl<span class=w> </span>logs<span class=w> </span>--timestamps<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-38-25><a id=__codelineno-38-25 name=__codelineno-38-25 href=#__codelineno-38-25></a>
</span><span id=__span-38-26><a id=__codelineno-38-26 name=__codelineno-38-26 href=#__codelineno-38-26></a><span class=c1>## Show previous container logs (if the container crashed and restarted)</span>
</span><span id=__span-38-27><a id=__codelineno-38-27 name=__codelineno-38-27 href=#__codelineno-38-27></a>kubectl<span class=w> </span>logs<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>app<span class=w> </span>--previous<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-38-28><a id=__codelineno-38-28 name=__codelineno-38-28 href=#__codelineno-38-28></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;No previous container logs (container has not restarted)&quot;</span>
</span></code></pre></div> <h4 id=kubectl-cp>kubectl cp<a class=headerlink href=#kubectl-cp title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=c1>## Copy a file FROM a pod to local machine</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>app<span class=w> </span>--<span class=w> </span><span class=se>\</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a><span class=w>  </span>sh<span class=w> </span>-c<span class=w> </span><span class=s1>&#39;echo &quot;Hello from pod&quot; &gt; /tmp/test.txt&#39;</span>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>kubectl<span class=w> </span>cp<span class=w> </span>kubectl-lab/multi-container-pod:/tmp/test.txt<span class=w> </span>/tmp/from-pod.txt<span class=w> </span>-c<span class=w> </span>app
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>cat<span class=w> </span>/tmp/from-pod.txt
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>
</span><span id=__span-39-7><a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a><span class=c1>## Copy a file TO a pod from local machine</span>
</span><span id=__span-39-8><a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Hello from local&quot;</span><span class=w> </span>&gt;<span class=w> </span>/tmp/to-pod.txt
</span><span id=__span-39-9><a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>kubectl<span class=w> </span>cp<span class=w> </span>/tmp/to-pod.txt<span class=w> </span>kubectl-lab/multi-container-pod:/tmp/to-pod.txt<span class=w> </span>-c<span class=w> </span>app
</span><span id=__span-39-10><a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>kubectl<span class=w> </span><span class=nb>exec</span><span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>app<span class=w> </span>--<span class=w> </span>cat<span class=w> </span>/tmp/to-pod.txt
</span><span id=__span-39-11><a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>
</span><span id=__span-39-12><a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a><span class=c1>## Copy a directory from a pod</span>
</span><span id=__span-39-13><a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>kubectl<span class=w> </span>cp<span class=w> </span>kubectl-lab/multi-container-pod:/etc/nginx<span class=w> </span>/tmp/nginx-config<span class=w> </span>-c<span class=w> </span>app
</span><span id=__span-39-14><a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>
</span><span id=__span-39-15><a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a><span class=c1>## Clean up temp files</span>
</span><span id=__span-39-16><a id=__codelineno-39-16 name=__codelineno-39-16 href=#__codelineno-39-16></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/from-pod.txt<span class=w> </span>/tmp/to-pod.txt
</span><span id=__span-39-17><a id=__codelineno-39-17 name=__codelineno-39-17 href=#__codelineno-39-17></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/nginx-config
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>kubectl cp requires tar in the container</p> <p><code>kubectl cp</code> uses <code>tar</code> under the hood. If the container does not have <code>tar</code> installed (e.g., distroless images), <code>cp</code> will fail. In that case, use <code>kubectl exec</code> with I/O redirection instead: <code>kubectl exec pod -- cat /path/to/file &gt; local-file</code>.</p> </div> <h4 id=kubectl-port-forward>kubectl port-forward<a class=headerlink href=#kubectl-port-forward title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=c1>## Forward local port 8080 to pod port 80</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>kubectl<span class=w> </span>port-forward<span class=w> </span>multi-container-pod<span class=w> </span><span class=m>8080</span>:80<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=c1>## Test it: curl http://localhost:8080</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=c1>## Kill the port-forward: kill %1</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=c1>## Forward to a service (distributes across pods)</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>kubectl<span class=w> </span>port-forward<span class=w> </span>service/nginx-lab<span class=w> </span><span class=m>8080</span>:80<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=c1>## Test it: curl http://localhost:8080</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=c1>## Kill the port-forward: kill %1</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=c1>## Forward to a deployment (picks one pod)</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>kubectl<span class=w> </span>port-forward<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=m>8080</span>:80<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=c1>## Kill the port-forward: kill %1</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=c1>## Forward multiple ports</span>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>kubectl<span class=w> </span>port-forward<span class=w> </span>multi-container-pod<span class=w> </span><span class=m>8080</span>:80<span class=w> </span><span class=m>9090</span>:9090<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a><span class=c1>## Kill the port-forward: kill %1</span>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=c1>## Bind to all interfaces (not just localhost) - useful in VMs/containers</span>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>kubectl<span class=w> </span>port-forward<span class=w> </span>--address<span class=w> </span><span class=m>0</span>.0.0.0<span class=w> </span>multi-container-pod<span class=w> </span><span class=m>8080</span>:80<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=c1>## Kill the port-forward: kill %1</span>
</span></code></pre></div> <h4 id=kubectl-attach>kubectl attach<a class=headerlink href=#kubectl-attach title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=c1>## Attach to a running container&#39;s stdout (read-only by default)</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=c1>## This is different from exec - attach connects to the main process</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>kubectl<span class=w> </span>attach<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-c<span class=w> </span>sidecar
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=c1>## Attach with stdin enabled (for interactive processes)</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=c1>## kubectl attach -it &lt;pod&gt; -c &lt;container&gt; -n &lt;namespace&gt;</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=c1>## Press Ctrl+C to detach</span>
</span></code></pre></div> <h4 id=kubectl-debug>kubectl debug<a class=headerlink href=#kubectl-debug title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=c1>## Create an ephemeral debug container in a running pod</span>
</span><span id=__span-42-2><a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=c1>## This adds a temporary container with debugging tools</span>
</span><span id=__span-42-3><a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a>kubectl<span class=w> </span>debug<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-4><a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=w>  </span>--image<span class=o>=</span>busybox:1.36<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-5><a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a><span class=w>  </span>-it<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-6><a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=w>  </span>--target<span class=o>=</span>app<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-7><a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=w>  </span>--<span class=w> </span>/bin/sh
</span><span id=__span-42-8><a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a>
</span><span id=__span-42-9><a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=c1>## Debug by creating a copy of the pod (original pod is untouched)</span>
</span><span id=__span-42-10><a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a>kubectl<span class=w> </span>debug<span class=w> </span>multi-container-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-11><a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=w>  </span>--image<span class=o>=</span>busybox:1.36<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-12><a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=w>  </span>--copy-to<span class=o>=</span>debug-pod<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-13><a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=w>  </span>-it<span class=w> </span><span class=se>\</span>
</span><span id=__span-42-14><a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=w>  </span>--<span class=w> </span>/bin/sh
</span><span id=__span-42-15><a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a>
</span><span id=__span-42-16><a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a><span class=c1>## Debug a node by creating a privileged pod on it</span>
</span><span id=__span-42-17><a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=c1>## This gives you access to the node&#39;s filesystem at /host</span>
</span><span id=__span-42-18><a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a><span class=nv>NODE_NAME</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>nodes<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span><span class=k>)</span>
</span><span id=__span-42-19><a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a>kubectl<span class=w> </span>debug<span class=w> </span>node/<span class=si>${</span><span class=nv>NODE_NAME</span><span class=si>}</span><span class=w> </span>-it<span class=w> </span>--image<span class=o>=</span>busybox:1.36
</span><span id=__span-42-20><a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a>
</span><span id=__span-42-21><a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a><span class=c1>## Clean up debug pods</span>
</span><span id=__span-42-22><a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a>kubectl<span class=w> </span>delete<span class=w> </span>pod<span class=w> </span>debug-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--ignore-not-found
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Ephemeral containers vs copy-to</p> <p>Ephemeral containers (<code>--target=app</code>) run inside the same pod and share namespaces with the target container. This means they can see the same network, PIDs, and filesystem mounts. The <code>--copy-to</code> flag creates a new pod which is a clone - useful when you want to debug without affecting the running pod.</p> </div> <hr> <h3 id=step-09-wait-rollout-autoscale>Step 09 - wait, rollout, autoscale<a class=headerlink href=#step-09-wait-rollout-autoscale title="Permanent link">&para;</a></h3> <ul> <li>These operational commands help you manage the lifecycle of deployments and wait for conditions.</li> </ul> <h4 id=kubectl-wait>kubectl wait<a class=headerlink href=#kubectl-wait title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=c1>## Wait for a deployment to be available</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>available<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=c1>## Wait for a pod to be ready</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready<span class=w> </span>pod<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>60s
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=c1>## Wait for a pod to be deleted</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a><span class=c1>## (start a deletion in another terminal first)</span>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=c1>## kubectl wait --for=delete pod/&lt;pod-name&gt; -n kubectl-lab --timeout=60s</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=c1>## Wait for a job to complete</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a><span class=c1>## kubectl wait --for=condition=complete job/&lt;job-name&gt; -n kubectl-lab --timeout=300s</span>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a><span class=c1>## Wait for all pods in a namespace to be ready</span>
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready<span class=w> </span>pods<span class=w> </span>--all<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a>
</span><span id=__span-43-19><a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a><span class=c1>## Wait using a JSONPath expression</span>
</span><span id=__span-43-20><a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a><span class=c1>## Wait until a deployment has the desired replicas available</span>
</span><span id=__span-43-21><a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.availableReplicas}&#39;</span><span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-43-22><a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a><span class=w>  </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span></code></pre></div> <h4 id=kubectl-rollout>kubectl rollout<a class=headerlink href=#kubectl-rollout title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a><span class=c1>## Check the rollout status of a deployment</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>kubectl<span class=w> </span>rollout<span class=w> </span>status<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>
</span><span id=__span-44-4><a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a><span class=c1>## View the rollout history (shows revisions)</span>
</span><span id=__span-44-5><a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>kubectl<span class=w> </span>rollout<span class=w> </span><span class=nb>history</span><span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-6><a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>
</span><span id=__span-44-7><a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a><span class=c1>## View details of a specific revision</span>
</span><span id=__span-44-8><a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>kubectl<span class=w> </span>rollout<span class=w> </span><span class=nb>history</span><span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--revision<span class=o>=</span><span class=m>1</span>
</span><span id=__span-44-9><a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>
</span><span id=__span-44-10><a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a><span class=c1>## Trigger a new rollout by updating the image</span>
</span><span id=__span-44-11><a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>kubectl<span class=w> </span><span class=nb>set</span><span class=w> </span>image<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=nv>nginx</span><span class=o>=</span>nginx:1.25-alpine<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-12><a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>
</span><span id=__span-44-13><a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a><span class=c1>## Watch the rollout progress</span>
</span><span id=__span-44-14><a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a>kubectl<span class=w> </span>rollout<span class=w> </span>status<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--watch
</span><span id=__span-44-15><a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a>
</span><span id=__span-44-16><a id=__codelineno-44-16 name=__codelineno-44-16 href=#__codelineno-44-16></a><span class=c1>## Pause a rollout (prevents further updates from being applied)</span>
</span><span id=__span-44-17><a id=__codelineno-44-17 name=__codelineno-44-17 href=#__codelineno-44-17></a>kubectl<span class=w> </span>rollout<span class=w> </span>pause<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-18><a id=__codelineno-44-18 name=__codelineno-44-18 href=#__codelineno-44-18></a>
</span><span id=__span-44-19><a id=__codelineno-44-19 name=__codelineno-44-19 href=#__codelineno-44-19></a><span class=c1>## Resume a paused rollout</span>
</span><span id=__span-44-20><a id=__codelineno-44-20 name=__codelineno-44-20 href=#__codelineno-44-20></a>kubectl<span class=w> </span>rollout<span class=w> </span>resume<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-21><a id=__codelineno-44-21 name=__codelineno-44-21 href=#__codelineno-44-21></a>
</span><span id=__span-44-22><a id=__codelineno-44-22 name=__codelineno-44-22 href=#__codelineno-44-22></a><span class=c1>## Undo the last rollout (rollback to previous revision)</span>
</span><span id=__span-44-23><a id=__codelineno-44-23 name=__codelineno-44-23 href=#__codelineno-44-23></a>kubectl<span class=w> </span>rollout<span class=w> </span>undo<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-44-24><a id=__codelineno-44-24 name=__codelineno-44-24 href=#__codelineno-44-24></a>
</span><span id=__span-44-25><a id=__codelineno-44-25 name=__codelineno-44-25 href=#__codelineno-44-25></a><span class=c1>## Rollback to a specific revision</span>
</span><span id=__span-44-26><a id=__codelineno-44-26 name=__codelineno-44-26 href=#__codelineno-44-26></a>kubectl<span class=w> </span>rollout<span class=w> </span>undo<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--to-revision<span class=o>=</span><span class=m>1</span>
</span><span id=__span-44-27><a id=__codelineno-44-27 name=__codelineno-44-27 href=#__codelineno-44-27></a>
</span><span id=__span-44-28><a id=__codelineno-44-28 name=__codelineno-44-28 href=#__codelineno-44-28></a><span class=c1>## Restart all pods in a deployment (rolling restart)</span>
</span><span id=__span-44-29><a id=__codelineno-44-29 name=__codelineno-44-29 href=#__codelineno-44-29></a><span class=c1>## This is useful to pick up configmap/secret changes</span>
</span><span id=__span-44-30><a id=__codelineno-44-30 name=__codelineno-44-30 href=#__codelineno-44-30></a>kubectl<span class=w> </span>rollout<span class=w> </span>restart<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span></code></pre></div> <h4 id=kubectl-autoscale>kubectl autoscale<a class=headerlink href=#kubectl-autoscale title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=c1>## Create a Horizontal Pod Autoscaler (HPA)</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=c1>## Scales between 2 and 10 replicas based on CPU utilization</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a>kubectl<span class=w> </span>autoscale<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=w>  </span>--min<span class=o>=</span><span class=m>2</span><span class=w> </span>--max<span class=o>=</span><span class=m>10</span><span class=w> </span>--cpu-percent<span class=o>=</span><span class=m>50</span>
</span><span id=__span-45-5><a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a>
</span><span id=__span-45-6><a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=c1>## Check the HPA status</span>
</span><span id=__span-45-7><a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a>kubectl<span class=w> </span>get<span class=w> </span>hpa<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-45-8><a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a>
</span><span id=__span-45-9><a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=c1>## Describe the HPA for detailed metrics and conditions</span>
</span><span id=__span-45-10><a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>kubectl<span class=w> </span>describe<span class=w> </span>hpa<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-45-11><a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a>
</span><span id=__span-45-12><a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a><span class=c1>## Delete the HPA when done</span>
</span><span id=__span-45-13><a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>kubectl<span class=w> </span>delete<span class=w> </span>hpa<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>HPA requires metrics-server</p> <p>The Horizontal Pod Autoscaler needs a metrics source. For CPU/memory-based autoscaling, you need <code>metrics-server</code> installed in the cluster. For custom metrics, you need a custom metrics adapter (e.g., Prometheus Adapter).</p> </div> <hr> <h3 id=step-10-kubectl-auth>Step 10 - kubectl auth<a class=headerlink href=#step-10-kubectl-auth title="Permanent link">&para;</a></h3> <ul> <li>The <code>auth</code> subcommand lets you inspect and debug RBAC (Role-Based Access Control) permissions.</li> </ul> <h4 id=deploy-rbac-resources>Deploy RBAC resources<a class=headerlink href=#deploy-rbac-resources title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=c1>## Deploy the RBAC demo resources</span>
</span><span id=__span-46-2><a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/rbac-demo.yaml
</span><span id=__span-46-3><a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a>
</span><span id=__span-46-4><a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=c1>## Verify the resources were created</span>
</span><span id=__span-46-5><a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>kubectl<span class=w> </span>get<span class=w> </span>serviceaccount,role,rolebinding<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>rbac-demo
</span></code></pre></div> <h4 id=kubectl-auth-can-i>kubectl auth can-i<a class=headerlink href=#kubectl-auth-can-i title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=c1>## Check if your current user can perform an action</span>
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>create<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-3><a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>delete<span class=w> </span>deployments<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-4><a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>get<span class=w> </span>secrets<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-5><a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>create<span class=w> </span>clusterroles
</span><span id=__span-47-6><a id=__codelineno-47-6 name=__codelineno-47-6 href=#__codelineno-47-6></a>
</span><span id=__span-47-7><a id=__codelineno-47-7 name=__codelineno-47-7 href=#__codelineno-47-7></a><span class=c1>## Check what a specific service account can do</span>
</span><span id=__span-47-8><a id=__codelineno-47-8 name=__codelineno-47-8 href=#__codelineno-47-8></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>list<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-9><a id=__codelineno-47-9 name=__codelineno-47-9 href=#__codelineno-47-9></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-10><a id=__codelineno-47-10 name=__codelineno-47-10 href=#__codelineno-47-10></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-11><a id=__codelineno-47-11 name=__codelineno-47-11 href=#__codelineno-47-11></a>
</span><span id=__span-47-12><a id=__codelineno-47-12 name=__codelineno-47-12 href=#__codelineno-47-12></a><span class=c1>## The lab-viewer service account should be able to list pods</span>
</span><span id=__span-47-13><a id=__codelineno-47-13 name=__codelineno-47-13 href=#__codelineno-47-13></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>get<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-14><a id=__codelineno-47-14 name=__codelineno-47-14 href=#__codelineno-47-14></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-15><a id=__codelineno-47-15 name=__codelineno-47-15 href=#__codelineno-47-15></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-16><a id=__codelineno-47-16 name=__codelineno-47-16 href=#__codelineno-47-16></a>
</span><span id=__span-47-17><a id=__codelineno-47-17 name=__codelineno-47-17 href=#__codelineno-47-17></a><span class=c1>## The lab-viewer service account should NOT be able to create pods</span>
</span><span id=__span-47-18><a id=__codelineno-47-18 name=__codelineno-47-18 href=#__codelineno-47-18></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>create<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-19><a id=__codelineno-47-19 name=__codelineno-47-19 href=#__codelineno-47-19></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-20><a id=__codelineno-47-20 name=__codelineno-47-20 href=#__codelineno-47-20></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-21><a id=__codelineno-47-21 name=__codelineno-47-21 href=#__codelineno-47-21></a>
</span><span id=__span-47-22><a id=__codelineno-47-22 name=__codelineno-47-22 href=#__codelineno-47-22></a><span class=c1>## The lab-restricted service account has NO permissions</span>
</span><span id=__span-47-23><a id=__codelineno-47-23 name=__codelineno-47-23 href=#__codelineno-47-23></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>list<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-24><a id=__codelineno-47-24 name=__codelineno-47-24 href=#__codelineno-47-24></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-restricted<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-25><a id=__codelineno-47-25 name=__codelineno-47-25 href=#__codelineno-47-25></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-26><a id=__codelineno-47-26 name=__codelineno-47-26 href=#__codelineno-47-26></a>
</span><span id=__span-47-27><a id=__codelineno-47-27 name=__codelineno-47-27 href=#__codelineno-47-27></a><span class=c1>## Check all permissions (list everything the user can do)</span>
</span><span id=__span-47-28><a id=__codelineno-47-28 name=__codelineno-47-28 href=#__codelineno-47-28></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>--list<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-29><a id=__codelineno-47-29 name=__codelineno-47-29 href=#__codelineno-47-29></a>
</span><span id=__span-47-30><a id=__codelineno-47-30 name=__codelineno-47-30 href=#__codelineno-47-30></a><span class=c1>## Check all permissions for a service account</span>
</span><span id=__span-47-31><a id=__codelineno-47-31 name=__codelineno-47-31 href=#__codelineno-47-31></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>--list<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-32><a id=__codelineno-47-32 name=__codelineno-47-32 href=#__codelineno-47-32></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-33><a id=__codelineno-47-33 name=__codelineno-47-33 href=#__codelineno-47-33></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-34><a id=__codelineno-47-34 name=__codelineno-47-34 href=#__codelineno-47-34></a>
</span><span id=__span-47-35><a id=__codelineno-47-35 name=__codelineno-47-35 href=#__codelineno-47-35></a><span class=c1>## Check access to a specific resource by name</span>
</span><span id=__span-47-36><a id=__codelineno-47-36 name=__codelineno-47-36 href=#__codelineno-47-36></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>get<span class=w> </span>pods/nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-37><a id=__codelineno-47-37 name=__codelineno-47-37 href=#__codelineno-47-37></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-38><a id=__codelineno-47-38 name=__codelineno-47-38 href=#__codelineno-47-38></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-47-39><a id=__codelineno-47-39 name=__codelineno-47-39 href=#__codelineno-47-39></a>
</span><span id=__span-47-40><a id=__codelineno-47-40 name=__codelineno-47-40 href=#__codelineno-47-40></a><span class=c1>## Check access to subresources (like pod logs)</span>
</span><span id=__span-47-41><a id=__codelineno-47-41 name=__codelineno-47-41 href=#__codelineno-47-41></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>get<span class=w> </span>pods/log<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-42><a id=__codelineno-47-42 name=__codelineno-47-42 href=#__codelineno-47-42></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-47-43><a id=__codelineno-47-43 name=__codelineno-47-43 href=#__codelineno-47-43></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span></code></pre></div> <h4 id=kubectl-auth-whoami>kubectl auth whoami<a class=headerlink href=#kubectl-auth-whoami title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=c1>## Show the current user information (requires K8s 1.27+)</span>
</span><span id=__span-48-2><a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>kubectl<span class=w> </span>auth<span class=w> </span>whoami<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;whoami requires Kubernetes 1.27+&quot;</span>
</span><span id=__span-48-3><a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>
</span><span id=__span-48-4><a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a><span class=c1>## Show whoami output as YAML</span>
</span><span id=__span-48-5><a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a>kubectl<span class=w> </span>auth<span class=w> </span>whoami<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;whoami requires Kubernetes 1.27+&quot;</span>
</span></code></pre></div> <h4 id=inspecting-rbac-resources-directly>Inspecting RBAC resources directly<a class=headerlink href=#inspecting-rbac-resources-directly title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=c1>## List all roles in the namespace</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>kubectl<span class=w> </span>get<span class=w> </span>roles<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=c1>## List all role bindings in the namespace</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a>kubectl<span class=w> </span>get<span class=w> </span>rolebindings<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-49-6><a id=__codelineno-49-6 name=__codelineno-49-6 href=#__codelineno-49-6></a>
</span><span id=__span-49-7><a id=__codelineno-49-7 name=__codelineno-49-7 href=#__codelineno-49-7></a><span class=c1>## Get the full YAML of a role (to see its rules)</span>
</span><span id=__span-49-8><a id=__codelineno-49-8 name=__codelineno-49-8 href=#__codelineno-49-8></a>kubectl<span class=w> </span>get<span class=w> </span>role<span class=w> </span>pod-reader<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-49-9><a id=__codelineno-49-9 name=__codelineno-49-9 href=#__codelineno-49-9></a>
</span><span id=__span-49-10><a id=__codelineno-49-10 name=__codelineno-49-10 href=#__codelineno-49-10></a><span class=c1>## List cluster-level roles (there are many built-in ones)</span>
</span><span id=__span-49-11><a id=__codelineno-49-11 name=__codelineno-49-11 href=#__codelineno-49-11></a>kubectl<span class=w> </span>get<span class=w> </span>clusterroles<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20
</span><span id=__span-49-12><a id=__codelineno-49-12 name=__codelineno-49-12 href=#__codelineno-49-12></a>
</span><span id=__span-49-13><a id=__codelineno-49-13 name=__codelineno-49-13 href=#__codelineno-49-13></a><span class=c1>## Show details of the built-in admin ClusterRole</span>
</span><span id=__span-49-14><a id=__codelineno-49-14 name=__codelineno-49-14 href=#__codelineno-49-14></a>kubectl<span class=w> </span>get<span class=w> </span>clusterrole<span class=w> </span>admin<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-49-15><a id=__codelineno-49-15 name=__codelineno-49-15 href=#__codelineno-49-15></a>
</span><span id=__span-49-16><a id=__codelineno-49-16 name=__codelineno-49-16 href=#__codelineno-49-16></a><span class=c1>## List all cluster role bindings</span>
</span><span id=__span-49-17><a id=__codelineno-49-17 name=__codelineno-49-17 href=#__codelineno-49-17></a>kubectl<span class=w> </span>get<span class=w> </span>clusterrolebindings<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20
</span></code></pre></div> <hr> <h3 id=step-11-kubectl-plugins-and-krew>Step 11 - kubectl Plugins and Krew<a class=headerlink href=#step-11-kubectl-plugins-and-krew title="Permanent link">&para;</a></h3> <ul> <li><code>kubectl</code> can be extended with plugins. Any executable in your <code>PATH</code> named <code>kubectl-*</code> becomes a kubectl subcommand.</li> </ul> <h4 id=how-plugins-work>How plugins work<a class=headerlink href=#how-plugins-work title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=c1>## kubectl discovers plugins automatically</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=c1>## Any executable named &quot;kubectl-&lt;name&gt;&quot; in your PATH becomes &quot;kubectl &lt;name&gt;&quot;</span>
</span><span id=__span-50-3><a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>
</span><span id=__span-50-4><a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a><span class=c1>## List all installed plugins</span>
</span><span id=__span-50-5><a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>kubectl<span class=w> </span>plugin<span class=w> </span>list
</span><span id=__span-50-6><a id=__codelineno-50-6 name=__codelineno-50-6 href=#__codelineno-50-6></a>
</span><span id=__span-50-7><a id=__codelineno-50-7 name=__codelineno-50-7 href=#__codelineno-50-7></a><span class=c1>## Example: create a simple plugin</span>
</span><span id=__span-50-8><a id=__codelineno-50-8 name=__codelineno-50-8 href=#__codelineno-50-8></a><span class=c1>## (This creates a script that shows pod count per namespace)</span>
</span><span id=__span-50-9><a id=__codelineno-50-9 name=__codelineno-50-9 href=#__codelineno-50-9></a>cat<span class=w> </span>&gt;<span class=w> </span>/tmp/kubectl-pod-count<span class=w> </span><span class=s>&lt;&lt; &#39;SCRIPT&#39;</span>
</span><span id=__span-50-10><a id=__codelineno-50-10 name=__codelineno-50-10 href=#__codelineno-50-10></a><span class=s>#!/bin/bash</span>
</span><span id=__span-50-11><a id=__codelineno-50-11 name=__codelineno-50-11 href=#__codelineno-50-11></a><span class=s>## kubectl pod-count - Shows the number of pods in each namespace</span>
</span><span id=__span-50-12><a id=__codelineno-50-12 name=__codelineno-50-12 href=#__codelineno-50-12></a><span class=s>echo &quot;NAMESPACE            POD_COUNT&quot;</span>
</span><span id=__span-50-13><a id=__codelineno-50-13 name=__codelineno-50-13 href=#__codelineno-50-13></a><span class=s>echo &quot;-------------------  ---------&quot;</span>
</span><span id=__span-50-14><a id=__codelineno-50-14 name=__codelineno-50-14 href=#__codelineno-50-14></a><span class=s>kubectl get pods --all-namespaces --no-headers 2&gt;/dev/null | \</span>
</span><span id=__span-50-15><a id=__codelineno-50-15 name=__codelineno-50-15 href=#__codelineno-50-15></a><span class=s>  awk &#39;{count[$1]++} END {for (ns in count) printf &quot;%-20s %d\n&quot;, ns, count[ns]}&#39; | \</span>
</span><span id=__span-50-16><a id=__codelineno-50-16 name=__codelineno-50-16 href=#__codelineno-50-16></a><span class=s>  sort</span>
</span><span id=__span-50-17><a id=__codelineno-50-17 name=__codelineno-50-17 href=#__codelineno-50-17></a><span class=s>SCRIPT</span>
</span><span id=__span-50-18><a id=__codelineno-50-18 name=__codelineno-50-18 href=#__codelineno-50-18></a>chmod<span class=w> </span>+x<span class=w> </span>/tmp/kubectl-pod-count
</span><span id=__span-50-19><a id=__codelineno-50-19 name=__codelineno-50-19 href=#__codelineno-50-19></a>
</span><span id=__span-50-20><a id=__codelineno-50-20 name=__codelineno-50-20 href=#__codelineno-50-20></a><span class=c1>## Add to PATH and test it</span>
</span><span id=__span-50-21><a id=__codelineno-50-21 name=__codelineno-50-21 href=#__codelineno-50-21></a><span class=nb>export</span><span class=w> </span><span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/tmp
</span><span id=__span-50-22><a id=__codelineno-50-22 name=__codelineno-50-22 href=#__codelineno-50-22></a>kubectl<span class=w> </span>pod-count
</span><span id=__span-50-23><a id=__codelineno-50-23 name=__codelineno-50-23 href=#__codelineno-50-23></a>
</span><span id=__span-50-24><a id=__codelineno-50-24 name=__codelineno-50-24 href=#__codelineno-50-24></a><span class=c1>## Clean up</span>
</span><span id=__span-50-25><a id=__codelineno-50-25 name=__codelineno-50-25 href=#__codelineno-50-25></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/kubectl-pod-count
</span></code></pre></div> <h4 id=installing-krew-kubectl-plugin-manager>Installing Krew (kubectl plugin manager)<a class=headerlink href=#installing-krew-kubectl-plugin-manager title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>macOS</label><label for=__tabbed_1_2>Linux</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=c1>## Install Krew using Homebrew</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a>brew<span class=w> </span>install<span class=w> </span>krew
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=c1>## Add krew to your PATH (add to ~/.bashrc or ~/.zshrc for persistence)</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=nb>export</span><span class=w> </span><span class=nv>PATH</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>KREW_ROOT</span><span class=k>:-</span><span class=nv>$HOME</span><span class=p>/.krew</span><span class=si>}</span><span class=s2>/bin:</span><span class=nv>$PATH</span><span class=s2>&quot;</span>
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=c1>## Install Krew using the official installer</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a><span class=o>(</span>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=w>  </span><span class=nb>set</span><span class=w> </span>-x<span class=p>;</span><span class=w> </span><span class=nb>cd</span><span class=w> </span><span class=s2>&quot;</span><span class=k>$(</span>mktemp<span class=w> </span>-d<span class=k>)</span><span class=s2>&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=w>  </span><span class=nv>OS</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>uname<span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span><span class=s1>&#39;[:upper:]&#39;</span><span class=w> </span><span class=s1>&#39;[:lower:]&#39;</span><span class=k>)</span><span class=s2>&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=w>  </span><span class=nv>ARCH</span><span class=o>=</span><span class=s2>&quot;</span><span class=k>$(</span>uname<span class=w> </span>-m<span class=w> </span><span class=p>|</span><span class=w> </span>sed<span class=w> </span>-e<span class=w> </span><span class=s1>&#39;s/x86_64/amd64/&#39;</span><span class=w> </span>-e<span class=w> </span><span class=s1>&#39;s/aarch64/arm64/&#39;</span><span class=k>)</span><span class=s2>&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=w>  </span><span class=nv>KREW</span><span class=o>=</span><span class=s2>&quot;krew-</span><span class=si>${</span><span class=nv>OS</span><span class=si>}</span><span class=s2>_</span><span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=w>  </span>curl<span class=w> </span>-fsSLO<span class=w> </span><span class=s2>&quot;https://github.com/kubernetes-sigs/krew/releases/latest/download/</span><span class=si>${</span><span class=nv>KREW</span><span class=si>}</span><span class=s2>.tar.gz&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a><span class=w>  </span>tar<span class=w> </span>zxvf<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>KREW</span><span class=si>}</span><span class=s2>.tar.gz&quot;</span><span class=w> </span><span class=o>&amp;&amp;</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a><span class=w>  </span>./<span class=s2>&quot;</span><span class=si>${</span><span class=nv>KREW</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>install<span class=w> </span>krew
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=o>)</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a>
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a><span class=c1>## Add krew to your PATH (add to ~/.bashrc or ~/.zshrc for persistence)</span>
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=nb>export</span><span class=w> </span><span class=nv>PATH</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>KREW_ROOT</span><span class=k>:-</span><span class=nv>$HOME</span><span class=p>/.krew</span><span class=si>}</span><span class=s2>/bin:</span><span class=nv>$PATH</span><span class=s2>&quot;</span>
</span></code></pre></div> </div> </div> </div> <h4 id=using-krew>Using Krew<a class=headerlink href=#using-krew title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=c1>## Update the krew plugin index</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a>kubectl<span class=w> </span>krew<span class=w> </span>update
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=c1>## Search for plugins</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a>kubectl<span class=w> </span>krew<span class=w> </span>search
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=c1>## Search for a specific plugin</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a>kubectl<span class=w> </span>krew<span class=w> </span>search<span class=w> </span>ctx
</span><span id=__span-53-9><a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a>kubectl<span class=w> </span>krew<span class=w> </span>search<span class=w> </span>ns
</span><span id=__span-53-10><a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a>
</span><span id=__span-53-11><a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a><span class=c1>## Install popular plugins</span>
</span><span id=__span-53-12><a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>ctx<span class=w>        </span><span class=c1>## Switch contexts easily</span>
</span><span id=__span-53-13><a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>ns<span class=w>         </span><span class=c1>## Switch namespaces easily</span>
</span><span id=__span-53-14><a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>neat<span class=w>       </span><span class=c1>## Remove clutter from kubectl output</span>
</span><span id=__span-53-15><a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>tree<span class=w>       </span><span class=c1>## Show resource ownership tree</span>
</span><span id=__span-53-16><a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>images<span class=w>     </span><span class=c1>## Show container images in use</span>
</span><span id=__span-53-17><a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>access-matrix<span class=w>  </span><span class=c1>## Show RBAC access matrix</span>
</span><span id=__span-53-18><a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a>kubectl<span class=w> </span>krew<span class=w> </span>install<span class=w> </span>who-can<span class=w>    </span><span class=c1>## Show who can perform an action</span>
</span><span id=__span-53-19><a id=__codelineno-53-19 name=__codelineno-53-19 href=#__codelineno-53-19></a>
</span><span id=__span-53-20><a id=__codelineno-53-20 name=__codelineno-53-20 href=#__codelineno-53-20></a><span class=c1>## Use installed plugins</span>
</span><span id=__span-53-21><a id=__codelineno-53-21 name=__codelineno-53-21 href=#__codelineno-53-21></a>kubectl<span class=w> </span>ctx<span class=w>                     </span><span class=c1>## List and switch contexts</span>
</span><span id=__span-53-22><a id=__codelineno-53-22 name=__codelineno-53-22 href=#__codelineno-53-22></a>kubectl<span class=w> </span>ns<span class=w>                      </span><span class=c1>## List and switch namespaces</span>
</span><span id=__span-53-23><a id=__codelineno-53-23 name=__codelineno-53-23 href=#__codelineno-53-23></a>kubectl<span class=w> </span>neat<span class=w> </span>get<span class=w> </span>pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span>-o<span class=w> </span>yaml<span class=w>  </span><span class=c1>## Clean YAML output</span>
</span><span id=__span-53-24><a id=__codelineno-53-24 name=__codelineno-53-24 href=#__codelineno-53-24></a>kubectl<span class=w> </span>tree<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w>               </span><span class=c1>## Resource hierarchy</span>
</span><span id=__span-53-25><a id=__codelineno-53-25 name=__codelineno-53-25 href=#__codelineno-53-25></a>
</span><span id=__span-53-26><a id=__codelineno-53-26 name=__codelineno-53-26 href=#__codelineno-53-26></a><span class=c1>## Show info about a plugin</span>
</span><span id=__span-53-27><a id=__codelineno-53-27 name=__codelineno-53-27 href=#__codelineno-53-27></a>kubectl<span class=w> </span>krew<span class=w> </span>info<span class=w> </span>ctx
</span><span id=__span-53-28><a id=__codelineno-53-28 name=__codelineno-53-28 href=#__codelineno-53-28></a>
</span><span id=__span-53-29><a id=__codelineno-53-29 name=__codelineno-53-29 href=#__codelineno-53-29></a><span class=c1>## Uninstall a plugin</span>
</span><span id=__span-53-30><a id=__codelineno-53-30 name=__codelineno-53-30 href=#__codelineno-53-30></a>kubectl<span class=w> </span>krew<span class=w> </span>uninstall<span class=w> </span>ctx
</span><span id=__span-53-31><a id=__codelineno-53-31 name=__codelineno-53-31 href=#__codelineno-53-31></a>
</span><span id=__span-53-32><a id=__codelineno-53-32 name=__codelineno-53-32 href=#__codelineno-53-32></a><span class=c1>## List installed plugins</span>
</span><span id=__span-53-33><a id=__codelineno-53-33 name=__codelineno-53-33 href=#__codelineno-53-33></a>kubectl<span class=w> </span>krew<span class=w> </span>list
</span></code></pre></div> <div class="admonition tip"> <p class=admonition-title>Essential krew plugins</p> <p>The most useful plugins for daily work are: <code>ctx</code> (context switching), <code>ns</code> (namespace switching), <code>neat</code> (clean YAML output), <code>tree</code> (resource hierarchy), <code>images</code> (list container images), <code>who-can</code> (RBAC query), and <code>stern</code> (multi-pod log tailing).</p> </div> <hr> <h3 id=step-12-kubectl-proxy-raw-api-calls-and-token-based-access>Step 12 - kubectl proxy, Raw API Calls, and Token-Based Access<a class=headerlink href=#step-12-kubectl-proxy-raw-api-calls-and-token-based-access title="Permanent link">&para;</a></h3> <ul> <li>Sometimes you need to bypass kubectl and talk directly to the Kubernetes API. This section covers three ways to do that.</li> </ul> <h4 id=kubectl-proxy>kubectl proxy<a class=headerlink href=#kubectl-proxy title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=c1>## Start the kubectl proxy (runs in background on port 8001)</span>
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=c1>## The proxy handles authentication for you</span>
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a>kubectl<span class=w> </span>proxy<span class=w> </span>--port<span class=o>=</span><span class=m>8001</span><span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a><span class=c1>## Now you can make unauthenticated HTTP requests to the API server</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=c1>## List all API versions</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-54-8><a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>
</span><span id=__span-54-9><a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a><span class=c1>## List all available API groups</span>
</span><span id=__span-54-10><a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/apis<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.groups[].name&#39;</span>
</span><span id=__span-54-11><a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a>
</span><span id=__span-54-12><a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a><span class=c1>## List pods in the kubectl-lab namespace</span>
</span><span id=__span-54-13><a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api/v1/namespaces/kubectl-lab/pods<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[].metadata.name&#39;</span>
</span><span id=__span-54-14><a id=__codelineno-54-14 name=__codelineno-54-14 href=#__codelineno-54-14></a>
</span><span id=__span-54-15><a id=__codelineno-54-15 name=__codelineno-54-15 href=#__codelineno-54-15></a><span class=c1>## Get a specific deployment</span>
</span><span id=__span-54-16><a id=__codelineno-54-16 name=__codelineno-54-16 href=#__codelineno-54-16></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/apis/apps/v1/namespaces/kubectl-lab/deployments/nginx-lab<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.metadata.name&#39;</span>
</span><span id=__span-54-17><a id=__codelineno-54-17 name=__codelineno-54-17 href=#__codelineno-54-17></a>
</span><span id=__span-54-18><a id=__codelineno-54-18 name=__codelineno-54-18 href=#__codelineno-54-18></a><span class=c1>## List all services in all namespaces</span>
</span><span id=__span-54-19><a id=__codelineno-54-19 name=__codelineno-54-19 href=#__codelineno-54-19></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api/v1/services<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[] | {namespace: .metadata.namespace, name: .metadata.name}&#39;</span>
</span><span id=__span-54-20><a id=__codelineno-54-20 name=__codelineno-54-20 href=#__codelineno-54-20></a>
</span><span id=__span-54-21><a id=__codelineno-54-21 name=__codelineno-54-21 href=#__codelineno-54-21></a><span class=c1>## List all nodes</span>
</span><span id=__span-54-22><a id=__codelineno-54-22 name=__codelineno-54-22 href=#__codelineno-54-22></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api/v1/nodes<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[].metadata.name&#39;</span>
</span><span id=__span-54-23><a id=__codelineno-54-23 name=__codelineno-54-23 href=#__codelineno-54-23></a>
</span><span id=__span-54-24><a id=__codelineno-54-24 name=__codelineno-54-24 href=#__codelineno-54-24></a><span class=c1>## Get cluster health endpoints</span>
</span><span id=__span-54-25><a id=__codelineno-54-25 name=__codelineno-54-25 href=#__codelineno-54-25></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/healthz
</span><span id=__span-54-26><a id=__codelineno-54-26 name=__codelineno-54-26 href=#__codelineno-54-26></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/readyz
</span><span id=__span-54-27><a id=__codelineno-54-27 name=__codelineno-54-27 href=#__codelineno-54-27></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/livez
</span><span id=__span-54-28><a id=__codelineno-54-28 name=__codelineno-54-28 href=#__codelineno-54-28></a>
</span><span id=__span-54-29><a id=__codelineno-54-29 name=__codelineno-54-29 href=#__codelineno-54-29></a><span class=c1>## Stop the proxy</span>
</span><span id=__span-54-30><a id=__codelineno-54-30 name=__codelineno-54-30 href=#__codelineno-54-30></a><span class=nb>kill</span><span class=w> </span>%1<span class=w> </span><span class=m>2</span>&gt;/dev/null
</span></code></pre></div> <h4 id=kubectl-raw-api-calls>kubectl raw API calls<a class=headerlink href=#kubectl-raw-api-calls title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=c1>## kubectl get --raw sends a raw GET request and returns the raw response</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=c1>## This is useful for accessing API endpoints that kubectl doesn&#39;t have a command for</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=c1>## Get the API server version</span>
</span><span id=__span-55-5><a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/version<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-55-6><a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>
</span><span id=__span-55-7><a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a><span class=c1>## List API discovery document</span>
</span><span id=__span-55-8><a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/api/v1<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.resources[].name&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20
</span><span id=__span-55-9><a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a>
</span><span id=__span-55-10><a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a><span class=c1>## Get metrics (requires metrics-server)</span>
</span><span id=__span-55-11><a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/apis/metrics.k8s.io/v1beta1/nodes<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-55-12><a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-55-13><a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a>
</span><span id=__span-55-14><a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a><span class=c1>## Get pod metrics</span>
</span><span id=__span-55-15><a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/apis/metrics.k8s.io/v1beta1/namespaces/kubectl-lab/pods<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-55-16><a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-55-17><a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a>
</span><span id=__span-55-18><a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a><span class=c1>## Health check endpoints</span>
</span><span id=__span-55-19><a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/healthz
</span><span id=__span-55-20><a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/readyz
</span><span id=__span-55-21><a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a>kubectl<span class=w> </span>get<span class=w> </span>--raw<span class=w> </span>/livez
</span></code></pre></div> <h4 id=token-based-access-without-kubectl>Token-based access (without kubectl)<a class=headerlink href=#token-based-access-without-kubectl title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a><span class=c1>## Get the API server URL from kubeconfig</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=nv>APISERVER</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>config<span class=w> </span>view<span class=w> </span>--minify<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.clusters[0].cluster.server}&#39;</span><span class=k>)</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;API Server: </span><span class=si>${</span><span class=nv>APISERVER</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=c1>## Create a service account token for direct API access</span>
</span><span id=__span-56-6><a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a><span class=nv>TOKEN</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>create<span class=w> </span>token<span class=w> </span>lab-viewer<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--duration<span class=o>=</span>10m<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=k>)</span>
</span><span id=__span-56-7><a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>
</span><span id=__span-56-8><a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a><span class=c1>## If the create token command is not available (K8s &lt; 1.24), use:</span>
</span><span id=__span-56-9><a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a><span class=c1>## TOKEN=$(kubectl get secret -n kubectl-lab -o jsonpath=&#39;{.items[?(@.type==&quot;kubernetes.io/service-account-token&quot;)].data.token}&#39; | base64 -d)</span>
</span><span id=__span-56-10><a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a>
</span><span id=__span-56-11><a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span>-n<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=o>]</span><span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-56-12><a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a><span class=w>  </span><span class=c1>## Make an API call using the token</span>
</span><span id=__span-56-13><a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a><span class=w>  </span><span class=c1>## --insecure is used here for lab purposes; in production, use the CA cert</span>
</span><span id=__span-56-14><a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a><span class=w>  </span>curl<span class=w> </span>-s<span class=w> </span>--insecure<span class=w> </span><span class=se>\</span>
</span><span id=__span-56-15><a id=__codelineno-56-15 name=__codelineno-56-15 href=#__codelineno-56-15></a><span class=w>    </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-56-16><a id=__codelineno-56-16 name=__codelineno-56-16 href=#__codelineno-56-16></a><span class=w>    </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>APISERVER</span><span class=si>}</span><span class=s2>/api/v1/namespaces/kubectl-lab/pods&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[].metadata.name&#39;</span>
</span><span id=__span-56-17><a id=__codelineno-56-17 name=__codelineno-56-17 href=#__codelineno-56-17></a>
</span><span id=__span-56-18><a id=__codelineno-56-18 name=__codelineno-56-18 href=#__codelineno-56-18></a><span class=w>  </span><span class=c1>## This should fail because lab-viewer can only read pods, not deployments</span>
</span><span id=__span-56-19><a id=__codelineno-56-19 name=__codelineno-56-19 href=#__codelineno-56-19></a><span class=w>  </span>curl<span class=w> </span>-s<span class=w> </span>--insecure<span class=w> </span><span class=se>\</span>
</span><span id=__span-56-20><a id=__codelineno-56-20 name=__codelineno-56-20 href=#__codelineno-56-20></a><span class=w>    </span>-H<span class=w> </span><span class=s2>&quot;Authorization: Bearer </span><span class=si>${</span><span class=nv>TOKEN</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-56-21><a id=__codelineno-56-21 name=__codelineno-56-21 href=#__codelineno-56-21></a><span class=w>    </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>APISERVER</span><span class=si>}</span><span class=s2>/apis/apps/v1/namespaces/kubectl-lab/deployments&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.message&#39;</span>
</span><span id=__span-56-22><a id=__codelineno-56-22 name=__codelineno-56-22 href=#__codelineno-56-22></a><span class=k>else</span>
</span><span id=__span-56-23><a id=__codelineno-56-23 name=__codelineno-56-23 href=#__codelineno-56-23></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Could not create token. Skipping token-based access exercise.&quot;</span>
</span><span id=__span-56-24><a id=__codelineno-56-24 name=__codelineno-56-24 href=#__codelineno-56-24></a><span class=k>fi</span>
</span></code></pre></div> <div class="admonition warning"> <p class=admonition-title>TLS certificates in production</p> <p>The examples above use <code>--insecure</code> to skip TLS verification for lab purposes. In production, always use the CA certificate: <code>curl --cacert /path/to/ca.crt -H "Authorization: Bearer $TOKEN" https://...</code></p> </div> <hr> <h3 id=step-13-performance-tips-and-productivity>Step 13 - Performance Tips and Productivity<a class=headerlink href=#step-13-performance-tips-and-productivity title="Permanent link">&para;</a></h3> <ul> <li>This final step covers techniques that make you faster and more efficient with kubectl.</li> </ul> <h4 id=bashzsh-completion>Bash/Zsh completion<a class=headerlink href=#bashzsh-completion title="Permanent link">&para;</a></h4> <div class="tabbed-set tabbed-alternate" data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><input id=__tabbed_2_2 name=__tabbed_2 type=radio><div class=tabbed-labels><label for=__tabbed_2_1>macOS (zsh)</label><label for=__tabbed_2_2>Linux (bash)</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=c1>## Enable kubectl completion for zsh</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=c1>## Add this to your ~/.zshrc file</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=nb>source</span><span class=w> </span>&lt;<span class=o>(</span>kubectl<span class=w> </span>completion<span class=w> </span>zsh<span class=o>)</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=c1>## If you have an alias for kubectl, enable completion for the alias too</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=nb>alias</span><span class=w> </span><span class=nv>k</span><span class=o>=</span>kubectl
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>compdef<span class=w> </span>__start_kubectl<span class=w> </span>k
</span></code></pre></div> </div> <div class=tabbed-block> <div class="language-bash highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=c1>## Enable kubectl completion for bash</span>
</span><span id=__span-58-2><a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=c1>## Add this to your ~/.bashrc file</span>
</span><span id=__span-58-3><a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a><span class=nb>source</span><span class=w> </span>&lt;<span class=o>(</span>kubectl<span class=w> </span>completion<span class=w> </span>bash<span class=o>)</span>
</span><span id=__span-58-4><a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>
</span><span id=__span-58-5><a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a><span class=c1>## If you have an alias for kubectl, enable completion for the alias too</span>
</span><span id=__span-58-6><a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a><span class=nb>alias</span><span class=w> </span><span class=nv>k</span><span class=o>=</span>kubectl
</span><span id=__span-58-7><a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a><span class=nb>complete</span><span class=w> </span>-o<span class=w> </span>default<span class=w> </span>-F<span class=w> </span>__start_kubectl<span class=w> </span>k
</span></code></pre></div> </div> </div> </div> <h4 id=useful-aliases>Useful aliases<a class=headerlink href=#useful-aliases title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=c1>## Add these to your ~/.bashrc or ~/.zshrc</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=c1>## Basic alias</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=nb>alias</span><span class=w> </span><span class=nv>k</span><span class=o>=</span><span class=s1>&#39;kubectl&#39;</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=c1>## Get commands</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=nb>alias</span><span class=w> </span><span class=nv>kg</span><span class=o>=</span><span class=s1>&#39;kubectl get&#39;</span>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgp</span><span class=o>=</span><span class=s1>&#39;kubectl get pods&#39;</span>
</span><span id=__span-59-9><a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgd</span><span class=o>=</span><span class=s1>&#39;kubectl get deployments&#39;</span>
</span><span id=__span-59-10><a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgs</span><span class=o>=</span><span class=s1>&#39;kubectl get services&#39;</span>
</span><span id=__span-59-11><a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgn</span><span class=o>=</span><span class=s1>&#39;kubectl get nodes&#39;</span>
</span><span id=__span-59-12><a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a><span class=nb>alias</span><span class=w> </span><span class=nv>kga</span><span class=o>=</span><span class=s1>&#39;kubectl get all&#39;</span>
</span><span id=__span-59-13><a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a>
</span><span id=__span-59-14><a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a><span class=c1>## Get with options</span>
</span><span id=__span-59-15><a id=__codelineno-59-15 name=__codelineno-59-15 href=#__codelineno-59-15></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgpw</span><span class=o>=</span><span class=s1>&#39;kubectl get pods -o wide&#39;</span>
</span><span id=__span-59-16><a id=__codelineno-59-16 name=__codelineno-59-16 href=#__codelineno-59-16></a><span class=nb>alias</span><span class=w> </span><span class=nv>kgpa</span><span class=o>=</span><span class=s1>&#39;kubectl get pods --all-namespaces&#39;</span>
</span><span id=__span-59-17><a id=__codelineno-59-17 name=__codelineno-59-17 href=#__codelineno-59-17></a>
</span><span id=__span-59-18><a id=__codelineno-59-18 name=__codelineno-59-18 href=#__codelineno-59-18></a><span class=c1>## Describe</span>
</span><span id=__span-59-19><a id=__codelineno-59-19 name=__codelineno-59-19 href=#__codelineno-59-19></a><span class=nb>alias</span><span class=w> </span><span class=nv>kd</span><span class=o>=</span><span class=s1>&#39;kubectl describe&#39;</span>
</span><span id=__span-59-20><a id=__codelineno-59-20 name=__codelineno-59-20 href=#__codelineno-59-20></a><span class=nb>alias</span><span class=w> </span><span class=nv>kdp</span><span class=o>=</span><span class=s1>&#39;kubectl describe pod&#39;</span>
</span><span id=__span-59-21><a id=__codelineno-59-21 name=__codelineno-59-21 href=#__codelineno-59-21></a><span class=nb>alias</span><span class=w> </span><span class=nv>kdd</span><span class=o>=</span><span class=s1>&#39;kubectl describe deployment&#39;</span>
</span><span id=__span-59-22><a id=__codelineno-59-22 name=__codelineno-59-22 href=#__codelineno-59-22></a>
</span><span id=__span-59-23><a id=__codelineno-59-23 name=__codelineno-59-23 href=#__codelineno-59-23></a><span class=c1>## Apply and delete</span>
</span><span id=__span-59-24><a id=__codelineno-59-24 name=__codelineno-59-24 href=#__codelineno-59-24></a><span class=nb>alias</span><span class=w> </span><span class=nv>ka</span><span class=o>=</span><span class=s1>&#39;kubectl apply -f&#39;</span>
</span><span id=__span-59-25><a id=__codelineno-59-25 name=__codelineno-59-25 href=#__codelineno-59-25></a><span class=nb>alias</span><span class=w> </span><span class=nv>kdel</span><span class=o>=</span><span class=s1>&#39;kubectl delete&#39;</span>
</span><span id=__span-59-26><a id=__codelineno-59-26 name=__codelineno-59-26 href=#__codelineno-59-26></a>
</span><span id=__span-59-27><a id=__codelineno-59-27 name=__codelineno-59-27 href=#__codelineno-59-27></a><span class=c1>## Logs</span>
</span><span id=__span-59-28><a id=__codelineno-59-28 name=__codelineno-59-28 href=#__codelineno-59-28></a><span class=nb>alias</span><span class=w> </span><span class=nv>kl</span><span class=o>=</span><span class=s1>&#39;kubectl logs&#39;</span>
</span><span id=__span-59-29><a id=__codelineno-59-29 name=__codelineno-59-29 href=#__codelineno-59-29></a><span class=nb>alias</span><span class=w> </span><span class=nv>klf</span><span class=o>=</span><span class=s1>&#39;kubectl logs -f&#39;</span>
</span><span id=__span-59-30><a id=__codelineno-59-30 name=__codelineno-59-30 href=#__codelineno-59-30></a>
</span><span id=__span-59-31><a id=__codelineno-59-31 name=__codelineno-59-31 href=#__codelineno-59-31></a><span class=c1>## Exec</span>
</span><span id=__span-59-32><a id=__codelineno-59-32 name=__codelineno-59-32 href=#__codelineno-59-32></a><span class=nb>alias</span><span class=w> </span><span class=nv>kex</span><span class=o>=</span><span class=s1>&#39;kubectl exec -it&#39;</span>
</span><span id=__span-59-33><a id=__codelineno-59-33 name=__codelineno-59-33 href=#__codelineno-59-33></a>
</span><span id=__span-59-34><a id=__codelineno-59-34 name=__codelineno-59-34 href=#__codelineno-59-34></a><span class=c1>## Context and namespace</span>
</span><span id=__span-59-35><a id=__codelineno-59-35 name=__codelineno-59-35 href=#__codelineno-59-35></a><span class=nb>alias</span><span class=w> </span><span class=nv>kctx</span><span class=o>=</span><span class=s1>&#39;kubectl config get-contexts&#39;</span>
</span><span id=__span-59-36><a id=__codelineno-59-36 name=__codelineno-59-36 href=#__codelineno-59-36></a><span class=nb>alias</span><span class=w> </span><span class=nv>kns</span><span class=o>=</span><span class=s1>&#39;kubectl config set-context --current --namespace&#39;</span>
</span></code></pre></div> <h4 id=watch-mode>Watch mode<a class=headerlink href=#watch-mode title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a><span class=c1>## Watch pods continuously (updates in place)</span>
</span><span id=__span-60-2><a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--watch
</span><span id=__span-60-3><a id=__codelineno-60-3 name=__codelineno-60-3 href=#__codelineno-60-3></a>
</span><span id=__span-60-4><a id=__codelineno-60-4 name=__codelineno-60-4 href=#__codelineno-60-4></a><span class=c1>## Short form</span>
</span><span id=__span-60-5><a id=__codelineno-60-5 name=__codelineno-60-5 href=#__codelineno-60-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-w
</span><span id=__span-60-6><a id=__codelineno-60-6 name=__codelineno-60-6 href=#__codelineno-60-6></a>
</span><span id=__span-60-7><a id=__codelineno-60-7 name=__codelineno-60-7 href=#__codelineno-60-7></a><span class=c1>## Watch with wide output</span>
</span><span id=__span-60-8><a id=__codelineno-60-8 name=__codelineno-60-8 href=#__codelineno-60-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>wide<span class=w> </span>-w
</span><span id=__span-60-9><a id=__codelineno-60-9 name=__codelineno-60-9 href=#__codelineno-60-9></a>
</span><span id=__span-60-10><a id=__codelineno-60-10 name=__codelineno-60-10 href=#__codelineno-60-10></a><span class=c1>## Watch events as they happen</span>
</span><span id=__span-60-11><a id=__codelineno-60-11 name=__codelineno-60-11 href=#__codelineno-60-11></a>kubectl<span class=w> </span>get<span class=w> </span>events<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--watch
</span><span id=__span-60-12><a id=__codelineno-60-12 name=__codelineno-60-12 href=#__codelineno-60-12></a>
</span><span id=__span-60-13><a id=__codelineno-60-13 name=__codelineno-60-13 href=#__codelineno-60-13></a><span class=c1>## Watch a specific resource</span>
</span><span id=__span-60-14><a id=__codelineno-60-14 name=__codelineno-60-14 href=#__codelineno-60-14></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-w
</span></code></pre></div> <div class="admonition note"> <p class=admonition-title>watch vs &ndash;watch</p> <p><code>kubectl get pods --watch</code> uses the Kubernetes watch API, which is efficient - the API server pushes updates. The <code>watch kubectl get pods</code> command (using the Unix <code>watch</code> utility) re-runs the full GET request every 2 seconds, which is less efficient but works with any output format.</p> </div> <h4 id=resource-caching-and-fast-lookups>Resource caching and fast lookups<a class=headerlink href=#resource-caching-and-fast-lookups title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=c1>## kubectl caches API discovery information locally</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=c1>## Force refresh the discovery cache</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--cached<span class=o>=</span><span class=nb>false</span><span class=w> </span>&gt;<span class=w> </span>/dev/null
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=c1>## The discovery cache is stored at:</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=c1>## ~/.kube/cache/discovery/</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a><span class=c1>## For frequently repeated commands in scripts, use --request-timeout</span>
</span><span id=__span-61-9><a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--request-timeout<span class=o>=</span>5s
</span><span id=__span-61-10><a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a>
</span><span id=__span-61-11><a id=__codelineno-61-11 name=__codelineno-61-11 href=#__codelineno-61-11></a><span class=c1>## Use --chunk-size to paginate large result sets</span>
</span><span id=__span-61-12><a id=__codelineno-61-12 name=__codelineno-61-12 href=#__codelineno-61-12></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span>--chunk-size<span class=o>=</span><span class=m>100</span>
</span></code></pre></div> <h4 id=quick-yaml-generation-with-dry-run>Quick YAML generation with &ndash;dry-run<a class=headerlink href=#quick-yaml-generation-with-dry-run title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=c1>## Generate deployment YAML without creating it</span>
</span><span id=__span-62-2><a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a>kubectl<span class=w> </span>create<span class=w> </span>deployment<span class=w> </span>quick-nginx<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-3><a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a><span class=w>  </span>--image<span class=o>=</span>nginx:alpine<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-4><a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=w>  </span>--replicas<span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-62-5><a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-6><a id=__codelineno-62-6 name=__codelineno-62-6 href=#__codelineno-62-6></a>
</span><span id=__span-62-7><a id=__codelineno-62-7 name=__codelineno-62-7 href=#__codelineno-62-7></a><span class=c1>## Generate service YAML</span>
</span><span id=__span-62-8><a id=__codelineno-62-8 name=__codelineno-62-8 href=#__codelineno-62-8></a>kubectl<span class=w> </span>create<span class=w> </span>service<span class=w> </span>clusterip<span class=w> </span>my-service<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-9><a id=__codelineno-62-9 name=__codelineno-62-9 href=#__codelineno-62-9></a><span class=w>  </span>--tcp<span class=o>=</span><span class=m>80</span>:8080<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-10><a id=__codelineno-62-10 name=__codelineno-62-10 href=#__codelineno-62-10></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-11><a id=__codelineno-62-11 name=__codelineno-62-11 href=#__codelineno-62-11></a>
</span><span id=__span-62-12><a id=__codelineno-62-12 name=__codelineno-62-12 href=#__codelineno-62-12></a><span class=c1>## Generate job YAML</span>
</span><span id=__span-62-13><a id=__codelineno-62-13 name=__codelineno-62-13 href=#__codelineno-62-13></a>kubectl<span class=w> </span>create<span class=w> </span>job<span class=w> </span>my-job<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-14><a id=__codelineno-62-14 name=__codelineno-62-14 href=#__codelineno-62-14></a><span class=w>  </span>--image<span class=o>=</span>busybox<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-15><a id=__codelineno-62-15 name=__codelineno-62-15 href=#__codelineno-62-15></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>--<span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span>
</span><span id=__span-62-16><a id=__codelineno-62-16 name=__codelineno-62-16 href=#__codelineno-62-16></a>
</span><span id=__span-62-17><a id=__codelineno-62-17 name=__codelineno-62-17 href=#__codelineno-62-17></a><span class=c1>## Generate cronjob YAML</span>
</span><span id=__span-62-18><a id=__codelineno-62-18 name=__codelineno-62-18 href=#__codelineno-62-18></a>kubectl<span class=w> </span>create<span class=w> </span>cronjob<span class=w> </span>my-cronjob<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-19><a id=__codelineno-62-19 name=__codelineno-62-19 href=#__codelineno-62-19></a><span class=w>  </span>--image<span class=o>=</span>busybox<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-20><a id=__codelineno-62-20 name=__codelineno-62-20 href=#__codelineno-62-20></a><span class=w>  </span>--schedule<span class=o>=</span><span class=s2>&quot;0 * * * *&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-62-21><a id=__codelineno-62-21 name=__codelineno-62-21 href=#__codelineno-62-21></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>--<span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Hello&quot;</span>
</span><span id=__span-62-22><a id=__codelineno-62-22 name=__codelineno-62-22 href=#__codelineno-62-22></a>
</span><span id=__span-62-23><a id=__codelineno-62-23 name=__codelineno-62-23 href=#__codelineno-62-23></a><span class=c1>## Generate configmap YAML</span>
</span><span id=__span-62-24><a id=__codelineno-62-24 name=__codelineno-62-24 href=#__codelineno-62-24></a>kubectl<span class=w> </span>create<span class=w> </span>configmap<span class=w> </span>my-config<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-25><a id=__codelineno-62-25 name=__codelineno-62-25 href=#__codelineno-62-25></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>key</span><span class=o>=</span>value<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-26><a id=__codelineno-62-26 name=__codelineno-62-26 href=#__codelineno-62-26></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-27><a id=__codelineno-62-27 name=__codelineno-62-27 href=#__codelineno-62-27></a>
</span><span id=__span-62-28><a id=__codelineno-62-28 name=__codelineno-62-28 href=#__codelineno-62-28></a><span class=c1>## Generate secret YAML</span>
</span><span id=__span-62-29><a id=__codelineno-62-29 name=__codelineno-62-29 href=#__codelineno-62-29></a>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>generic<span class=w> </span>my-secret<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-30><a id=__codelineno-62-30 name=__codelineno-62-30 href=#__codelineno-62-30></a><span class=w>  </span>--from-literal<span class=o>=</span><span class=nv>password</span><span class=o>=</span>s3cr3t<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-31><a id=__codelineno-62-31 name=__codelineno-62-31 href=#__codelineno-62-31></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-32><a id=__codelineno-62-32 name=__codelineno-62-32 href=#__codelineno-62-32></a>
</span><span id=__span-62-33><a id=__codelineno-62-33 name=__codelineno-62-33 href=#__codelineno-62-33></a><span class=c1>## Generate namespace YAML</span>
</span><span id=__span-62-34><a id=__codelineno-62-34 name=__codelineno-62-34 href=#__codelineno-62-34></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>my-ns<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-35><a id=__codelineno-62-35 name=__codelineno-62-35 href=#__codelineno-62-35></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-36><a id=__codelineno-62-36 name=__codelineno-62-36 href=#__codelineno-62-36></a>
</span><span id=__span-62-37><a id=__codelineno-62-37 name=__codelineno-62-37 href=#__codelineno-62-37></a><span class=c1>## Generate serviceaccount YAML</span>
</span><span id=__span-62-38><a id=__codelineno-62-38 name=__codelineno-62-38 href=#__codelineno-62-38></a>kubectl<span class=w> </span>create<span class=w> </span>serviceaccount<span class=w> </span>my-sa<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-39><a id=__codelineno-62-39 name=__codelineno-62-39 href=#__codelineno-62-39></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-40><a id=__codelineno-62-40 name=__codelineno-62-40 href=#__codelineno-62-40></a>
</span><span id=__span-62-41><a id=__codelineno-62-41 name=__codelineno-62-41 href=#__codelineno-62-41></a><span class=c1>## Generate role YAML</span>
</span><span id=__span-62-42><a id=__codelineno-62-42 name=__codelineno-62-42 href=#__codelineno-62-42></a>kubectl<span class=w> </span>create<span class=w> </span>role<span class=w> </span>my-role<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-43><a id=__codelineno-62-43 name=__codelineno-62-43 href=#__codelineno-62-43></a><span class=w>  </span>--verb<span class=o>=</span>get,list<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-44><a id=__codelineno-62-44 name=__codelineno-62-44 href=#__codelineno-62-44></a><span class=w>  </span>--resource<span class=o>=</span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-45><a id=__codelineno-62-45 name=__codelineno-62-45 href=#__codelineno-62-45></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-62-46><a id=__codelineno-62-46 name=__codelineno-62-46 href=#__codelineno-62-46></a>
</span><span id=__span-62-47><a id=__codelineno-62-47 name=__codelineno-62-47 href=#__codelineno-62-47></a><span class=c1>## Generate rolebinding YAML</span>
</span><span id=__span-62-48><a id=__codelineno-62-48 name=__codelineno-62-48 href=#__codelineno-62-48></a>kubectl<span class=w> </span>create<span class=w> </span>rolebinding<span class=w> </span>my-binding<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-49><a id=__codelineno-62-49 name=__codelineno-62-49 href=#__codelineno-62-49></a><span class=w>  </span>--role<span class=o>=</span>my-role<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-50><a id=__codelineno-62-50 name=__codelineno-62-50 href=#__codelineno-62-50></a><span class=w>  </span>--serviceaccount<span class=o>=</span>default:my-sa<span class=w> </span><span class=se>\</span>
</span><span id=__span-62-51><a id=__codelineno-62-51 name=__codelineno-62-51 href=#__codelineno-62-51></a><span class=w>  </span>--dry-run<span class=o>=</span>client<span class=w> </span>-o<span class=w> </span>yaml
</span></code></pre></div> <h4 id=kubectl-top-resource-usage>kubectl top (resource usage)<a class=headerlink href=#kubectl-top-resource-usage title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=c1>## Show resource usage for nodes (requires metrics-server)</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a>kubectl<span class=w> </span>top<span class=w> </span>nodes<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=c1>## Show resource usage for pods</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a><span class=c1>## Sort by CPU usage</span>
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-63-9><a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a>
</span><span id=__span-63-10><a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a><span class=c1>## Sort by memory usage</span>
</span><span id=__span-63-11><a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span>memory<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-63-12><a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a>
</span><span id=__span-63-13><a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a><span class=c1>## Show container-level resource usage</span>
</span><span id=__span-63-14><a id=__codelineno-63-14 name=__codelineno-63-14 href=#__codelineno-63-14></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--containers<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span><span id=__span-63-15><a id=__codelineno-63-15 name=__codelineno-63-15 href=#__codelineno-63-15></a>
</span><span id=__span-63-16><a id=__codelineno-63-16 name=__codelineno-63-16 href=#__codelineno-63-16></a><span class=c1>## Show resource usage across all namespaces</span>
</span><span id=__span-63-17><a id=__codelineno-63-17 name=__codelineno-63-17 href=#__codelineno-63-17></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-A<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed&quot;</span>
</span></code></pre></div> <hr> <h1 id=exercises>Exercises<a class=headerlink href=#exercises title="Permanent link">&para;</a></h1> <p>The following exercises will test your deep understanding of <code>kubectl</code>. Try to solve each exercise on your own before revealing the solution.</p> <hr> <h4 id=01-get-all-non-running-pods>01. Get All Non-Running Pods<a class=headerlink href=#01-get-all-non-running-pods title="Permanent link">&para;</a></h4> <p>Get all pods across all namespaces that are NOT in <code>Running</code> state using a field selector.</p> <h4 id=scenario>Scenario:<a class=headerlink href=#scenario title="Permanent link">&para;</a></h4> <p> You are troubleshooting a cluster and need to quickly find all pods that are not healthy.  Field selectors let you filter server-side, which is more efficient than client-side filtering.</p> <p><strong>Hint:</strong> Use <code>--field-selector</code> with the <code>status.phase</code> field and the <code>!=</code> operator.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=c1>## Get all pods that are NOT in Running state across all namespaces</span>
</span><span id=__span-64-2><a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=c1>## The field selector status.phase!=Running filters on the API server side</span>
</span><span id=__span-64-3><a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-64-4><a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=w>  </span>--field-selector<span class=w> </span>status.phase!<span class=o>=</span>Running
</span><span id=__span-64-5><a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a>
</span><span id=__span-64-6><a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=c1>## For more detail, add wide output</span>
</span><span id=__span-64-7><a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-64-8><a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a><span class=w>  </span>--field-selector<span class=w> </span>status.phase!<span class=o>=</span>Running<span class=w> </span><span class=se>\</span>
</span><span id=__span-64-9><a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a><span class=w>  </span>-o<span class=w> </span>wide
</span><span id=__span-64-10><a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a>
</span><span id=__span-64-11><a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a><span class=c1>## Combine with other phases to be more specific</span>
</span><span id=__span-64-12><a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a><span class=c1>## Find only Failed pods</span>
</span><span id=__span-64-13><a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-64-14><a id=__codelineno-64-14 name=__codelineno-64-14 href=#__codelineno-64-14></a><span class=w>  </span>--field-selector<span class=w> </span>status.phase<span class=o>=</span>Failed
</span><span id=__span-64-15><a id=__codelineno-64-15 name=__codelineno-64-15 href=#__codelineno-64-15></a>
</span><span id=__span-64-16><a id=__codelineno-64-16 name=__codelineno-64-16 href=#__codelineno-64-16></a><span class=c1>## Find Pending pods (often indicates scheduling issues)</span>
</span><span id=__span-64-17><a id=__codelineno-64-17 name=__codelineno-64-17 href=#__codelineno-64-17></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-64-18><a id=__codelineno-64-18 name=__codelineno-64-18 href=#__codelineno-64-18></a><span class=w>  </span>--field-selector<span class=w> </span>status.phase<span class=o>=</span>Pending
</span></code></pre></div> </details> <hr> <h4 id=02-extract-all-container-images>02. Extract All Container Images<a class=headerlink href=#02-extract-all-container-images title="Permanent link">&para;</a></h4> <p>Extract all unique container images running in the cluster using JSONPath.</p> <h4 id=scenario_1>Scenario:<a class=headerlink href=#scenario_1 title="Permanent link">&para;</a></h4> <p> You need to audit which container images are deployed across the cluster for security scanning.  JSONPath combined with shell tools gives you a powerful extraction pipeline.</p> <p><strong>Hint:</strong> Use <code>-o jsonpath</code> to extract <code>.spec.containers[*].image</code> from all pods.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=c1>## Method 1: JSONPath with tr and sort</span>
</span><span id=__span-65-2><a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=c1>## Get all container images from all pods, deduplicate and sort</span>
</span><span id=__span-65-3><a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-65-4><a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].spec.containers[*].image}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-65-5><a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a><span class=w>  </span>tr<span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=s1>&#39;\n&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span><span id=__span-65-6><a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a>
</span><span id=__span-65-7><a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a><span class=c1>## Method 2: JSONPath range for cleaner output</span>
</span><span id=__span-65-8><a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-65-9><a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{range .items[*]}{range .spec.containers[*]}{.image}{&quot;\n&quot;}{end}{end}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-65-10><a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a><span class=w>  </span>sort<span class=w> </span>-u
</span><span id=__span-65-11><a id=__codelineno-65-11 name=__codelineno-65-11 href=#__codelineno-65-11></a>
</span><span id=__span-65-12><a id=__codelineno-65-12 name=__codelineno-65-12 href=#__codelineno-65-12></a><span class=c1>## Method 3: Include init containers too (for a complete audit)</span>
</span><span id=__span-65-13><a id=__codelineno-65-13 name=__codelineno-65-13 href=#__codelineno-65-13></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;=== Regular Containers ===&quot;</span>
</span><span id=__span-65-14><a id=__codelineno-65-14 name=__codelineno-65-14 href=#__codelineno-65-14></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-65-15><a id=__codelineno-65-15 name=__codelineno-65-15 href=#__codelineno-65-15></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].spec.containers[*].image}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=s1>&#39;\n&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span><span id=__span-65-16><a id=__codelineno-65-16 name=__codelineno-65-16 href=#__codelineno-65-16></a>
</span><span id=__span-65-17><a id=__codelineno-65-17 name=__codelineno-65-17 href=#__codelineno-65-17></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;&quot;</span>
</span><span id=__span-65-18><a id=__codelineno-65-18 name=__codelineno-65-18 href=#__codelineno-65-18></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;=== Init Containers ===&quot;</span>
</span><span id=__span-65-19><a id=__codelineno-65-19 name=__codelineno-65-19 href=#__codelineno-65-19></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-65-20><a id=__codelineno-65-20 name=__codelineno-65-20 href=#__codelineno-65-20></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[*].spec.initContainers[*].image}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>tr<span class=w> </span><span class=s1>&#39; &#39;</span><span class=w> </span><span class=s1>&#39;\n&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span><span id=__span-65-21><a id=__codelineno-65-21 name=__codelineno-65-21 href=#__codelineno-65-21></a>
</span><span id=__span-65-22><a id=__codelineno-65-22 name=__codelineno-65-22 href=#__codelineno-65-22></a><span class=c1>## Method 4: custom-columns approach</span>
</span><span id=__span-65-23><a id=__codelineno-65-23 name=__codelineno-65-23 href=#__codelineno-65-23></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-65-24><a id=__codelineno-65-24 name=__codelineno-65-24 href=#__codelineno-65-24></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;IMAGE:.spec.containers[*].image&#39;</span><span class=w> </span>--no-headers<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-65-25><a id=__codelineno-65-25 name=__codelineno-65-25 href=#__codelineno-65-25></a><span class=w>  </span>tr<span class=w> </span><span class=s1>&#39;,&#39;</span><span class=w> </span><span class=s1>&#39;\n&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-u
</span></code></pre></div> </details> <hr> <h4 id=03-custom-columns-pod-dashboard>03. Custom Columns: Pod Dashboard<a class=headerlink href=#03-custom-columns-pod-dashboard title="Permanent link">&para;</a></h4> <p>Use custom-columns to display pod name, node, status, and restart count in a clean table.</p> <h4 id=scenario_2>Scenario:<a class=headerlink href=#scenario_2 title="Permanent link">&para;</a></h4> <p> You want a quick dashboard view of pod health without the noise of full <code>get -o wide</code> output.  Custom columns let you select exactly the fields you care about.</p> <p><strong>Hint:</strong> Use <code>-o custom-columns</code> with JSONPath expressions for each column.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=c1>## Custom columns showing name, node, status, restart count, and age</span>
</span><span id=__span-66-2><a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-66-3><a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-66-4><a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-66-5><a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=s1>NODE:.spec.nodeName,\</span>
</span><span id=__span-66-6><a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a><span class=s1>STATUS:.status.phase,\</span>
</span><span id=__span-66-7><a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=s1>RESTARTS:.status.containerStatuses[0].restartCount,\</span>
</span><span id=__span-66-8><a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=s1>IP:.status.podIP&#39;</span>
</span><span id=__span-66-9><a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a>
</span><span id=__span-66-10><a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a><span class=c1>## Extended version with container image</span>
</span><span id=__span-66-11><a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-66-12><a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-66-13><a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-66-14><a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a><span class=s1>NODE:.spec.nodeName,\</span>
</span><span id=__span-66-15><a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a><span class=s1>STATUS:.status.phase,\</span>
</span><span id=__span-66-16><a id=__codelineno-66-16 name=__codelineno-66-16 href=#__codelineno-66-16></a><span class=s1>RESTARTS:.status.containerStatuses[0].restartCount,\</span>
</span><span id=__span-66-17><a id=__codelineno-66-17 name=__codelineno-66-17 href=#__codelineno-66-17></a><span class=s1>IMAGE:.spec.containers[0].image,\</span>
</span><span id=__span-66-18><a id=__codelineno-66-18 name=__codelineno-66-18 href=#__codelineno-66-18></a><span class=s1>IP:.status.podIP&#39;</span>
</span><span id=__span-66-19><a id=__codelineno-66-19 name=__codelineno-66-19 href=#__codelineno-66-19></a>
</span><span id=__span-66-20><a id=__codelineno-66-20 name=__codelineno-66-20 href=#__codelineno-66-20></a><span class=c1>## All namespaces with namespace column</span>
</span><span id=__span-66-21><a id=__codelineno-66-21 name=__codelineno-66-21 href=#__codelineno-66-21></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-66-22><a id=__codelineno-66-22 name=__codelineno-66-22 href=#__codelineno-66-22></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-66-23><a id=__codelineno-66-23 name=__codelineno-66-23 href=#__codelineno-66-23></a><span class=s1>NAMESPACE:.metadata.namespace,\</span>
</span><span id=__span-66-24><a id=__codelineno-66-24 name=__codelineno-66-24 href=#__codelineno-66-24></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-66-25><a id=__codelineno-66-25 name=__codelineno-66-25 href=#__codelineno-66-25></a><span class=s1>STATUS:.status.phase,\</span>
</span><span id=__span-66-26><a id=__codelineno-66-26 name=__codelineno-66-26 href=#__codelineno-66-26></a><span class=s1>RESTARTS:.status.containerStatuses[0].restartCount,\</span>
</span><span id=__span-66-27><a id=__codelineno-66-27 name=__codelineno-66-27 href=#__codelineno-66-27></a><span class=s1>NODE:.spec.nodeName&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=04-switch-kubeconfig-contexts>04. Switch Kubeconfig Contexts<a class=headerlink href=#04-switch-kubeconfig-contexts title="Permanent link">&para;</a></h4> <p>Switch between multiple kubeconfig contexts and verify which cluster is active after each switch.</p> <h4 id=scenario_3>Scenario:<a class=headerlink href=#scenario_3 title="Permanent link">&para;</a></h4> <p> You manage multiple clusters (dev, staging, production) and need to switch between them safely.  Always verify the active context before running commands to avoid accidental changes to the wrong cluster.</p> <p><strong>Hint:</strong> Use <code>kubectl config get-contexts</code>, <code>kubectl config use-context</code>, and <code>kubectl config current-context</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=c1>## Step 1: List all available contexts</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>kubectl<span class=w> </span>config<span class=w> </span>get-contexts
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a>
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=c1>## Step 2: Note the current context (the one marked with *)</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>kubectl<span class=w> </span>config<span class=w> </span>current-context
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=c1>## Step 3: Switch to a different context (replace with your actual context name)</span>
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a><span class=c1>## kubectl config use-context &lt;other-context-name&gt;</span>
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a>
</span><span id=__span-67-10><a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a><span class=c1>## Step 4: Verify the switch</span>
</span><span id=__span-67-11><a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a>kubectl<span class=w> </span>config<span class=w> </span>current-context
</span><span id=__span-67-12><a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a>
</span><span id=__span-67-13><a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a><span class=c1>## Step 5: Verify the cluster you are now connected to</span>
</span><span id=__span-67-14><a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a>kubectl<span class=w> </span>cluster-info
</span><span id=__span-67-15><a id=__codelineno-67-15 name=__codelineno-67-15 href=#__codelineno-67-15></a>
</span><span id=__span-67-16><a id=__codelineno-67-16 name=__codelineno-67-16 href=#__codelineno-67-16></a><span class=c1>## Step 6: Switch back to the original context</span>
</span><span id=__span-67-17><a id=__codelineno-67-17 name=__codelineno-67-17 href=#__codelineno-67-17></a><span class=c1>## kubectl config use-context &lt;original-context-name&gt;</span>
</span><span id=__span-67-18><a id=__codelineno-67-18 name=__codelineno-67-18 href=#__codelineno-67-18></a>
</span><span id=__span-67-19><a id=__codelineno-67-19 name=__codelineno-67-19 href=#__codelineno-67-19></a><span class=c1>## Step 7: Use --context flag for one-off commands without switching</span>
</span><span id=__span-67-20><a id=__codelineno-67-20 name=__codelineno-67-20 href=#__codelineno-67-20></a><span class=c1>## kubectl get pods --context=&lt;other-context-name&gt;</span>
</span><span id=__span-67-21><a id=__codelineno-67-21 name=__codelineno-67-21 href=#__codelineno-67-21></a>
</span><span id=__span-67-22><a id=__codelineno-67-22 name=__codelineno-67-22 href=#__codelineno-67-22></a><span class=c1>## Pro tip: use kubectl config rename-context for clearer names</span>
</span><span id=__span-67-23><a id=__codelineno-67-23 name=__codelineno-67-23 href=#__codelineno-67-23></a><span class=c1>## kubectl config rename-context old-name new-name</span>
</span></code></pre></div> </details> <hr> <h4 id=05-preview-changes-with-kubectl-diff>05. Preview Changes with kubectl diff<a class=headerlink href=#05-preview-changes-with-kubectl-diff title="Permanent link">&para;</a></h4> <p>Use <code>kubectl diff</code> to preview what changes would be applied to the cluster before actually applying a manifest.</p> <h4 id=scenario_4>Scenario:<a class=headerlink href=#scenario_4 title="Permanent link">&para;</a></h4> <p> Before applying changes to production, you want to see exactly what will change.  <code>kubectl diff</code> shows a unified diff between the live cluster state and the local manifest.</p> <p><strong>Hint:</strong> Modify a field in the local manifest (e.g., replica count) and run <code>kubectl diff -f &lt;file&gt;</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=c1>## Step 1: Make sure the deployment is applied</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=c1>## Step 2: Create a modified version of the manifest</span>
</span><span id=__span-68-5><a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a>cp<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>/tmp/modified-deployment.yaml
</span><span id=__span-68-6><a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>
</span><span id=__span-68-7><a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a><span class=c1>## Step 3: Change the replica count in the modified file (from 3 to 5)</span>
</span><span id=__span-68-8><a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a>sed<span class=w> </span>-i.bak<span class=w> </span><span class=s1>&#39;s/replicas: 3/replicas: 5/&#39;</span><span class=w> </span>/tmp/modified-deployment.yaml
</span><span id=__span-68-9><a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>
</span><span id=__span-68-10><a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a><span class=c1>## Step 4: Use kubectl diff to preview the changes</span>
</span><span id=__span-68-11><a id=__codelineno-68-11 name=__codelineno-68-11 href=#__codelineno-68-11></a><span class=c1>## Lines prefixed with - are the current state, + are the proposed changes</span>
</span><span id=__span-68-12><a id=__codelineno-68-12 name=__codelineno-68-12 href=#__codelineno-68-12></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>/tmp/modified-deployment.yaml
</span><span id=__span-68-13><a id=__codelineno-68-13 name=__codelineno-68-13 href=#__codelineno-68-13></a>
</span><span id=__span-68-14><a id=__codelineno-68-14 name=__codelineno-68-14 href=#__codelineno-68-14></a><span class=c1>## Step 5: If the diff looks good, apply it</span>
</span><span id=__span-68-15><a id=__codelineno-68-15 name=__codelineno-68-15 href=#__codelineno-68-15></a><span class=c1>## kubectl apply -f /tmp/modified-deployment.yaml</span>
</span><span id=__span-68-16><a id=__codelineno-68-16 name=__codelineno-68-16 href=#__codelineno-68-16></a>
</span><span id=__span-68-17><a id=__codelineno-68-17 name=__codelineno-68-17 href=#__codelineno-68-17></a><span class=c1>## Step 6: You can also diff an entire directory</span>
</span><span id=__span-68-18><a id=__codelineno-68-18 name=__codelineno-68-18 href=#__codelineno-68-18></a>kubectl<span class=w> </span>diff<span class=w> </span>-f<span class=w> </span>manifests/
</span><span id=__span-68-19><a id=__codelineno-68-19 name=__codelineno-68-19 href=#__codelineno-68-19></a>
</span><span id=__span-68-20><a id=__codelineno-68-20 name=__codelineno-68-20 href=#__codelineno-68-20></a><span class=c1>## Clean up</span>
</span><span id=__span-68-21><a id=__codelineno-68-21 name=__codelineno-68-21 href=#__codelineno-68-21></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/modified-deployment.yaml<span class=w> </span>/tmp/modified-deployment.yaml.bak
</span><span id=__span-68-22><a id=__codelineno-68-22 name=__codelineno-68-22 href=#__codelineno-68-22></a>
</span><span id=__span-68-23><a id=__codelineno-68-23 name=__codelineno-68-23 href=#__codelineno-68-23></a><span class=c1>## Restore original state</span>
</span><span id=__span-68-24><a id=__codelineno-68-24 name=__codelineno-68-24 href=#__codelineno-68-24></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml
</span></code></pre></div> </details> <hr> <h4 id=06-patch-a-deployment-with-strategic-merge-patch>06. Patch a Deployment with Strategic Merge Patch<a class=headerlink href=#06-patch-a-deployment-with-strategic-merge-patch title="Permanent link">&para;</a></h4> <p>Use <code>kubectl patch</code> with a strategic merge patch to add an annotation and update the deployment&rsquo;s labels without affecting other fields.</p> <h4 id=scenario_5>Scenario:<a class=headerlink href=#scenario_5 title="Permanent link">&para;</a></h4> <p> You need to add monitoring annotations to existing deployments without redeploying.  Strategic merge patch is the safest option because it merges intelligently.</p> <p><strong>Hint:</strong> Use <code>kubectl patch</code> with <code>--type=strategic</code> (or omit <code>--type</code> as it is the default) and a JSON payload.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=c1>## Add annotations to the deployment</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{</span>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=s1>    &quot;metadata&quot;: {</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=s1>      &quot;annotations&quot;: {</span>
</span><span id=__span-69-6><a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=s1>        &quot;monitoring.example.com/enabled&quot;: &quot;true&quot;,</span>
</span><span id=__span-69-7><a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a><span class=s1>        &quot;monitoring.example.com/port&quot;: &quot;80&quot;</span>
</span><span id=__span-69-8><a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=s1>      }</span>
</span><span id=__span-69-9><a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a><span class=s1>    }</span>
</span><span id=__span-69-10><a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a><span class=s1>  }&#39;</span>
</span><span id=__span-69-11><a id=__codelineno-69-11 name=__codelineno-69-11 href=#__codelineno-69-11></a>
</span><span id=__span-69-12><a id=__codelineno-69-12 name=__codelineno-69-12 href=#__codelineno-69-12></a><span class=c1>## Verify the annotations were added</span>
</span><span id=__span-69-13><a id=__codelineno-69-13 name=__codelineno-69-13 href=#__codelineno-69-13></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-14><a id=__codelineno-69-14 name=__codelineno-69-14 href=#__codelineno-69-14></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.metadata.annotations}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-69-15><a id=__codelineno-69-15 name=__codelineno-69-15 href=#__codelineno-69-15></a>
</span><span id=__span-69-16><a id=__codelineno-69-16 name=__codelineno-69-16 href=#__codelineno-69-16></a><span class=c1>## Add a new label without removing existing ones</span>
</span><span id=__span-69-17><a id=__codelineno-69-17 name=__codelineno-69-17 href=#__codelineno-69-17></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-18><a id=__codelineno-69-18 name=__codelineno-69-18 href=#__codelineno-69-18></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;{&quot;metadata&quot;:{&quot;labels&quot;:{&quot;patched&quot;:&quot;true&quot;}}}&#39;</span>
</span><span id=__span-69-19><a id=__codelineno-69-19 name=__codelineno-69-19 href=#__codelineno-69-19></a>
</span><span id=__span-69-20><a id=__codelineno-69-20 name=__codelineno-69-20 href=#__codelineno-69-20></a><span class=c1>## Verify the labels (all original labels should still be present)</span>
</span><span id=__span-69-21><a id=__codelineno-69-21 name=__codelineno-69-21 href=#__codelineno-69-21></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-22><a id=__codelineno-69-22 name=__codelineno-69-22 href=#__codelineno-69-22></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.metadata.labels}&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span>.
</span><span id=__span-69-23><a id=__codelineno-69-23 name=__codelineno-69-23 href=#__codelineno-69-23></a>
</span><span id=__span-69-24><a id=__codelineno-69-24 name=__codelineno-69-24 href=#__codelineno-69-24></a><span class=c1>## Clean up the patch - remove the added annotation</span>
</span><span id=__span-69-25><a id=__codelineno-69-25 name=__codelineno-69-25 href=#__codelineno-69-25></a>kubectl<span class=w> </span>patch<span class=w> </span>deployment<span class=w> </span>nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-26><a id=__codelineno-69-26 name=__codelineno-69-26 href=#__codelineno-69-26></a><span class=w>  </span>--type<span class=o>=</span>json<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-27><a id=__codelineno-69-27 name=__codelineno-69-27 href=#__codelineno-69-27></a><span class=w>  </span>-p<span class=w> </span><span class=s1>&#39;[{&quot;op&quot;:&quot;remove&quot;,&quot;path&quot;:&quot;/metadata/annotations/monitoring.example.com~1enabled&quot;},</span>
</span><span id=__span-69-28><a id=__codelineno-69-28 name=__codelineno-69-28 href=#__codelineno-69-28></a><span class=s1>       {&quot;op&quot;:&quot;remove&quot;,&quot;path&quot;:&quot;/metadata/annotations/monitoring.example.com~1port&quot;}]&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=07-debug-with-an-ephemeral-container>07. Debug with an Ephemeral Container<a class=headerlink href=#07-debug-with-an-ephemeral-container title="Permanent link">&para;</a></h4> <p>Use <code>kubectl debug</code> to attach an ephemeral container to a running pod and inspect its network connectivity and filesystem.</p> <h4 id=scenario_6>Scenario:<a class=headerlink href=#scenario_6 title="Permanent link">&para;</a></h4> <p> A pod is experiencing network issues, but its container does not have debugging tools installed.  Ephemeral containers let you inject a debugging container into the running pod without restarting it.</p> <p><strong>Hint:</strong> Use <code>kubectl debug &lt;pod&gt; --image=busybox --target=&lt;container&gt; -it -- /bin/sh</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=c1>## Get the name of a running pod</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=nv>POD_NAME</span><span class=o>=</span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-3><a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=w>  </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.items[0].metadata.name}&#39;</span><span class=k>)</span>
</span><span id=__span-70-4><a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Debugging pod: </span><span class=si>${</span><span class=nv>POD_NAME</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-70-5><a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a>
</span><span id=__span-70-6><a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a><span class=c1>## Attach an ephemeral container to the running pod</span>
</span><span id=__span-70-7><a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a><span class=c1>## --target=nginx shares the PID namespace with the nginx container</span>
</span><span id=__span-70-8><a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a>kubectl<span class=w> </span>debug<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>POD_NAME</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-9><a id=__codelineno-70-9 name=__codelineno-70-9 href=#__codelineno-70-9></a><span class=w>  </span>--image<span class=o>=</span>busybox:1.36<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-10><a id=__codelineno-70-10 name=__codelineno-70-10 href=#__codelineno-70-10></a><span class=w>  </span>--target<span class=o>=</span>nginx<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-11><a id=__codelineno-70-11 name=__codelineno-70-11 href=#__codelineno-70-11></a><span class=w>  </span>-it<span class=w> </span>--<span class=w> </span>/bin/sh
</span><span id=__span-70-12><a id=__codelineno-70-12 name=__codelineno-70-12 href=#__codelineno-70-12></a>
</span><span id=__span-70-13><a id=__codelineno-70-13 name=__codelineno-70-13 href=#__codelineno-70-13></a><span class=c1>## Inside the ephemeral container, you can:</span>
</span><span id=__span-70-14><a id=__codelineno-70-14 name=__codelineno-70-14 href=#__codelineno-70-14></a><span class=c1>## - Check network: wget -qO- http://localhost</span>
</span><span id=__span-70-15><a id=__codelineno-70-15 name=__codelineno-70-15 href=#__codelineno-70-15></a><span class=c1>## - Check DNS:     nslookup kubernetes.default.svc.cluster.local</span>
</span><span id=__span-70-16><a id=__codelineno-70-16 name=__codelineno-70-16 href=#__codelineno-70-16></a><span class=c1>## - Check processes: ps aux (if PID sharing is enabled)</span>
</span><span id=__span-70-17><a id=__codelineno-70-17 name=__codelineno-70-17 href=#__codelineno-70-17></a><span class=c1>## - Check filesystem: ls /proc/1/root/ (access target container&#39;s filesystem)</span>
</span><span id=__span-70-18><a id=__codelineno-70-18 name=__codelineno-70-18 href=#__codelineno-70-18></a><span class=c1>## - Exit: type &#39;exit&#39;</span>
</span><span id=__span-70-19><a id=__codelineno-70-19 name=__codelineno-70-19 href=#__codelineno-70-19></a>
</span><span id=__span-70-20><a id=__codelineno-70-20 name=__codelineno-70-20 href=#__codelineno-70-20></a><span class=c1>## Alternative: create a copy of the pod for debugging</span>
</span><span id=__span-70-21><a id=__codelineno-70-21 name=__codelineno-70-21 href=#__codelineno-70-21></a>kubectl<span class=w> </span>debug<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>POD_NAME</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-22><a id=__codelineno-70-22 name=__codelineno-70-22 href=#__codelineno-70-22></a><span class=w>  </span>--image<span class=o>=</span>busybox:1.36<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-23><a id=__codelineno-70-23 name=__codelineno-70-23 href=#__codelineno-70-23></a><span class=w>  </span>--copy-to<span class=o>=</span>debug-copy-pod<span class=w> </span><span class=se>\</span>
</span><span id=__span-70-24><a id=__codelineno-70-24 name=__codelineno-70-24 href=#__codelineno-70-24></a><span class=w>  </span>-it<span class=w> </span>--<span class=w> </span>/bin/sh
</span><span id=__span-70-25><a id=__codelineno-70-25 name=__codelineno-70-25 href=#__codelineno-70-25></a>
</span><span id=__span-70-26><a id=__codelineno-70-26 name=__codelineno-70-26 href=#__codelineno-70-26></a><span class=c1>## Clean up the debug copy pod</span>
</span><span id=__span-70-27><a id=__codelineno-70-27 name=__codelineno-70-27 href=#__codelineno-70-27></a>kubectl<span class=w> </span>delete<span class=w> </span>pod<span class=w> </span>debug-copy-pod<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--ignore-not-found
</span></code></pre></div> </details> <hr> <h4 id=08-server-side-dry-run-validation>08. Server-Side Dry Run Validation<a class=headerlink href=#08-server-side-dry-run-validation title="Permanent link">&para;</a></h4> <p>Use <code>--dry-run=server</code> to validate a manifest against the API server without actually creating the resource.</p> <h4 id=scenario_7>Scenario:<a class=headerlink href=#scenario_7 title="Permanent link">&para;</a></h4> <p> You have a YAML manifest and want to ensure it is valid against the cluster&rsquo;s schema and admission webhooks before applying it.  Server-side dry run catches more errors than client-side dry run.</p> <p><strong>Hint:</strong> Use <code>kubectl apply -f &lt;file&gt; --dry-run=server</code> and observe the output for validation errors.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=c1>## Step 1: Validate a correct manifest (should succeed)</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/sample-deployment.yaml<span class=w> </span>--dry-run<span class=o>=</span>server
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=c1>## Output: deployment.apps/nginx-lab configured (server dry run)</span>
</span><span id=__span-71-4><a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a>
</span><span id=__span-71-5><a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=c1>## Step 2: Create an intentionally broken manifest</span>
</span><span id=__span-71-6><a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a>cat<span class=w> </span>&gt;<span class=w> </span>/tmp/broken-manifest.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-71-7><a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=s>apiVersion: apps/v1</span>
</span><span id=__span-71-8><a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=s>kind: Deployment</span>
</span><span id=__span-71-9><a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=s>metadata:</span>
</span><span id=__span-71-10><a id=__codelineno-71-10 name=__codelineno-71-10 href=#__codelineno-71-10></a><span class=s>  name: broken-deploy</span>
</span><span id=__span-71-11><a id=__codelineno-71-11 name=__codelineno-71-11 href=#__codelineno-71-11></a><span class=s>  namespace: kubectl-lab</span>
</span><span id=__span-71-12><a id=__codelineno-71-12 name=__codelineno-71-12 href=#__codelineno-71-12></a><span class=s>spec:</span>
</span><span id=__span-71-13><a id=__codelineno-71-13 name=__codelineno-71-13 href=#__codelineno-71-13></a><span class=s>  replicas: 3</span>
</span><span id=__span-71-14><a id=__codelineno-71-14 name=__codelineno-71-14 href=#__codelineno-71-14></a><span class=s>  selector:</span>
</span><span id=__span-71-15><a id=__codelineno-71-15 name=__codelineno-71-15 href=#__codelineno-71-15></a><span class=s>    matchLabels:</span>
</span><span id=__span-71-16><a id=__codelineno-71-16 name=__codelineno-71-16 href=#__codelineno-71-16></a><span class=s>      app: broken</span>
</span><span id=__span-71-17><a id=__codelineno-71-17 name=__codelineno-71-17 href=#__codelineno-71-17></a><span class=s>  template:</span>
</span><span id=__span-71-18><a id=__codelineno-71-18 name=__codelineno-71-18 href=#__codelineno-71-18></a><span class=s>    metadata:</span>
</span><span id=__span-71-19><a id=__codelineno-71-19 name=__codelineno-71-19 href=#__codelineno-71-19></a><span class=s>      labels:</span>
</span><span id=__span-71-20><a id=__codelineno-71-20 name=__codelineno-71-20 href=#__codelineno-71-20></a><span class=s>        app: broken</span>
</span><span id=__span-71-21><a id=__codelineno-71-21 name=__codelineno-71-21 href=#__codelineno-71-21></a><span class=s>    spec:</span>
</span><span id=__span-71-22><a id=__codelineno-71-22 name=__codelineno-71-22 href=#__codelineno-71-22></a><span class=s>      containers:</span>
</span><span id=__span-71-23><a id=__codelineno-71-23 name=__codelineno-71-23 href=#__codelineno-71-23></a><span class=s>        - name: app</span>
</span><span id=__span-71-24><a id=__codelineno-71-24 name=__codelineno-71-24 href=#__codelineno-71-24></a><span class=s>          image: nginx:latest</span>
</span><span id=__span-71-25><a id=__codelineno-71-25 name=__codelineno-71-25 href=#__codelineno-71-25></a><span class=s>          ports:</span>
</span><span id=__span-71-26><a id=__codelineno-71-26 name=__codelineno-71-26 href=#__codelineno-71-26></a><span class=s>            - containerPort: &quot;eighty&quot;  ## Invalid: must be integer</span>
</span><span id=__span-71-27><a id=__codelineno-71-27 name=__codelineno-71-27 href=#__codelineno-71-27></a><span class=s>EOF</span>
</span><span id=__span-71-28><a id=__codelineno-71-28 name=__codelineno-71-28 href=#__codelineno-71-28></a>
</span><span id=__span-71-29><a id=__codelineno-71-29 name=__codelineno-71-29 href=#__codelineno-71-29></a><span class=c1>## Step 3: Validate the broken manifest with server-side dry run</span>
</span><span id=__span-71-30><a id=__codelineno-71-30 name=__codelineno-71-30 href=#__codelineno-71-30></a><span class=c1>## This should return an error about the invalid port</span>
</span><span id=__span-71-31><a id=__codelineno-71-31 name=__codelineno-71-31 href=#__codelineno-71-31></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>/tmp/broken-manifest.yaml<span class=w> </span>--dry-run<span class=o>=</span>server<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span><span id=__span-71-32><a id=__codelineno-71-32 name=__codelineno-71-32 href=#__codelineno-71-32></a>
</span><span id=__span-71-33><a id=__codelineno-71-33 name=__codelineno-71-33 href=#__codelineno-71-33></a><span class=c1>## Step 4: Compare with client-side dry run (may not catch the error)</span>
</span><span id=__span-71-34><a id=__codelineno-71-34 name=__codelineno-71-34 href=#__codelineno-71-34></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>/tmp/broken-manifest.yaml<span class=w> </span>--dry-run<span class=o>=</span>client<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span><span id=__span-71-35><a id=__codelineno-71-35 name=__codelineno-71-35 href=#__codelineno-71-35></a>
</span><span id=__span-71-36><a id=__codelineno-71-36 name=__codelineno-71-36 href=#__codelineno-71-36></a><span class=c1>## Step 5: Fix the manifest and validate again</span>
</span><span id=__span-71-37><a id=__codelineno-71-37 name=__codelineno-71-37 href=#__codelineno-71-37></a>sed<span class=w> </span><span class=s1>&#39;s/&quot;eighty&quot;/80/&#39;</span><span class=w> </span>/tmp/broken-manifest.yaml<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>--dry-run<span class=o>=</span>server<span class=w> </span>-f<span class=w> </span>-
</span><span id=__span-71-38><a id=__codelineno-71-38 name=__codelineno-71-38 href=#__codelineno-71-38></a>
</span><span id=__span-71-39><a id=__codelineno-71-39 name=__codelineno-71-39 href=#__codelineno-71-39></a><span class=c1>## Clean up</span>
</span><span id=__span-71-40><a id=__codelineno-71-40 name=__codelineno-71-40 href=#__codelineno-71-40></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/broken-manifest.yaml
</span></code></pre></div> </details> <hr> <h4 id=09-find-api-resources-by-verb>09. Find API Resources by Verb<a class=headerlink href=#09-find-api-resources-by-verb title="Permanent link">&para;</a></h4> <p>Find all Kubernetes API resources that support the &ldquo;list&rdquo; verb.</p> <h4 id=scenario_8>Scenario:<a class=headerlink href=#scenario_8 title="Permanent link">&para;</a></h4> <p> You are building automation and need to know which resources can be listed programmatically.  Different resources support different verbs (get, list, create, update, delete, watch, patch).</p> <p><strong>Hint:</strong> Use <code>kubectl api-resources</code> with the <code>--verbs</code> flag.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=c1>## List all resources that support the &quot;list&quot; verb</span>
</span><span id=__span-72-2><a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>list
</span><span id=__span-72-3><a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a>
</span><span id=__span-72-4><a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a><span class=c1>## List resources that support both &quot;list&quot; and &quot;watch&quot; (for informer-based controllers)</span>
</span><span id=__span-72-5><a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>list,watch
</span><span id=__span-72-6><a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a>
</span><span id=__span-72-7><a id=__codelineno-72-7 name=__codelineno-72-7 href=#__codelineno-72-7></a><span class=c1>## List resources that support &quot;create&quot; (can be created)</span>
</span><span id=__span-72-8><a id=__codelineno-72-8 name=__codelineno-72-8 href=#__codelineno-72-8></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>create
</span><span id=__span-72-9><a id=__codelineno-72-9 name=__codelineno-72-9 href=#__codelineno-72-9></a>
</span><span id=__span-72-10><a id=__codelineno-72-10 name=__codelineno-72-10 href=#__codelineno-72-10></a><span class=c1>## List resources that can be deleted</span>
</span><span id=__span-72-11><a id=__codelineno-72-11 name=__codelineno-72-11 href=#__codelineno-72-11></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>delete
</span><span id=__span-72-12><a id=__codelineno-72-12 name=__codelineno-72-12 href=#__codelineno-72-12></a>
</span><span id=__span-72-13><a id=__codelineno-72-13 name=__codelineno-72-13 href=#__codelineno-72-13></a><span class=c1>## Find resources that support the &quot;patch&quot; verb</span>
</span><span id=__span-72-14><a id=__codelineno-72-14 name=__codelineno-72-14 href=#__codelineno-72-14></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>patch
</span><span id=__span-72-15><a id=__codelineno-72-15 name=__codelineno-72-15 href=#__codelineno-72-15></a>
</span><span id=__span-72-16><a id=__codelineno-72-16 name=__codelineno-72-16 href=#__codelineno-72-16></a><span class=c1>## Combine with namespace filter to show only namespaced resources that support list</span>
</span><span id=__span-72-17><a id=__codelineno-72-17 name=__codelineno-72-17 href=#__codelineno-72-17></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>list<span class=w> </span>--namespaced<span class=o>=</span><span class=nb>true</span>
</span><span id=__span-72-18><a id=__codelineno-72-18 name=__codelineno-72-18 href=#__codelineno-72-18></a>
</span><span id=__span-72-19><a id=__codelineno-72-19 name=__codelineno-72-19 href=#__codelineno-72-19></a><span class=c1>## Count resources by API group</span>
</span><span id=__span-72-20><a id=__codelineno-72-20 name=__codelineno-72-20 href=#__codelineno-72-20></a>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>list<span class=w> </span>-o<span class=w> </span>name<span class=w> </span><span class=p>|</span><span class=w> </span>cut<span class=w> </span>-d.<span class=w> </span>-f2-<span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span><span class=p>|</span><span class=w> </span>uniq<span class=w> </span>-c<span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=w> </span>-rn
</span><span id=__span-72-21><a id=__codelineno-72-21 name=__codelineno-72-21 href=#__codelineno-72-21></a>
</span><span id=__span-72-22><a id=__codelineno-72-22 name=__codelineno-72-22 href=#__codelineno-72-22></a><span class=c1>## Find resources that DON&#39;T support create (read-only resources)</span>
</span><span id=__span-72-23><a id=__codelineno-72-23 name=__codelineno-72-23 href=#__codelineno-72-23></a><span class=c1>## Compare the full list with create-supporting resources</span>
</span><span id=__span-72-24><a id=__codelineno-72-24 name=__codelineno-72-24 href=#__codelineno-72-24></a>diff<span class=w> </span>&lt;<span class=o>(</span>kubectl<span class=w> </span>api-resources<span class=w> </span>-o<span class=w> </span>name<span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=o>)</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-72-25><a id=__codelineno-72-25 name=__codelineno-72-25 href=#__codelineno-72-25></a><span class=w>     </span>&lt;<span class=o>(</span>kubectl<span class=w> </span>api-resources<span class=w> </span>--verbs<span class=o>=</span>create<span class=w> </span>-o<span class=w> </span>name<span class=w> </span><span class=p>|</span><span class=w> </span>sort<span class=o>)</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-72-26><a id=__codelineno-72-26 name=__codelineno-72-26 href=#__codelineno-72-26></a><span class=w>     </span>grep<span class=w> </span><span class=s1>&#39;^&lt;&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sed<span class=w> </span><span class=s1>&#39;s/&lt; //&#39;</span>
</span></code></pre></div> </details> <hr> <h4 id=10-check-service-account-permissions>10. Check Service Account Permissions<a class=headerlink href=#10-check-service-account-permissions title="Permanent link">&para;</a></h4> <p>Use <code>kubectl auth can-i</code> to check what a specific service account is allowed to do.</p> <h4 id=scenario_9>Scenario:<a class=headerlink href=#scenario_9 title="Permanent link">&para;</a></h4> <p> A team member reports that their application (running as a service account) cannot access certain resources.  You need to diagnose the exact RBAC permissions.</p> <p><strong>Hint:</strong> Use <code>kubectl auth can-i</code> with the <code>--as=system:serviceaccount:&lt;namespace&gt;:&lt;name&gt;</code> flag and <code>--list</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=c1>## Make sure RBAC resources are deployed</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>manifests/rbac-demo.yaml
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a>
</span><span id=__span-73-4><a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=c1>## Check if lab-viewer can list pods (should be YES)</span>
</span><span id=__span-73-5><a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>list<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-6><a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-7><a id=__codelineno-73-7 name=__codelineno-73-7 href=#__codelineno-73-7></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-8><a id=__codelineno-73-8 name=__codelineno-73-8 href=#__codelineno-73-8></a>
</span><span id=__span-73-9><a id=__codelineno-73-9 name=__codelineno-73-9 href=#__codelineno-73-9></a><span class=c1>## Check if lab-viewer can create pods (should be NO)</span>
</span><span id=__span-73-10><a id=__codelineno-73-10 name=__codelineno-73-10 href=#__codelineno-73-10></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>create<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-11><a id=__codelineno-73-11 name=__codelineno-73-11 href=#__codelineno-73-11></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-12><a id=__codelineno-73-12 name=__codelineno-73-12 href=#__codelineno-73-12></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-13><a id=__codelineno-73-13 name=__codelineno-73-13 href=#__codelineno-73-13></a>
</span><span id=__span-73-14><a id=__codelineno-73-14 name=__codelineno-73-14 href=#__codelineno-73-14></a><span class=c1>## Check if lab-viewer can read pod logs (should be YES, per the Role definition)</span>
</span><span id=__span-73-15><a id=__codelineno-73-15 name=__codelineno-73-15 href=#__codelineno-73-15></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>get<span class=w> </span>pods/log<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-16><a id=__codelineno-73-16 name=__codelineno-73-16 href=#__codelineno-73-16></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-17><a id=__codelineno-73-17 name=__codelineno-73-17 href=#__codelineno-73-17></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-18><a id=__codelineno-73-18 name=__codelineno-73-18 href=#__codelineno-73-18></a>
</span><span id=__span-73-19><a id=__codelineno-73-19 name=__codelineno-73-19 href=#__codelineno-73-19></a><span class=c1>## Check if lab-viewer can delete deployments (should be NO)</span>
</span><span id=__span-73-20><a id=__codelineno-73-20 name=__codelineno-73-20 href=#__codelineno-73-20></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>delete<span class=w> </span>deployments<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-21><a id=__codelineno-73-21 name=__codelineno-73-21 href=#__codelineno-73-21></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-22><a id=__codelineno-73-22 name=__codelineno-73-22 href=#__codelineno-73-22></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-23><a id=__codelineno-73-23 name=__codelineno-73-23 href=#__codelineno-73-23></a>
</span><span id=__span-73-24><a id=__codelineno-73-24 name=__codelineno-73-24 href=#__codelineno-73-24></a><span class=c1>## List ALL permissions for the lab-viewer service account</span>
</span><span id=__span-73-25><a id=__codelineno-73-25 name=__codelineno-73-25 href=#__codelineno-73-25></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>--list<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-26><a id=__codelineno-73-26 name=__codelineno-73-26 href=#__codelineno-73-26></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-viewer<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-27><a id=__codelineno-73-27 name=__codelineno-73-27 href=#__codelineno-73-27></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-28><a id=__codelineno-73-28 name=__codelineno-73-28 href=#__codelineno-73-28></a>
</span><span id=__span-73-29><a id=__codelineno-73-29 name=__codelineno-73-29 href=#__codelineno-73-29></a><span class=c1>## Check the restricted service account (should have NO permissions)</span>
</span><span id=__span-73-30><a id=__codelineno-73-30 name=__codelineno-73-30 href=#__codelineno-73-30></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>--list<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-31><a id=__codelineno-73-31 name=__codelineno-73-31 href=#__codelineno-73-31></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-restricted<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-32><a id=__codelineno-73-32 name=__codelineno-73-32 href=#__codelineno-73-32></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-73-33><a id=__codelineno-73-33 name=__codelineno-73-33 href=#__codelineno-73-33></a>
</span><span id=__span-73-34><a id=__codelineno-73-34 name=__codelineno-73-34 href=#__codelineno-73-34></a><span class=c1>## Check if the restricted account can even list pods (should be NO)</span>
</span><span id=__span-73-35><a id=__codelineno-73-35 name=__codelineno-73-35 href=#__codelineno-73-35></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>list<span class=w> </span>pods<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-36><a id=__codelineno-73-36 name=__codelineno-73-36 href=#__codelineno-73-36></a><span class=w>  </span>--as<span class=o>=</span>system:serviceaccount:kubectl-lab:lab-restricted<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-37><a id=__codelineno-73-37 name=__codelineno-73-37 href=#__codelineno-73-37></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab
</span></code></pre></div> </details> <hr> <h4 id=11-generate-a-csv-with-go-templates>11. Generate a CSV with Go Templates<a class=headerlink href=#11-generate-a-csv-with-go-templates title="Permanent link">&para;</a></h4> <p>Use go-template output formatting to generate a CSV of pod information (name, namespace, status, IP, node).</p> <h4 id=scenario_10>Scenario:<a class=headerlink href=#scenario_10 title="Permanent link">&para;</a></h4> <p> You need to export pod information to a spreadsheet or feed it into another tool.  Go templates give you complete control over output formatting.</p> <p><strong>Hint:</strong> Use <code>-o go-template</code> with <code>{{range .items}}</code> and <code>{{"\n"}}</code> for newlines.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=c1>## Generate a CSV header and data for all pods in the namespace</span>
</span><span id=__span-74-2><a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;NAME,NAMESPACE,STATUS,POD_IP,NODE&quot;</span>
</span><span id=__span-74-3><a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-74-4><a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=w>  </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{.metadata.name}},{{.metadata.namespace}},{{.status.phase}},{{.status.podIP}},{{.spec.nodeName}}{{&quot;\n&quot;}}{{end}}&#39;</span>
</span><span id=__span-74-5><a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a>
</span><span id=__span-74-6><a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a><span class=c1>## Generate CSV for all namespaces</span>
</span><span id=__span-74-7><a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;NAME,NAMESPACE,STATUS,POD_IP,NODE&quot;</span>
</span><span id=__span-74-8><a id=__codelineno-74-8 name=__codelineno-74-8 href=#__codelineno-74-8></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-74-9><a id=__codelineno-74-9 name=__codelineno-74-9 href=#__codelineno-74-9></a><span class=w>  </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{.metadata.name}},{{.metadata.namespace}},{{.status.phase}},{{.status.podIP}},{{.spec.nodeName}}{{&quot;\n&quot;}}{{end}}&#39;</span>
</span><span id=__span-74-10><a id=__codelineno-74-10 name=__codelineno-74-10 href=#__codelineno-74-10></a>
</span><span id=__span-74-11><a id=__codelineno-74-11 name=__codelineno-74-11 href=#__codelineno-74-11></a><span class=c1>## Generate CSV with container information</span>
</span><span id=__span-74-12><a id=__codelineno-74-12 name=__codelineno-74-12 href=#__codelineno-74-12></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;POD,CONTAINER,IMAGE&quot;</span>
</span><span id=__span-74-13><a id=__codelineno-74-13 name=__codelineno-74-13 href=#__codelineno-74-13></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-74-14><a id=__codelineno-74-14 name=__codelineno-74-14 href=#__codelineno-74-14></a><span class=w>  </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{$pod := .metadata.name}}{{range .spec.containers}}{{$pod}},{{.name}},{{.image}}{{&quot;\n&quot;}}{{end}}{{end}}&#39;</span>
</span><span id=__span-74-15><a id=__codelineno-74-15 name=__codelineno-74-15 href=#__codelineno-74-15></a>
</span><span id=__span-74-16><a id=__codelineno-74-16 name=__codelineno-74-16 href=#__codelineno-74-16></a><span class=c1>## Save to a file</span>
</span><span id=__span-74-17><a id=__codelineno-74-17 name=__codelineno-74-17 href=#__codelineno-74-17></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;NAME,NAMESPACE,STATUS,POD_IP,NODE&quot;</span><span class=w> </span>&gt;<span class=w> </span>/tmp/pods.csv
</span><span id=__span-74-18><a id=__codelineno-74-18 name=__codelineno-74-18 href=#__codelineno-74-18></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-74-19><a id=__codelineno-74-19 name=__codelineno-74-19 href=#__codelineno-74-19></a><span class=w>  </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{.metadata.name}},{{.metadata.namespace}},{{.status.phase}},{{.status.podIP}},{{.spec.nodeName}}{{&quot;\n&quot;}}{{end}}&#39;</span><span class=w> </span>&gt;&gt;<span class=w> </span>/tmp/pods.csv
</span><span id=__span-74-20><a id=__codelineno-74-20 name=__codelineno-74-20 href=#__codelineno-74-20></a>
</span><span id=__span-74-21><a id=__codelineno-74-21 name=__codelineno-74-21 href=#__codelineno-74-21></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;CSV saved to /tmp/pods.csv&quot;</span>
</span><span id=__span-74-22><a id=__codelineno-74-22 name=__codelineno-74-22 href=#__codelineno-74-22></a>cat<span class=w> </span>/tmp/pods.csv
</span><span id=__span-74-23><a id=__codelineno-74-23 name=__codelineno-74-23 href=#__codelineno-74-23></a>
</span><span id=__span-74-24><a id=__codelineno-74-24 name=__codelineno-74-24 href=#__codelineno-74-24></a><span class=c1>## Clean up</span>
</span><span id=__span-74-25><a id=__codelineno-74-25 name=__codelineno-74-25 href=#__codelineno-74-25></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/pods.csv
</span></code></pre></div> </details> <hr> <h4 id=12-wait-for-a-deployment-rollout>12. Wait for a Deployment Rollout<a class=headerlink href=#12-wait-for-a-deployment-rollout title="Permanent link">&para;</a></h4> <p>Use <code>kubectl wait</code> to block until a deployment is fully rolled out with all replicas available.</p> <h4 id=scenario_11>Scenario:<a class=headerlink href=#scenario_11 title="Permanent link">&para;</a></h4> <p> In a CI/CD pipeline, you need to wait for a deployment to be fully ready before proceeding with integration tests.  <code>kubectl wait</code> is designed exactly for this purpose - it exits with code 0 when the condition is met.</p> <p><strong>Hint:</strong> Use <code>kubectl wait --for=condition=available</code> or <code>kubectl rollout status</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=c1>## Method 1: kubectl wait with condition</span>
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a><span class=c1>## Wait for the deployment to report the Available condition as True</span>
</span><span id=__span-75-3><a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>available<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-75-4><a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-75-5><a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a>
</span><span id=__span-75-6><a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a><span class=c1>## Method 2: kubectl rollout status (blocks until complete)</span>
</span><span id=__span-75-7><a id=__codelineno-75-7 name=__codelineno-75-7 href=#__codelineno-75-7></a>kubectl<span class=w> </span>rollout<span class=w> </span>status<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-75-8><a id=__codelineno-75-8 name=__codelineno-75-8 href=#__codelineno-75-8></a>
</span><span id=__span-75-9><a id=__codelineno-75-9 name=__codelineno-75-9 href=#__codelineno-75-9></a><span class=c1>## Method 3: Wait for a specific number of ready replicas using JSONPath</span>
</span><span id=__span-75-10><a id=__codelineno-75-10 name=__codelineno-75-10 href=#__codelineno-75-10></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.status.readyReplicas}&#39;</span><span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-75-11><a id=__codelineno-75-11 name=__codelineno-75-11 href=#__codelineno-75-11></a><span class=w>  </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-75-12><a id=__codelineno-75-12 name=__codelineno-75-12 href=#__codelineno-75-12></a>
</span><span id=__span-75-13><a id=__codelineno-75-13 name=__codelineno-75-13 href=#__codelineno-75-13></a><span class=c1>## Simulate a rollout and wait for it</span>
</span><span id=__span-75-14><a id=__codelineno-75-14 name=__codelineno-75-14 href=#__codelineno-75-14></a><span class=c1>## Step 1: Trigger a rolling update</span>
</span><span id=__span-75-15><a id=__codelineno-75-15 name=__codelineno-75-15 href=#__codelineno-75-15></a>kubectl<span class=w> </span><span class=nb>set</span><span class=w> </span>image<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=nv>nginx</span><span class=o>=</span>nginx:1.25-alpine<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-75-16><a id=__codelineno-75-16 name=__codelineno-75-16 href=#__codelineno-75-16></a>
</span><span id=__span-75-17><a id=__codelineno-75-17 name=__codelineno-75-17 href=#__codelineno-75-17></a><span class=c1>## Step 2: Wait for the rollout to complete</span>
</span><span id=__span-75-18><a id=__codelineno-75-18 name=__codelineno-75-18 href=#__codelineno-75-18></a>kubectl<span class=w> </span>rollout<span class=w> </span>status<span class=w> </span>deployment/nginx-lab<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-75-19><a id=__codelineno-75-19 name=__codelineno-75-19 href=#__codelineno-75-19></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Rollout complete! Deployment is ready.&quot;</span>
</span><span id=__span-75-20><a id=__codelineno-75-20 name=__codelineno-75-20 href=#__codelineno-75-20></a>
</span><span id=__span-75-21><a id=__codelineno-75-21 name=__codelineno-75-21 href=#__codelineno-75-21></a><span class=c1>## Method 4: Wait for all pods to be Ready</span>
</span><span id=__span-75-22><a id=__codelineno-75-22 name=__codelineno-75-22 href=#__codelineno-75-22></a>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>Ready<span class=w> </span>pod<span class=w> </span>-l<span class=w> </span><span class=nv>app</span><span class=o>=</span>nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-75-23><a id=__codelineno-75-23 name=__codelineno-75-23 href=#__codelineno-75-23></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>120s
</span><span id=__span-75-24><a id=__codelineno-75-24 name=__codelineno-75-24 href=#__codelineno-75-24></a>
</span><span id=__span-75-25><a id=__codelineno-75-25 name=__codelineno-75-25 href=#__codelineno-75-25></a><span class=c1>## Use in a script (checking exit code)</span>
</span><span id=__span-75-26><a id=__codelineno-75-26 name=__codelineno-75-26 href=#__codelineno-75-26></a><span class=k>if</span><span class=w> </span>kubectl<span class=w> </span><span class=nb>wait</span><span class=w> </span>--for<span class=o>=</span><span class=nv>condition</span><span class=o>=</span>available<span class=w> </span>deployment/nginx-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-75-27><a id=__codelineno-75-27 name=__codelineno-75-27 href=#__codelineno-75-27></a><span class=w>  </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--timeout<span class=o>=</span>60s<span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-75-28><a id=__codelineno-75-28 name=__codelineno-75-28 href=#__codelineno-75-28></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Deployment is ready, proceeding with tests...&quot;</span>
</span><span id=__span-75-29><a id=__codelineno-75-29 name=__codelineno-75-29 href=#__codelineno-75-29></a><span class=k>else</span>
</span><span id=__span-75-30><a id=__codelineno-75-30 name=__codelineno-75-30 href=#__codelineno-75-30></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Deployment failed to become ready within timeout!&quot;</span>
</span><span id=__span-75-31><a id=__codelineno-75-31 name=__codelineno-75-31 href=#__codelineno-75-31></a><span class=w>  </span><span class=nb>exit</span><span class=w> </span><span class=m>1</span>
</span><span id=__span-75-32><a id=__codelineno-75-32 name=__codelineno-75-32 href=#__codelineno-75-32></a><span class=k>fi</span>
</span></code></pre></div> </details> <hr> <h4 id=13-access-the-api-via-kubectl-proxy>13. Access the API via kubectl proxy<a class=headerlink href=#13-access-the-api-via-kubectl-proxy title="Permanent link">&para;</a></h4> <p>Use <code>kubectl proxy</code> to access the Kubernetes API server via a local HTTP proxy without authentication.</p> <h4 id=scenario_12>Scenario:<a class=headerlink href=#scenario_12 title="Permanent link">&para;</a></h4> <p> You want to explore the Kubernetes API using <code>curl</code> or a web browser for debugging or learning.  <code>kubectl proxy</code> handles all the authentication so you can make simple HTTP requests.</p> <p><strong>Hint:</strong> Start the proxy with <code>kubectl proxy &amp;</code>, then use <code>curl http://localhost:8001/api/...</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a><span class=c1>## Start the kubectl proxy in the background on port 8001</span>
</span><span id=__span-76-2><a id=__codelineno-76-2 name=__codelineno-76-2 href=#__codelineno-76-2></a>kubectl<span class=w> </span>proxy<span class=w> </span>--port<span class=o>=</span><span class=m>8001</span><span class=w> </span><span class=p>&amp;</span>
</span><span id=__span-76-3><a id=__codelineno-76-3 name=__codelineno-76-3 href=#__codelineno-76-3></a><span class=nv>PROXY_PID</span><span class=o>=</span><span class=nv>$!</span>
</span><span id=__span-76-4><a id=__codelineno-76-4 name=__codelineno-76-4 href=#__codelineno-76-4></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Proxy started with PID: </span><span class=si>${</span><span class=nv>PROXY_PID</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-76-5><a id=__codelineno-76-5 name=__codelineno-76-5 href=#__codelineno-76-5></a>
</span><span id=__span-76-6><a id=__codelineno-76-6 name=__codelineno-76-6 href=#__codelineno-76-6></a><span class=c1>## Wait a moment for the proxy to start</span>
</span><span id=__span-76-7><a id=__codelineno-76-7 name=__codelineno-76-7 href=#__codelineno-76-7></a>sleep<span class=w> </span><span class=m>2</span>
</span><span id=__span-76-8><a id=__codelineno-76-8 name=__codelineno-76-8 href=#__codelineno-76-8></a>
</span><span id=__span-76-9><a id=__codelineno-76-9 name=__codelineno-76-9 href=#__codelineno-76-9></a><span class=c1>## List the core API versions</span>
</span><span id=__span-76-10><a id=__codelineno-76-10 name=__codelineno-76-10 href=#__codelineno-76-10></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.versions&#39;</span>
</span><span id=__span-76-11><a id=__codelineno-76-11 name=__codelineno-76-11 href=#__codelineno-76-11></a>
</span><span id=__span-76-12><a id=__codelineno-76-12 name=__codelineno-76-12 href=#__codelineno-76-12></a><span class=c1>## List all pods in the kubectl-lab namespace</span>
</span><span id=__span-76-13><a id=__codelineno-76-13 name=__codelineno-76-13 href=#__codelineno-76-13></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api/v1/namespaces/kubectl-lab/pods<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-76-14><a id=__codelineno-76-14 name=__codelineno-76-14 href=#__codelineno-76-14></a><span class=w>  </span>jq<span class=w> </span><span class=s1>&#39;.items[].metadata.name&#39;</span>
</span><span id=__span-76-15><a id=__codelineno-76-15 name=__codelineno-76-15 href=#__codelineno-76-15></a>
</span><span id=__span-76-16><a id=__codelineno-76-16 name=__codelineno-76-16 href=#__codelineno-76-16></a><span class=c1>## Get a specific deployment</span>
</span><span id=__span-76-17><a id=__codelineno-76-17 name=__codelineno-76-17 href=#__codelineno-76-17></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/apis/apps/v1/namespaces/kubectl-lab/deployments/nginx-lab<span class=w> </span><span class=p>|</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-76-18><a id=__codelineno-76-18 name=__codelineno-76-18 href=#__codelineno-76-18></a><span class=w>  </span>jq<span class=w> </span><span class=s1>&#39;{name: .metadata.name, replicas: .spec.replicas, availableReplicas: .status.availableReplicas}&#39;</span>
</span><span id=__span-76-19><a id=__codelineno-76-19 name=__codelineno-76-19 href=#__codelineno-76-19></a>
</span><span id=__span-76-20><a id=__codelineno-76-20 name=__codelineno-76-20 href=#__codelineno-76-20></a><span class=c1>## List all namespaces</span>
</span><span id=__span-76-21><a id=__codelineno-76-21 name=__codelineno-76-21 href=#__codelineno-76-21></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/api/v1/namespaces<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[].metadata.name&#39;</span>
</span><span id=__span-76-22><a id=__codelineno-76-22 name=__codelineno-76-22 href=#__codelineno-76-22></a>
</span><span id=__span-76-23><a id=__codelineno-76-23 name=__codelineno-76-23 href=#__codelineno-76-23></a><span class=c1>## Check the API server health</span>
</span><span id=__span-76-24><a id=__codelineno-76-24 name=__codelineno-76-24 href=#__codelineno-76-24></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Health: </span><span class=k>$(</span>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/healthz<span class=k>)</span><span class=s2>&quot;</span>
</span><span id=__span-76-25><a id=__codelineno-76-25 name=__codelineno-76-25 href=#__codelineno-76-25></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Ready:  </span><span class=k>$(</span>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/readyz<span class=k>)</span><span class=s2>&quot;</span>
</span><span id=__span-76-26><a id=__codelineno-76-26 name=__codelineno-76-26 href=#__codelineno-76-26></a>
</span><span id=__span-76-27><a id=__codelineno-76-27 name=__codelineno-76-27 href=#__codelineno-76-27></a><span class=c1>## List all API groups</span>
</span><span id=__span-76-28><a id=__codelineno-76-28 name=__codelineno-76-28 href=#__codelineno-76-28></a>curl<span class=w> </span>-s<span class=w> </span>http://localhost:8001/apis<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.groups[].name&#39;</span>
</span><span id=__span-76-29><a id=__codelineno-76-29 name=__codelineno-76-29 href=#__codelineno-76-29></a>
</span><span id=__span-76-30><a id=__codelineno-76-30 name=__codelineno-76-30 href=#__codelineno-76-30></a><span class=c1>## Stop the proxy</span>
</span><span id=__span-76-31><a id=__codelineno-76-31 name=__codelineno-76-31 href=#__codelineno-76-31></a><span class=nb>kill</span><span class=w> </span><span class=si>${</span><span class=nv>PROXY_PID</span><span class=si>}</span>
</span><span id=__span-76-32><a id=__codelineno-76-32 name=__codelineno-76-32 href=#__codelineno-76-32></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Proxy stopped.&quot;</span>
</span></code></pre></div> </details> <hr> <h4 id=14-create-a-custom-kubectl-alias-script>14. Create a Custom kubectl Alias Script<a class=headerlink href=#14-create-a-custom-kubectl-alias-script title="Permanent link">&para;</a></h4> <p>Create a shell function or alias that shows pods alongside their resource requests and limits.</p> <h4 id=scenario_13>Scenario:<a class=headerlink href=#scenario_13 title="Permanent link">&para;</a></h4> <p> You frequently need to check pod resource allocation to debug scheduling and OOM issues.  A custom alias saves you from typing complex JSONPath expressions every time.</p> <p><strong>Hint:</strong> Create a shell function that uses <code>-o custom-columns</code> or <code>-o go-template</code> with resource fields.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=c1>## Method 1: Shell function using custom-columns</span>
</span><span id=__span-77-2><a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>kpod_resources<span class=o>()</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-77-3><a id=__codelineno-77-3 name=__codelineno-77-3 href=#__codelineno-77-3></a><span class=w>  </span><span class=nb>local</span><span class=w> </span><span class=nv>ns</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>${</span><span class=nv>1</span><span class=k>:-</span><span class=p>--all-namespaces</span><span class=si>}</span><span class=s2>&quot;</span>
</span><span id=__span-77-4><a id=__codelineno-77-4 name=__codelineno-77-4 href=#__codelineno-77-4></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$ns</span><span class=s2>&quot;</span><span class=w> </span>!<span class=o>=</span><span class=w> </span><span class=s2>&quot;--all-namespaces&quot;</span><span class=w> </span><span class=o>]</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=o>[</span><span class=w> </span><span class=s2>&quot;</span><span class=nv>$ns</span><span class=s2>&quot;</span><span class=w> </span>!<span class=o>=</span><span class=w> </span><span class=s2>&quot;-A&quot;</span><span class=w> </span><span class=o>]</span><span class=p>;</span><span class=w> </span><span class=k>then</span>
</span><span id=__span-77-5><a id=__codelineno-77-5 name=__codelineno-77-5 href=#__codelineno-77-5></a><span class=w>    </span><span class=nv>ns</span><span class=o>=</span><span class=s2>&quot;-n </span><span class=nv>$ns</span><span class=s2>&quot;</span>
</span><span id=__span-77-6><a id=__codelineno-77-6 name=__codelineno-77-6 href=#__codelineno-77-6></a><span class=w>  </span><span class=k>fi</span>
</span><span id=__span-77-7><a id=__codelineno-77-7 name=__codelineno-77-7 href=#__codelineno-77-7></a><span class=w>  </span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span><span class=si>${</span><span class=nv>ns</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-77-8><a id=__codelineno-77-8 name=__codelineno-77-8 href=#__codelineno-77-8></a><span class=w>    </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-77-9><a id=__codelineno-77-9 name=__codelineno-77-9 href=#__codelineno-77-9></a><span class=s1>NAMESPACE:.metadata.namespace,\</span>
</span><span id=__span-77-10><a id=__codelineno-77-10 name=__codelineno-77-10 href=#__codelineno-77-10></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-77-11><a id=__codelineno-77-11 name=__codelineno-77-11 href=#__codelineno-77-11></a><span class=s1>CPU_REQ:.spec.containers[0].resources.requests.cpu,\</span>
</span><span id=__span-77-12><a id=__codelineno-77-12 name=__codelineno-77-12 href=#__codelineno-77-12></a><span class=s1>CPU_LIM:.spec.containers[0].resources.limits.cpu,\</span>
</span><span id=__span-77-13><a id=__codelineno-77-13 name=__codelineno-77-13 href=#__codelineno-77-13></a><span class=s1>MEM_REQ:.spec.containers[0].resources.requests.memory,\</span>
</span><span id=__span-77-14><a id=__codelineno-77-14 name=__codelineno-77-14 href=#__codelineno-77-14></a><span class=s1>MEM_LIM:.spec.containers[0].resources.limits.memory,\</span>
</span><span id=__span-77-15><a id=__codelineno-77-15 name=__codelineno-77-15 href=#__codelineno-77-15></a><span class=s1>STATUS:.status.phase&#39;</span>
</span><span id=__span-77-16><a id=__codelineno-77-16 name=__codelineno-77-16 href=#__codelineno-77-16></a><span class=o>}</span>
</span><span id=__span-77-17><a id=__codelineno-77-17 name=__codelineno-77-17 href=#__codelineno-77-17></a>
</span><span id=__span-77-18><a id=__codelineno-77-18 name=__codelineno-77-18 href=#__codelineno-77-18></a><span class=c1>## Use it for a specific namespace</span>
</span><span id=__span-77-19><a id=__codelineno-77-19 name=__codelineno-77-19 href=#__codelineno-77-19></a>kpod_resources<span class=w> </span>kubectl-lab
</span><span id=__span-77-20><a id=__codelineno-77-20 name=__codelineno-77-20 href=#__codelineno-77-20></a>
</span><span id=__span-77-21><a id=__codelineno-77-21 name=__codelineno-77-21 href=#__codelineno-77-21></a><span class=c1>## Use it for all namespaces</span>
</span><span id=__span-77-22><a id=__codelineno-77-22 name=__codelineno-77-22 href=#__codelineno-77-22></a>kpod_resources<span class=w> </span>--all-namespaces
</span><span id=__span-77-23><a id=__codelineno-77-23 name=__codelineno-77-23 href=#__codelineno-77-23></a>
</span><span id=__span-77-24><a id=__codelineno-77-24 name=__codelineno-77-24 href=#__codelineno-77-24></a><span class=c1>## Method 2: Shell function using go-template for CSV-style output</span>
</span><span id=__span-77-25><a id=__codelineno-77-25 name=__codelineno-77-25 href=#__codelineno-77-25></a>kpod_csv<span class=o>()</span><span class=w> </span><span class=o>{</span>
</span><span id=__span-77-26><a id=__codelineno-77-26 name=__codelineno-77-26 href=#__codelineno-77-26></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;NAMESPACE,POD,CONTAINER,CPU_REQ,CPU_LIM,MEM_REQ,MEM_LIM&quot;</span>
</span><span id=__span-77-27><a id=__codelineno-77-27 name=__codelineno-77-27 href=#__codelineno-77-27></a><span class=w>  </span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span><span class=s2>&quot;</span><span class=si>${</span><span class=p>@</span><span class=si>}</span><span class=s2>&quot;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-77-28><a id=__codelineno-77-28 name=__codelineno-77-28 href=#__codelineno-77-28></a><span class=w>    </span>-o<span class=w> </span>go-template<span class=o>=</span><span class=s1>&#39;{{range .items}}{{$ns := .metadata.namespace}}{{$pod := .metadata.name}}{{range .spec.containers}}{{$ns}},{{$pod}},{{.name}},{{if .resources.requests.cpu}}{{.resources.requests.cpu}}{{else}}&lt;none&gt;{{end}},{{if .resources.limits.cpu}}{{.resources.limits.cpu}}{{else}}&lt;none&gt;{{end}},{{if .resources.requests.memory}}{{.resources.requests.memory}}{{else}}&lt;none&gt;{{end}},{{if .resources.limits.memory}}{{.resources.limits.memory}}{{else}}&lt;none&gt;{{end}}{{&quot;\n&quot;}}{{end}}{{end}}&#39;</span>
</span><span id=__span-77-29><a id=__codelineno-77-29 name=__codelineno-77-29 href=#__codelineno-77-29></a><span class=o>}</span>
</span><span id=__span-77-30><a id=__codelineno-77-30 name=__codelineno-77-30 href=#__codelineno-77-30></a>
</span><span id=__span-77-31><a id=__codelineno-77-31 name=__codelineno-77-31 href=#__codelineno-77-31></a><span class=c1>## Use it</span>
</span><span id=__span-77-32><a id=__codelineno-77-32 name=__codelineno-77-32 href=#__codelineno-77-32></a>kpod_csv<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-77-33><a id=__codelineno-77-33 name=__codelineno-77-33 href=#__codelineno-77-33></a>
</span><span id=__span-77-34><a id=__codelineno-77-34 name=__codelineno-77-34 href=#__codelineno-77-34></a><span class=c1>## To make these permanent, add them to ~/.bashrc or ~/.zshrc</span>
</span></code></pre></div> </details> <hr> <h4 id=15-find-resource-hungry-pods-with-kubectl-top>15. Find Resource-Hungry Pods with kubectl top<a class=headerlink href=#15-find-resource-hungry-pods-with-kubectl-top title="Permanent link">&para;</a></h4> <p>Use <code>kubectl top</code> with <code>--sort-by</code> to find the most resource-hungry pods in the cluster.</p> <h4 id=scenario_14>Scenario:<a class=headerlink href=#scenario_14 title="Permanent link">&para;</a></h4> <p> The cluster is running low on resources and you need to identify which pods are consuming the most CPU and memory.  <code>kubectl top</code> provides real-time resource consumption data (requires metrics-server).</p> <p><strong>Hint:</strong> Use <code>kubectl top pods --sort-by=cpu</code> or <code>--sort-by=memory</code> with <code>--all-namespaces</code>.</p> <details> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=c1>## NOTE: These commands require metrics-server to be installed in the cluster</span>
</span><span id=__span-78-2><a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=c1>## Install metrics-server if not present:</span>
</span><span id=__span-78-3><a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=c1>## kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</span>
</span><span id=__span-78-4><a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a>
</span><span id=__span-78-5><a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=c1>## Find top CPU consumers across all namespaces</span>
</span><span id=__span-78-6><a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-7><a id=__codelineno-78-7 name=__codelineno-78-7 href=#__codelineno-78-7></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed. Install it first.&quot;</span>
</span><span id=__span-78-8><a id=__codelineno-78-8 name=__codelineno-78-8 href=#__codelineno-78-8></a>
</span><span id=__span-78-9><a id=__codelineno-78-9 name=__codelineno-78-9 href=#__codelineno-78-9></a><span class=c1>## Find top memory consumers across all namespaces</span>
</span><span id=__span-78-10><a id=__codelineno-78-10 name=__codelineno-78-10 href=#__codelineno-78-10></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>--all-namespaces<span class=w> </span>--sort-by<span class=o>=</span>memory<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-20<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-11><a id=__codelineno-78-11 name=__codelineno-78-11 href=#__codelineno-78-11></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed. Install it first.&quot;</span>
</span><span id=__span-78-12><a id=__codelineno-78-12 name=__codelineno-78-12 href=#__codelineno-78-12></a>
</span><span id=__span-78-13><a id=__codelineno-78-13 name=__codelineno-78-13 href=#__codelineno-78-13></a><span class=c1>## Find top CPU consumers in a specific namespace</span>
</span><span id=__span-78-14><a id=__codelineno-78-14 name=__codelineno-78-14 href=#__codelineno-78-14></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-15><a id=__codelineno-78-15 name=__codelineno-78-15 href=#__codelineno-78-15></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed.&quot;</span>
</span><span id=__span-78-16><a id=__codelineno-78-16 name=__codelineno-78-16 href=#__codelineno-78-16></a>
</span><span id=__span-78-17><a id=__codelineno-78-17 name=__codelineno-78-17 href=#__codelineno-78-17></a><span class=c1>## Show per-container resource usage</span>
</span><span id=__span-78-18><a id=__codelineno-78-18 name=__codelineno-78-18 href=#__codelineno-78-18></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--containers<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-19><a id=__codelineno-78-19 name=__codelineno-78-19 href=#__codelineno-78-19></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed.&quot;</span>
</span><span id=__span-78-20><a id=__codelineno-78-20 name=__codelineno-78-20 href=#__codelineno-78-20></a>
</span><span id=__span-78-21><a id=__codelineno-78-21 name=__codelineno-78-21 href=#__codelineno-78-21></a><span class=c1>## Node resource usage (to check overall cluster capacity)</span>
</span><span id=__span-78-22><a id=__codelineno-78-22 name=__codelineno-78-22 href=#__codelineno-78-22></a>kubectl<span class=w> </span>top<span class=w> </span>nodes<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-23><a id=__codelineno-78-23 name=__codelineno-78-23 href=#__codelineno-78-23></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server not installed.&quot;</span>
</span><span id=__span-78-24><a id=__codelineno-78-24 name=__codelineno-78-24 href=#__codelineno-78-24></a>
</span><span id=__span-78-25><a id=__codelineno-78-25 name=__codelineno-78-25 href=#__codelineno-78-25></a><span class=c1>## Combine with other commands for a complete picture</span>
</span><span id=__span-78-26><a id=__codelineno-78-26 name=__codelineno-78-26 href=#__codelineno-78-26></a><span class=c1>## Show pods sorted by CPU alongside their resource requests</span>
</span><span id=__span-78-27><a id=__codelineno-78-27 name=__codelineno-78-27 href=#__codelineno-78-27></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;=== Top CPU Pods ===&quot;</span>
</span><span id=__span-78-28><a id=__codelineno-78-28 name=__codelineno-78-28 href=#__codelineno-78-28></a>kubectl<span class=w> </span>top<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span>cpu<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server required&quot;</span>
</span><span id=__span-78-29><a id=__codelineno-78-29 name=__codelineno-78-29 href=#__codelineno-78-29></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;&quot;</span>
</span><span id=__span-78-30><a id=__codelineno-78-30 name=__codelineno-78-30 href=#__codelineno-78-30></a><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;=== Pod Resource Requests ===&quot;</span>
</span><span id=__span-78-31><a id=__codelineno-78-31 name=__codelineno-78-31 href=#__codelineno-78-31></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-32><a id=__codelineno-78-32 name=__codelineno-78-32 href=#__codelineno-78-32></a><span class=w>  </span>-o<span class=w> </span>custom-columns<span class=o>=</span><span class=s1>&#39;\</span>
</span><span id=__span-78-33><a id=__codelineno-78-33 name=__codelineno-78-33 href=#__codelineno-78-33></a><span class=s1>NAME:.metadata.name,\</span>
</span><span id=__span-78-34><a id=__codelineno-78-34 name=__codelineno-78-34 href=#__codelineno-78-34></a><span class=s1>CPU_REQ:.spec.containers[0].resources.requests.cpu,\</span>
</span><span id=__span-78-35><a id=__codelineno-78-35 name=__codelineno-78-35 href=#__codelineno-78-35></a><span class=s1>MEM_REQ:.spec.containers[0].resources.requests.memory&#39;</span>
</span></code></pre></div> </details> <hr> <h2 id=finalize-cleanup>Finalize &amp; Cleanup<a class=headerlink href=#finalize-cleanup title="Permanent link">&para;</a></h2> <ul> <li>To remove all resources created by this lab, run the following commands:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=c1>## Delete all lab resources by removing the namespace</span>
</span><span id=__span-79-2><a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a><span class=c1>## This deletes everything inside it (pods, deployments, services, roles, etc.)</span>
</span><span id=__span-79-3><a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a>kubectl<span class=w> </span>delete<span class=w> </span>namespace<span class=w> </span>kubectl-lab
</span><span id=__span-79-4><a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a>
</span><span id=__span-79-5><a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a><span class=c1>## Verify the namespace is deleted</span>
</span><span id=__span-79-6><a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a>kubectl<span class=w> </span>get<span class=w> </span>namespace<span class=w> </span>kubectl-lab<span class=w> </span><span class=m>2</span>&gt;<span class=p>&amp;</span><span class=m>1</span><span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;Namespace kubectl-lab deleted successfully&quot;</span>
</span></code></pre></div> <ul> <li>If you created any temporary files during the exercises:</li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=c1>## Clean up any temp files created during the lab</span>
</span><span id=__span-80-2><a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/from-pod.txt<span class=w> </span>/tmp/to-pod.txt<span class=w> </span>/tmp/broken-manifest.yaml
</span><span id=__span-80-3><a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/modified-deployment.yaml<span class=w> </span>/tmp/pods.csv
</span><span id=__span-80-4><a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a>rm<span class=w> </span>-rf<span class=w> </span>/tmp/nginx-config
</span><span id=__span-80-5><a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a>rm<span class=w> </span>-f<span class=w> </span>/tmp/kubectl-pod-count
</span></code></pre></div> <ul> <li>If you modified your shell configuration for aliases or completions, those changes persist in your <code>~/.bashrc</code> or <code>~/.zshrc</code> file. They are useful to keep.</li> </ul> <hr> <h2 id=troubleshooting>Troubleshooting<a class=headerlink href=#troubleshooting title="Permanent link">&para;</a></h2> <ul> <li><strong>kubectl: command not found:</strong></li> </ul> <p>Make sure <code>kubectl</code> is installed and in your <code>PATH</code>. Check with:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a>which<span class=w> </span>kubectl
</span><span id=__span-81-2><a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a>kubectl<span class=w> </span>version<span class=w> </span>--client
</span></code></pre></div> <p><br></p> <ul> <li><strong>Unable to connect to the server:</strong></li> </ul> <p>Check that your cluster is running and your kubeconfig is correct:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=c1>## Check the current context</span>
</span><span id=__span-82-2><a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a>kubectl<span class=w> </span>config<span class=w> </span>current-context
</span><span id=__span-82-3><a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a>
</span><span id=__span-82-4><a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a><span class=c1>## Check the cluster endpoint</span>
</span><span id=__span-82-5><a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a>kubectl<span class=w> </span>config<span class=w> </span>view<span class=w> </span>--minify<span class=w> </span>-o<span class=w> </span><span class=nv>jsonpath</span><span class=o>=</span><span class=s1>&#39;{.clusters[0].cluster.server}&#39;</span>
</span><span id=__span-82-6><a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a>
</span><span id=__span-82-7><a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a><span class=c1>## Try to reach the API server</span>
</span><span id=__span-82-8><a id=__codelineno-82-8 name=__codelineno-82-8 href=#__codelineno-82-8></a>kubectl<span class=w> </span>cluster-info
</span></code></pre></div> <p><br></p> <ul> <li><strong>error: the server doesn&rsquo;t have a resource type:</strong></li> </ul> <p>The resource might be in a different API group, or the CRD might not be installed:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=c1>## List all available API resources</span>
</span><span id=__span-83-2><a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a>kubectl<span class=w> </span>api-resources<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>&lt;resource-name&gt;
</span><span id=__span-83-3><a id=__codelineno-83-3 name=__codelineno-83-3 href=#__codelineno-83-3></a>
</span><span id=__span-83-4><a id=__codelineno-83-4 name=__codelineno-83-4 href=#__codelineno-83-4></a><span class=c1>## Check if a CRD is installed</span>
</span><span id=__span-83-5><a id=__codelineno-83-5 name=__codelineno-83-5 href=#__codelineno-83-5></a>kubectl<span class=w> </span>get<span class=w> </span>crd<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>&lt;resource-name&gt;
</span></code></pre></div> <p><br></p> <ul> <li><strong>pods not starting (Pending, CrashLoopBackOff, ImagePullBackOff):</strong></li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=c1>## Check pod status and events</span>
</span><span id=__span-84-2><a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a>kubectl<span class=w> </span>describe<span class=w> </span>pod<span class=w> </span>&lt;pod-name&gt;<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-84-3><a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a>
</span><span id=__span-84-4><a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=c1>## Check pod logs</span>
</span><span id=__span-84-5><a id=__codelineno-84-5 name=__codelineno-84-5 href=#__codelineno-84-5></a>kubectl<span class=w> </span>logs<span class=w> </span>&lt;pod-name&gt;<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-84-6><a id=__codelineno-84-6 name=__codelineno-84-6 href=#__codelineno-84-6></a>
</span><span id=__span-84-7><a id=__codelineno-84-7 name=__codelineno-84-7 href=#__codelineno-84-7></a><span class=c1>## Check events in the namespace</span>
</span><span id=__span-84-8><a id=__codelineno-84-8 name=__codelineno-84-8 href=#__codelineno-84-8></a>kubectl<span class=w> </span>get<span class=w> </span>events<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>--sort-by<span class=o>=</span><span class=s1>&#39;.lastTimestamp&#39;</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>RBAC permission denied:</strong></li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=c1>## Check what your current user can do</span>
</span><span id=__span-85-2><a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a>kubectl<span class=w> </span>auth<span class=w> </span>can-i<span class=w> </span>--list<span class=w> </span>-n<span class=w> </span>kubectl-lab
</span><span id=__span-85-3><a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a>
</span><span id=__span-85-4><a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a><span class=c1>## Check with verbosity to see the API call</span>
</span><span id=__span-85-5><a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-v<span class=o>=</span><span class=m>6</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>JSONPath expressions returning empty results:</strong></li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-86-1><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=c1>## First, check the raw JSON structure to understand the path</span>
</span><span id=__span-86-2><a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.&#39;</span><span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-50
</span><span id=__span-86-3><a id=__codelineno-86-3 name=__codelineno-86-3 href=#__codelineno-86-3></a>
</span><span id=__span-86-4><a id=__codelineno-86-4 name=__codelineno-86-4 href=#__codelineno-86-4></a><span class=c1>## Verify the field exists at the expected path</span>
</span><span id=__span-86-5><a id=__codelineno-86-5 name=__codelineno-86-5 href=#__codelineno-86-5></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-n<span class=w> </span>kubectl-lab<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.items[0].status.phase&#39;</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>metrics-server not available (kubectl top fails):</strong></li> </ul> <div class="language-bash highlight"><pre><span></span><code><span id=__span-87-1><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=c1>## Check if metrics-server is installed</span>
</span><span id=__span-87-2><a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>metrics-server<span class=w> </span>-n<span class=w> </span>kube-system<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-87-3><a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=w>  </span><span class=nb>echo</span><span class=w> </span><span class=s2>&quot;metrics-server is not installed&quot;</span>
</span><span id=__span-87-4><a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a>
</span><span id=__span-87-5><a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a><span class=c1>## Install metrics-server (for lab/dev clusters)</span>
</span><span id=__span-87-6><a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=c1>## kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml</span>
</span></code></pre></div> <p><br></p> <ul> <li><strong>kubectl debug fails (ephemeral containers not supported):</strong></li> </ul> <p>Ephemeral containers require Kubernetes 1.25+. Check your cluster version:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-88-1><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a>kubectl<span class=w> </span>version
</span></code></pre></div> <hr> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <ul> <li>Practice these commands daily until they become muscle memory. The best way to learn kubectl is to use it constantly.</li> <li>Explore the <a href=https://kubernetes.io/docs/reference/kubectl/ >kubectl reference documentation</a> for commands not covered in this lab.</li> <li>Try writing shell scripts that combine multiple kubectl commands for real operational tasks (e.g., automated health checks, resource reports, cleanup scripts).</li> <li>Install and explore additional krew plugins: <code>stern</code> (multi-pod log tailing), <code>sniff</code> (packet capture), <code>resource-capacity</code> (node capacity planning), <code>ktop</code> (terminal-based resource dashboard).</li> <li>Learn about Kubernetes client libraries (client-go, Python kubernetes client) for programmatic access to the same API that kubectl uses.</li> <li>Study the <a href=https://github.com/kubernetes/community/blob/master/contributors/devel/sig-architecture/api-conventions.md>Kubernetes API conventions</a> to understand why the API works the way it does.</li> <li>Explore <a href=https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/ >kubectl plugins development</a> to build your own custom commands for your organization.</li> </ul> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Render date of last update --> <!-- Render date of creation --> <!-- ---------------------------------------------------------------------- --> <!-- Render authors --> <!-- ---------------------------------------------------------------------- --> <!-- Render committers from GitHub --> <!-- Render committers from GitLab --> <!-- Render committers --> <!-- ---------------------------------------------------------------------- --> <!-- Determine date of last update --> <!-- Determine date of creation --> <!-- Source file information --> <aside class=md-source-file> <!-- Date of last update --> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 24, 2026 03:49:07 UTC">February 24, 2026</span> </span> <!-- Authors (git-authors plugin) --> <!-- Authors (git-committers plugin) --> <!-- Fallback: Manual GitHub avatar for repository owner --> <span class=md-source-file__fact> <nav> <a href=https://github.com/nirgeier class=md-author title=@nirgeier> <img src="https://avatars.githubusercontent.com/u/555154?size=256" alt="Nir Geier"> </a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class=logo1></div> <div class=logo2></div> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../34-crictl/ class="md-footer__link md-footer__link--prev" aria-label="Previous: 34 crictl"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> 34 crictl </div> </div> </a> <!-- <ul class="social-badges">
          <li><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a></li>
          <li><a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener"><i class="fab fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn profile</span></a></li>
          <li><a href="mailto:nirgeier@gmail.com"><img src="https://img.shields.io/badge/-nirgeier@gmail.com-fcc624?style=flat&logo=Gmail&logoColor=red" alt="Gmail Badge"></a></li>
          <li><a href="mailto:nirg@codewizard.co.il"><img src="https://img.shields.io/badge/-nirg@codewizard.co.il-fcc624?style=flat&logo=microsoftoutlook&logoColor=blue" alt="Outlook Badge"></a></li>
        </ul> --> <!-- Link to next page --> <a href=../Tasks/ class="md-footer__link md-footer__link--next" aria-label="Next: Overview"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Overview </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> 2021-2026 Nir Geier<br><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target=_blank rel=noopener><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a> </div> </div> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", {"navigation.expand": false}, "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.50899def.min.js></script> <script src=../js/print-site.js></script> <script src="https://buttons.github.io/buttons.js?v=1772199666"></script> <script src=https://unpkg.com/mermaid@11/dist/mermaid.esm.min.mjs type=module></script> </body> </html>