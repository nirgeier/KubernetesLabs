<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A collection of Kubernetes Labs for learning and practicing Kubernetes skills."><meta name=author content="Nir Geier - nirgeier@gmail.com"><link href=https://nirgeier.github.io/KubernetesLabs/Tasks/Kubernetes-Helm-Tasks/ rel=canonical><link href=../Kubernetes-Service-Tasks/ rel=prev><link href=../Kubernetes-ArgoCD-Tasks/ rel=next><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.16"><title>Helm Tasks - KubernetesLabs</title><link rel=stylesheet href=../../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2024%2024%22%3E%3Cpath%20d%3D%22M12%202a7%207%200%200%200-7%207c0%202.38%201.19%204.47%203%205.74V17a1%201%200%200%200%201%201h6a1%201%200%200%200%201-1v-2.26c1.81-1.27%203-3.36%203-5.74a7%207%200%200%200-7-7M9%2021a1%201%200%200%200%201%201h4a1%201%200%200%200%201-1v-1H9z%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Mulish:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Mulish";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../css/print-site.css><link rel=stylesheet href=../../css/print-site-material.css><link rel=stylesheet href="../../assets/stylesheets/codewizard.css?v=1772199666"><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#kubernetes-helm-chart-tasks class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Determine classes --> <!-- Header --> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <!-- Link to home --> <a href=../.. title=KubernetesLabs class="md-header__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> <!-- Button to open drawer --> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <!-- Header title --> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> KubernetesLabs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Helm Tasks </span> </div> </div> </div> <div class=m-social__top> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> <!-- Color palette toggle --> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_0> </form> <!-- User preference: color palette --> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <!-- Site language selector --> <!-- Button to open search modal --> <!-- Check if search is actually enabled - see https://t.ly/DT_0V --> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <!-- Search interface --> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <!-- Repository information --> <div class=md-header__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> </nav> <!-- Navigation tabs (sticky) --> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../welcome/ class=md-tabs__link> Start Here </a> </li> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../05-Services/ class=md-tabs__link> Networking </a> </li> <li class=md-tabs__item> <a href=../../31-RBAC/ class=md-tabs__link> Security </a> </li> <li class=md-tabs__item> <a href=../../06-DataStore/ class=md-tabs__link> Storage & Config </a> </li> <li class=md-tabs__item> <a href=../../14-Logging/ class=md-tabs__link> Observability </a> </li> <li class=md-tabs__item> <a href=../../13-HelmChart/ class=md-tabs__link> GitOps & CI/CD </a> </li> <li class=md-tabs__item> <a href=../../11-CRD-Custom-Resource-Definition/ class=md-tabs__link> Advanced </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Tasks </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=KubernetesLabs class="md-nav__button md-logo" aria-label=KubernetesLabs data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 89 89"> <path d=M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z /> <path d=M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z style="fill-opacity: 0.5"/> <path d=M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z /> <path d=M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z style="fill-opacity: 0.25"/> </svg> </a> KubernetesLabs </label> <div class=md-nav__source> <a href=https://github.com/nirgeier/KubernetesLabs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> nirgeier/KubernetesLabs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../welcome/ class=md-nav__link> <span class=md-ellipsis> Start Here </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../05-Services/ class=md-nav__link> <span class=md-ellipsis> Networking </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../31-RBAC/ class=md-nav__link> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../06-DataStore/ class=md-nav__link> <span class=md-ellipsis> Storage & Config </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../14-Logging/ class=md-nav__link> <span class=md-ellipsis> Observability </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../13-HelmChart/ class=md-nav__link> <span class=md-ellipsis> GitOps & CI/CD </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../11-CRD-Custom-Resource-Definition/ class=md-nav__link> <span class=md-ellipsis> Advanced </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Tasks </span> </a> <label class="md-nav__link " for=__nav_9 id=__nav_9_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=true> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Tasks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Kubernetes-CLI-Tasks/ class=md-nav__link> <span class=md-ellipsis> CLI Tasks </span> </a> </li> <li class=md-nav__item> <a href=../Kubernetes-Service-Tasks/ class=md-nav__link> <span class=md-ellipsis> Service Tasks </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Helm Tasks </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Helm Tasks </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#diagram-helm-chart-architecture class=md-nav__link> <span class=md-ellipsis> Diagram: Helm Chart Architecture </span> </a> </li> <li class=md-nav__item> <a href=#quick-reference-essential-helm-commands class=md-nav__link> <span class=md-ellipsis> Quick Reference: Essential Helm Commands </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Kubernetes-ArgoCD-Tasks/ class=md-nav__link> <span class=md-ellipsis> ArgoCD Tasks </span> </a> </li> <li class=md-nav__item> <a href=../Kubernetes-Scheduling-Tasks/ class=md-nav__link> <span class=md-ellipsis> Scheduling Tasks </span> </a> </li> <li class=md-nav__item> <a href=../Kubernetes-Kubebuilder-Tasks/ class=md-nav__link> <span class=md-ellipsis> Kubebuilder Tasks </span> </a> </li> <li class=md-nav__item> <a href=../Kubernetes-KEDA-Tasks/ class=md-nav__link> <span class=md-ellipsis> KEDA Tasks </span> </a> </li> <li class=md-nav__item> <a href=../Kubernetes-Harbor-ArgoCD-Airgap-Tasks/ class=md-nav__link> <span class=md-ellipsis> Harbor + ArgoCD Airgap Tasks </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=kubernetes-helm-chart-tasks>Kubernetes Helm Chart Tasks<a class=headerlink href=#kubernetes-helm-chart-tasks title="Permanent link">&para;</a></h1> <ul> <li>Hands-on Kubernetes exercises covering Helm chart creation, packaging, deployment, and best practices.</li> <li>Each task includes a description, scenario, and a detailed solution with step-by-step instructions.</li> <li>Practice these tasks to master Helm from basic chart scaffolding to advanced templating and chart repositories.</li> </ul> <h4 id=table-of-contents>Table of Contents<a class=headerlink href=#table-of-contents title="Permanent link">&para;</a></h4> <ul> <li><a href=#01-scaffold-a-helm-chart>01. Scaffold a Helm Chart</a></li> <li><a href=#02-explore-the-chart-structure>02. Explore the Chart Structure</a></li> <li><a href=#03-deploy-an-nginx-based-chart>03. Deploy an Nginx-Based Chart</a></li> <li><a href=#04-customize-the-welcome-page-with-current-date-time>04. Customize the Welcome Page with Current Date &amp; Time</a></li> <li><a href=#05-add-a-service>05. Add a Service</a></li> <li><a href=#06-add-two-ingress-resources-with-different-paths>06. Add Two Ingress Resources with Different Paths</a></li> <li><a href=#07-add-an-externalname-service>07. Add an ExternalName Service</a></li> <li><a href=#08-values-overrides-and-environments>08. Values Overrides and Environments</a></li> <li><a href=#09-template-helpers-and-named-templates>09. Template Helpers and Named Templates</a></li> <li><a href=#10-template-control-flow-if-range-with>10. Template Control Flow (if / range / with)</a></li> <li><a href=#11-chart-dependencies-subcharts>11. Chart Dependencies (Subcharts)</a></li> <li><a href=#12-linting-dry-run-and-debugging>12. Linting, Dry-Run, and Debugging</a></li> <li><a href=#13-package-and-host-a-chart-repository>13. Package and Host a Chart Repository</a></li> <li><a href=#14-upgrade-rollback-and-release-history>14. Upgrade, Rollback, and Release History</a></li> <li><a href=#15-hooks-pre-install-post-install>15. Hooks (Pre-install / Post-install)</a></li> <li><a href=#16-use-helm-status-to-inspect-a-release>16. Use <code>helm status</code> to Inspect a Release</a></li> <li><a href=#17-extract-values-with-helm-get-values>17. Extract Values with <code>helm get values</code></a></li> <li><a href=#18-show-chart-values-with-helm-show-values>18. Show Chart Values with <code>helm show values</code></a></li> <li><a href=#19-search-charts-with-helm-search-repo>19. Search Charts with <code>helm search repo</code></a></li> <li><a href=#20-update-repositories-with-helm-repo-update>20. Update Repositories with <code>helm repo update</code></a></li> <li><a href=#21-run-chart-tests-with-helm-test>21. Run Chart Tests with <code>helm test</code></a></li> <li><a href=#22-use-helm-get-all-to-retrieve-complete-release-info>22. Use <code>helm get all</code> to Retrieve Complete Release Info</a></li> <li><a href=#23-use-helm-list-with-filters-and-formatting>23. Use <code>helm list</code> with Filters and Formatting</a></li> <li><a href=#24-chain-multiple-commands-for-release-management>24. Chain Multiple Commands for Release Management</a></li> </ul> <hr> <h4 id=01-scaffold-a-helm-chart>01. Scaffold a Helm Chart<a class=headerlink href=#01-scaffold-a-helm-chart title="Permanent link">&para;</a></h4> <p>Create a new Helm chart from scratch using <code>helm create</code> and explore the generated files.</p> <h4 id=scenario>Scenario:<a class=headerlink href=#scenario title="Permanent link">&para;</a></h4> <p>◦ You need to package an application for Kubernetes and want a standardized project structure. ◦ <code>helm create</code> generates a best-practice skeleton you can customize.</p> <p><strong>Hint:</strong> <code>helm create</code>, <code>tree</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=c1># 1. Create a new chart named &quot;my-nginx-app&quot;</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>helm<span class=w> </span>create<span class=w> </span>my-nginx-app
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=c1># 2. Explore the generated structure</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>tree<span class=w> </span>my-nginx-app/
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=c1># Output:</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=c1># my-nginx-app/</span>
</span><span id=__span-0-9><a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=c1># ├── Chart.yaml          # Chart metadata (name, version, description)</span>
</span><span id=__span-0-10><a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a><span class=c1># ├── values.yaml         # Default configuration values</span>
</span><span id=__span-0-11><a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=c1># ├── charts/             # Dependency charts (subcharts)</span>
</span><span id=__span-0-12><a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=c1># ├── templates/          # Kubernetes manifest templates</span>
</span><span id=__span-0-13><a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=c1># │   ├── NOTES.txt       # Post-install usage notes</span>
</span><span id=__span-0-14><a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=c1># │   ├── _helpers.tpl    # Named template definitions</span>
</span><span id=__span-0-15><a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=c1># │   ├── deployment.yaml</span>
</span><span id=__span-0-16><a id=__codelineno-0-16 name=__codelineno-0-16 href=#__codelineno-0-16></a><span class=c1># │   ├── hpa.yaml</span>
</span><span id=__span-0-17><a id=__codelineno-0-17 name=__codelineno-0-17 href=#__codelineno-0-17></a><span class=c1># │   ├── ingress.yaml</span>
</span><span id=__span-0-18><a id=__codelineno-0-18 name=__codelineno-0-18 href=#__codelineno-0-18></a><span class=c1># │   ├── service.yaml</span>
</span><span id=__span-0-19><a id=__codelineno-0-19 name=__codelineno-0-19 href=#__codelineno-0-19></a><span class=c1># │   ├── serviceaccount.yaml</span>
</span><span id=__span-0-20><a id=__codelineno-0-20 name=__codelineno-0-20 href=#__codelineno-0-20></a><span class=c1># │   └── tests/</span>
</span><span id=__span-0-21><a id=__codelineno-0-21 name=__codelineno-0-21 href=#__codelineno-0-21></a><span class=c1># │       └── test-connection.yaml</span>
</span><span id=__span-0-22><a id=__codelineno-0-22 name=__codelineno-0-22 href=#__codelineno-0-22></a><span class=c1># └── .helmignore         # Files to exclude when packaging</span>
</span></code></pre></div> </details> <hr> <h4 id=02-explore-the-chart-structure>02. Explore the Chart Structure<a class=headerlink href=#02-explore-the-chart-structure title="Permanent link">&para;</a></h4> <p>Inspect <code>Chart.yaml</code> and <code>values.yaml</code> to understand how Helm charts are configured.</p> <h4 id=scenario_1>Scenario:<a class=headerlink href=#scenario_1 title="Permanent link">&para;</a></h4> <p>◦ Before modifying a chart, you need to understand what each file does. ◦ <code>Chart.yaml</code> defines the chart identity; <code>values.yaml</code> drives all the template rendering.</p> <p><strong>Hint:</strong> <code>cat Chart.yaml</code>, <code>cat values.yaml</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=c1># 1. Inspect Chart.yaml</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>cat<span class=w> </span>my-nginx-app/Chart.yaml
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=c1># Key fields:</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=c1># - apiVersion: v2       (Helm 3 chart)</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=c1># - name: my-nginx-app</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=c1># - version: 0.1.0       (chart version - bump this on changes)</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=c1># - appVersion: &quot;1.16.0&quot; (the app version being deployed)</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=c1># 2. Inspect values.yaml</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>cat<span class=w> </span>my-nginx-app/values.yaml
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=c1># Key fields:</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a><span class=c1># - replicaCount: 1</span>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a><span class=c1># - image.repository: nginx</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a><span class=c1># - image.tag: &quot;&quot;        (defaults to appVersion from Chart.yaml)</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a><span class=c1># - service.type: ClusterIP</span>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a><span class=c1># - service.port: 80</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a><span class=c1># - ingress.enabled: false</span>
</span><span id=__span-1-20><a id=__codelineno-1-20 name=__codelineno-1-20 href=#__codelineno-1-20></a>
</span><span id=__span-1-21><a id=__codelineno-1-21 name=__codelineno-1-21 href=#__codelineno-1-21></a><span class=c1># 3. See how values are consumed in templates</span>
</span><span id=__span-1-22><a id=__codelineno-1-22 name=__codelineno-1-22 href=#__codelineno-1-22></a>grep<span class=w> </span>-n<span class=w> </span><span class=s1>&#39;{{ .Values&#39;</span><span class=w> </span>my-nginx-app/templates/deployment.yaml
</span><span id=__span-1-23><a id=__codelineno-1-23 name=__codelineno-1-23 href=#__codelineno-1-23></a>
</span><span id=__span-1-24><a id=__codelineno-1-24 name=__codelineno-1-24 href=#__codelineno-1-24></a><span class=c1># 4. Render the templates without deploying (dry-run)</span>
</span><span id=__span-1-25><a id=__codelineno-1-25 name=__codelineno-1-25 href=#__codelineno-1-25></a>helm<span class=w> </span>template<span class=w> </span>my-release<span class=w> </span>my-nginx-app/
</span></code></pre></div> </details> <hr> <h4 id=03-deploy-an-nginx-based-chart>03. Deploy an Nginx-Based Chart<a class=headerlink href=#03-deploy-an-nginx-based-chart title="Permanent link">&para;</a></h4> <p>Install the chart to your cluster using the default nginx image, verify the deployment, and access nginx.</p> <h4 id=scenario_2>Scenario:<a class=headerlink href=#scenario_2 title="Permanent link">&para;</a></h4> <p>◦ You want to deploy a basic nginx web server using Helm to validate the chart works before customizing it.</p> <p><strong>Hint:</strong> <code>helm install</code>, <code>kubectl get all</code>, <code>kubectl port-forward</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># 1. Install the chart</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=c1># 2. Verify all resources were created</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>kubectl<span class=w> </span>get<span class=w> </span>all<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=c1># 3. Check the release</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>helm<span class=w> </span>list
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=c1># 4. Access the application via port-forward</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>kubectl<span class=w> </span>port-forward<span class=w> </span>svc/my-nginx-my-nginx-app<span class=w> </span><span class=m>8080</span>:80
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=c1># 5. In another terminal or browser</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a>curl<span class=w> </span>http://localhost:8080
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=c1># Should show the default nginx welcome page</span>
</span><span id=__span-2-16><a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a>
</span><span id=__span-2-17><a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=c1># 6. Uninstall when done</span>
</span><span id=__span-2-18><a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=04-customize-the-welcome-page-with-current-date-time>04. Customize the Welcome Page with Current Date &amp; Time<a class=headerlink href=#04-customize-the-welcome-page-with-current-date-time title="Permanent link">&para;</a></h4> <p>Create a ConfigMap that generates a custom HTML welcome page showing the current date and time, and mount it into the nginx container.</p> <h4 id=scenario_3>Scenario:<a class=headerlink href=#scenario_3 title="Permanent link">&para;</a></h4> <p>◦ You want to display dynamic content (deployment timestamp) on the nginx welcome page. ◦ This demonstrates how Helm templates can inject build-time values into application configuration.</p> <p><strong>Hint:</strong> <code>now</code>, <code>date</code>, ConfigMap volume mount, <code>{{ .Release }}</code></p> <details class=example> <summary>Solution</summary> <h4 id=step-1-create-the-configmap-template-templatesconfigmap-htmlyaml>Step 1: Create the ConfigMap template [templates/configmap-html.yaml]<a class=headerlink href=#step-1-create-the-configmap-template-templatesconfigmap-htmlyaml title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/configmap-html.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=s>apiVersion: v1</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=s>kind: ConfigMap</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=s>metadata:</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-html</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=s>  labels:</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=s>data:</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=s>  index.html: |</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=s>    &lt;!DOCTYPE html&gt;</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=s>    &lt;html&gt;</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=s>    &lt;head&gt;</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=s>      &lt;title&gt;{{ .Values.welcomePage.title | default &quot;Welcome&quot; }}&lt;/title&gt;</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=s>      &lt;style&gt;</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=s>        body {</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=s>          font-family: Arial, sans-serif;</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=s>          display: flex;</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=s>          justify-content: center;</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=s>          align-items: center;</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=s>          min-height: 100vh;</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=s>          margin: 0;</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=s>          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=s>          color: white;</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=s>        }</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=s>        .container { text-align: center; }</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=s>        h1 { font-size: 2.5em; }</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=s>        .info { font-size: 1.2em; margin: 10px 0; }</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=s>        .time { font-size: 3em; font-weight: bold; margin: 20px 0; }</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=s>      &lt;/style&gt;</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=s>    &lt;/head&gt;</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=s>    &lt;body&gt;</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=s>      &lt;div class=&quot;container&quot;&gt;</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class=s>        &lt;h1&gt;{{ .Values.welcomePage.title | default &quot;Welcome to My Nginx App&quot; }}&lt;/h1&gt;</span>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a><span class=s>        &lt;p class=&quot;info&quot;&gt;Release: &lt;strong&gt;{{ .Release.Name }}&lt;/strong&gt;&lt;/p&gt;</span>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=s>        &lt;p class=&quot;info&quot;&gt;Namespace: &lt;strong&gt;{{ .Release.Namespace }}&lt;/strong&gt;&lt;/p&gt;</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=s>        &lt;p class=&quot;info&quot;&gt;Chart Version: &lt;strong&gt;{{ .Chart.Version }}&lt;/strong&gt;&lt;/p&gt;</span>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class=s>        &lt;p class=&quot;info&quot;&gt;App Version: &lt;strong&gt;{{ .Chart.AppVersion }}&lt;/strong&gt;&lt;/p&gt;</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a><span class=s>        &lt;p class=&quot;time&quot;&gt;Deployed at: {{ now | date &quot;2006-01-02 15:04:05 MST&quot; }}&lt;/p&gt;</span>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a><span class=s>        {{- if .Values.welcomePage.message }}</span>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a><span class=s>        &lt;p class=&quot;info&quot;&gt;{{ .Values.welcomePage.message }}&lt;/p&gt;</span>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=s>        {{- end }}</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a><span class=s>      &lt;/div&gt;</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=s>    &lt;/body&gt;</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a><span class=s>    &lt;/html&gt;</span>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <h4 id=step-2-add-welcome-page-values-to-valuesyaml>Step 2: Add welcome page values to <code>values.yaml</code><a class=headerlink href=#step-2-add-welcome-page-values-to-valuesyaml title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=s># Custom welcome page configuration</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=s>welcomePage:</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=s>  title: &quot;Welcome to My Nginx App&quot;</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=s>  message: &quot;Deployed with Helm!&quot;</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=s>EOF</span>
</span></code></pre></div> <h4 id=step-3-update-the-deployment-template-to-mount-the-configmap>Step 3: Update the deployment template to mount the ConfigMap<a class=headerlink href=#step-3-update-the-deployment-template-to-mount-the-configmap title="Permanent link">&para;</a></h4> <p>Edit <code>my-nginx-app/templates/deployment.yaml</code> - add the <code>volumeMounts</code> and <code>volumes</code>:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Add volumeMounts under the container spec and volumes under the pod spec.</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1># The easiest approach: replace the deployment template entirely.</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1># Here we patch the key sections:</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=c1># In the container spec, add:</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=c1>#   volumeMounts:</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=c1>#     - name: html-volume</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=c1>#       mountPath: /usr/share/nginx/html</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=c1>#       readOnly: true</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=c1># In the pod spec (same level as containers), add:</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=c1>#   volumes:</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=c1>#     - name: html-volume</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=c1>#       configMap:</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=c1>#         name: {{ include &quot;my-nginx-app.fullname&quot; . }}-html</span>
</span></code></pre></div> <p>For a quick approach, replace the entire deployment template:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/deployment.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=s>apiVersion: apps/v1</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=s>kind: Deployment</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=s>metadata:</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=s>  labels:</span>
</span><span id=__span-6-7><a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-6-8><a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=s>spec:</span>
</span><span id=__span-6-9><a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=s>  {{- if not .Values.autoscaling.enabled }}</span>
</span><span id=__span-6-10><a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a><span class=s>  replicas: {{ .Values.replicaCount }}</span>
</span><span id=__span-6-11><a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=s>  {{- end }}</span>
</span><span id=__span-6-12><a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=s>  selector:</span>
</span><span id=__span-6-13><a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a><span class=s>    matchLabels:</span>
</span><span id=__span-6-14><a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=s>      {{- include &quot;my-nginx-app.selectorLabels&quot; . | nindent 6 }}</span>
</span><span id=__span-6-15><a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a><span class=s>  template:</span>
</span><span id=__span-6-16><a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=s>    metadata:</span>
</span><span id=__span-6-17><a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=s>      annotations:</span>
</span><span id=__span-6-18><a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a><span class=s>        # Force pod restart on ConfigMap changes</span>
</span><span id=__span-6-19><a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=s>        checksum/html: {{ include (print $.Template.BasePath &quot;/configmap-html.yaml&quot;) . | sha256sum }}</span>
</span><span id=__span-6-20><a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a><span class=s>      {{- with .Values.podAnnotations }}</span>
</span><span id=__span-6-21><a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-22><a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-23><a id=__codelineno-6-23 name=__codelineno-6-23 href=#__codelineno-6-23></a><span class=s>      labels:</span>
</span><span id=__span-6-24><a id=__codelineno-6-24 name=__codelineno-6-24 href=#__codelineno-6-24></a><span class=s>        {{- include &quot;my-nginx-app.labels&quot; . | nindent 8 }}</span>
</span><span id=__span-6-25><a id=__codelineno-6-25 name=__codelineno-6-25 href=#__codelineno-6-25></a><span class=s>        {{- with .Values.podLabels }}</span>
</span><span id=__span-6-26><a id=__codelineno-6-26 name=__codelineno-6-26 href=#__codelineno-6-26></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-27><a id=__codelineno-6-27 name=__codelineno-6-27 href=#__codelineno-6-27></a><span class=s>        {{- end }}</span>
</span><span id=__span-6-28><a id=__codelineno-6-28 name=__codelineno-6-28 href=#__codelineno-6-28></a><span class=s>    spec:</span>
</span><span id=__span-6-29><a id=__codelineno-6-29 name=__codelineno-6-29 href=#__codelineno-6-29></a><span class=s>      {{- with .Values.imagePullSecrets }}</span>
</span><span id=__span-6-30><a id=__codelineno-6-30 name=__codelineno-6-30 href=#__codelineno-6-30></a><span class=s>      imagePullSecrets:</span>
</span><span id=__span-6-31><a id=__codelineno-6-31 name=__codelineno-6-31 href=#__codelineno-6-31></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-32><a id=__codelineno-6-32 name=__codelineno-6-32 href=#__codelineno-6-32></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-33><a id=__codelineno-6-33 name=__codelineno-6-33 href=#__codelineno-6-33></a><span class=s>      serviceAccountName: {{ include &quot;my-nginx-app.serviceAccountName&quot; . }}</span>
</span><span id=__span-6-34><a id=__codelineno-6-34 name=__codelineno-6-34 href=#__codelineno-6-34></a><span class=s>      {{- with .Values.podSecurityContext }}</span>
</span><span id=__span-6-35><a id=__codelineno-6-35 name=__codelineno-6-35 href=#__codelineno-6-35></a><span class=s>      securityContext:</span>
</span><span id=__span-6-36><a id=__codelineno-6-36 name=__codelineno-6-36 href=#__codelineno-6-36></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-37><a id=__codelineno-6-37 name=__codelineno-6-37 href=#__codelineno-6-37></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-38><a id=__codelineno-6-38 name=__codelineno-6-38 href=#__codelineno-6-38></a><span class=s>      containers:</span>
</span><span id=__span-6-39><a id=__codelineno-6-39 name=__codelineno-6-39 href=#__codelineno-6-39></a><span class=s>        - name: {{ .Chart.Name }}</span>
</span><span id=__span-6-40><a id=__codelineno-6-40 name=__codelineno-6-40 href=#__codelineno-6-40></a><span class=s>          {{- with .Values.securityContext }}</span>
</span><span id=__span-6-41><a id=__codelineno-6-41 name=__codelineno-6-41 href=#__codelineno-6-41></a><span class=s>          securityContext:</span>
</span><span id=__span-6-42><a id=__codelineno-6-42 name=__codelineno-6-42 href=#__codelineno-6-42></a><span class=s>            {{- toYaml . | nindent 12 }}</span>
</span><span id=__span-6-43><a id=__codelineno-6-43 name=__codelineno-6-43 href=#__codelineno-6-43></a><span class=s>          {{- end }}</span>
</span><span id=__span-6-44><a id=__codelineno-6-44 name=__codelineno-6-44 href=#__codelineno-6-44></a><span class=s>          image: &quot;{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}&quot;</span>
</span><span id=__span-6-45><a id=__codelineno-6-45 name=__codelineno-6-45 href=#__codelineno-6-45></a><span class=s>          imagePullPolicy: {{ .Values.image.pullPolicy }}</span>
</span><span id=__span-6-46><a id=__codelineno-6-46 name=__codelineno-6-46 href=#__codelineno-6-46></a><span class=s>          ports:</span>
</span><span id=__span-6-47><a id=__codelineno-6-47 name=__codelineno-6-47 href=#__codelineno-6-47></a><span class=s>            - name: http</span>
</span><span id=__span-6-48><a id=__codelineno-6-48 name=__codelineno-6-48 href=#__codelineno-6-48></a><span class=s>              containerPort: {{ .Values.service.port }}</span>
</span><span id=__span-6-49><a id=__codelineno-6-49 name=__codelineno-6-49 href=#__codelineno-6-49></a><span class=s>              protocol: TCP</span>
</span><span id=__span-6-50><a id=__codelineno-6-50 name=__codelineno-6-50 href=#__codelineno-6-50></a><span class=s>          livenessProbe:</span>
</span><span id=__span-6-51><a id=__codelineno-6-51 name=__codelineno-6-51 href=#__codelineno-6-51></a><span class=s>            {{- toYaml .Values.livenessProbe | nindent 12 }}</span>
</span><span id=__span-6-52><a id=__codelineno-6-52 name=__codelineno-6-52 href=#__codelineno-6-52></a><span class=s>          readinessProbe:</span>
</span><span id=__span-6-53><a id=__codelineno-6-53 name=__codelineno-6-53 href=#__codelineno-6-53></a><span class=s>            {{- toYaml .Values.readinessProbe | nindent 12 }}</span>
</span><span id=__span-6-54><a id=__codelineno-6-54 name=__codelineno-6-54 href=#__codelineno-6-54></a><span class=s>          {{- with .Values.resources }}</span>
</span><span id=__span-6-55><a id=__codelineno-6-55 name=__codelineno-6-55 href=#__codelineno-6-55></a><span class=s>          resources:</span>
</span><span id=__span-6-56><a id=__codelineno-6-56 name=__codelineno-6-56 href=#__codelineno-6-56></a><span class=s>            {{- toYaml . | nindent 12 }}</span>
</span><span id=__span-6-57><a id=__codelineno-6-57 name=__codelineno-6-57 href=#__codelineno-6-57></a><span class=s>          {{- end }}</span>
</span><span id=__span-6-58><a id=__codelineno-6-58 name=__codelineno-6-58 href=#__codelineno-6-58></a><span class=s>          volumeMounts:</span>
</span><span id=__span-6-59><a id=__codelineno-6-59 name=__codelineno-6-59 href=#__codelineno-6-59></a><span class=s>            - name: html-volume</span>
</span><span id=__span-6-60><a id=__codelineno-6-60 name=__codelineno-6-60 href=#__codelineno-6-60></a><span class=s>              mountPath: /usr/share/nginx/html</span>
</span><span id=__span-6-61><a id=__codelineno-6-61 name=__codelineno-6-61 href=#__codelineno-6-61></a><span class=s>              readOnly: true</span>
</span><span id=__span-6-62><a id=__codelineno-6-62 name=__codelineno-6-62 href=#__codelineno-6-62></a><span class=s>            {{- with .Values.volumeMounts }}</span>
</span><span id=__span-6-63><a id=__codelineno-6-63 name=__codelineno-6-63 href=#__codelineno-6-63></a><span class=s>            {{- toYaml . | nindent 12 }}</span>
</span><span id=__span-6-64><a id=__codelineno-6-64 name=__codelineno-6-64 href=#__codelineno-6-64></a><span class=s>            {{- end }}</span>
</span><span id=__span-6-65><a id=__codelineno-6-65 name=__codelineno-6-65 href=#__codelineno-6-65></a><span class=s>      volumes:</span>
</span><span id=__span-6-66><a id=__codelineno-6-66 name=__codelineno-6-66 href=#__codelineno-6-66></a><span class=s>        - name: html-volume</span>
</span><span id=__span-6-67><a id=__codelineno-6-67 name=__codelineno-6-67 href=#__codelineno-6-67></a><span class=s>          configMap:</span>
</span><span id=__span-6-68><a id=__codelineno-6-68 name=__codelineno-6-68 href=#__codelineno-6-68></a><span class=s>            name: {{ include &quot;my-nginx-app.fullname&quot; . }}-html</span>
</span><span id=__span-6-69><a id=__codelineno-6-69 name=__codelineno-6-69 href=#__codelineno-6-69></a><span class=s>        {{- with .Values.volumes }}</span>
</span><span id=__span-6-70><a id=__codelineno-6-70 name=__codelineno-6-70 href=#__codelineno-6-70></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-71><a id=__codelineno-6-71 name=__codelineno-6-71 href=#__codelineno-6-71></a><span class=s>        {{- end }}</span>
</span><span id=__span-6-72><a id=__codelineno-6-72 name=__codelineno-6-72 href=#__codelineno-6-72></a><span class=s>      {{- with .Values.nodeSelector }}</span>
</span><span id=__span-6-73><a id=__codelineno-6-73 name=__codelineno-6-73 href=#__codelineno-6-73></a><span class=s>      nodeSelector:</span>
</span><span id=__span-6-74><a id=__codelineno-6-74 name=__codelineno-6-74 href=#__codelineno-6-74></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-75><a id=__codelineno-6-75 name=__codelineno-6-75 href=#__codelineno-6-75></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-76><a id=__codelineno-6-76 name=__codelineno-6-76 href=#__codelineno-6-76></a><span class=s>      {{- with .Values.affinity }}</span>
</span><span id=__span-6-77><a id=__codelineno-6-77 name=__codelineno-6-77 href=#__codelineno-6-77></a><span class=s>      affinity:</span>
</span><span id=__span-6-78><a id=__codelineno-6-78 name=__codelineno-6-78 href=#__codelineno-6-78></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-79><a id=__codelineno-6-79 name=__codelineno-6-79 href=#__codelineno-6-79></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-80><a id=__codelineno-6-80 name=__codelineno-6-80 href=#__codelineno-6-80></a><span class=s>      {{- with .Values.tolerations }}</span>
</span><span id=__span-6-81><a id=__codelineno-6-81 name=__codelineno-6-81 href=#__codelineno-6-81></a><span class=s>      tolerations:</span>
</span><span id=__span-6-82><a id=__codelineno-6-82 name=__codelineno-6-82 href=#__codelineno-6-82></a><span class=s>        {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-6-83><a id=__codelineno-6-83 name=__codelineno-6-83 href=#__codelineno-6-83></a><span class=s>      {{- end }}</span>
</span><span id=__span-6-84><a id=__codelineno-6-84 name=__codelineno-6-84 href=#__codelineno-6-84></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <h4 id=step-4-install-and-verify>Step 4: Install and verify<a class=headerlink href=#step-4-install-and-verify title="Permanent link">&para;</a></h4> <div class="language-bash highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># Install (or upgrade if already installed)</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=c1># Port-forward and check the custom page</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a>kubectl<span class=w> </span>port-forward<span class=w> </span>svc/my-nginx-my-nginx-app<span class=w> </span><span class=m>8080</span>:80
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=c1># In another terminal</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a>curl<span class=w> </span>http://localhost:8080
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=c1># Should show the custom HTML page with current date/time and release info</span>
</span></code></pre></div> </details> <hr> <h4 id=05-add-a-service>05. Add a Service<a class=headerlink href=#05-add-a-service title="Permanent link">&para;</a></h4> <p>Verify the Service template supports ClusterIP, NodePort, and LoadBalancer types via <code>values.yaml</code>.</p> <h4 id=scenario_4>Scenario:<a class=headerlink href=#scenario_4 title="Permanent link">&para;</a></h4> <p>◦ You want to expose your application with different service types depending on the environment (e.g., ClusterIP for dev, NodePort for minikube, LoadBalancer for cloud). ◦ You need your chart to be flexible enough to deploy with different service types depending on the environment. ◦ The default <code>helm create</code> already includes a service template - you need to understand and test it.</p> <p><strong>Hint:</strong> <code>--set service.type=NodePort</code>, <code>helm upgrade</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># 1. Check the current service template</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>cat<span class=w> </span>my-nginx-app/templates/service.yaml
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=c1># 2. The default template already supports configurable type:</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=c1>#    type: {{ .Values.service.type }}</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=c1>#    port: {{ .Values.service.port }}</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=c1># 3. Install with ClusterIP (default)</span>
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-8-10><a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>
</span><span id=__span-8-11><a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=c1># 4. Verify</span>
</span><span id=__span-8-12><a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-8-13><a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a><span class=c1># TYPE should be ClusterIP</span>
</span><span id=__span-8-14><a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a>
</span><span id=__span-8-15><a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=c1># 5. Upgrade to NodePort</span>
</span><span id=__span-8-16><a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span>service.type<span class=o>=</span>NodePort
</span><span id=__span-8-17><a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a>
</span><span id=__span-8-18><a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=c1># 6. Verify</span>
</span><span id=__span-8-19><a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-8-20><a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=c1># TYPE should now be NodePort</span>
</span><span id=__span-8-21><a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a>
</span><span id=__span-8-22><a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=c1># 7. Upgrade to LoadBalancer</span>
</span><span id=__span-8-23><a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span>service.type<span class=o>=</span>LoadBalancer
</span><span id=__span-8-24><a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>
</span><span id=__span-8-25><a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a><span class=c1># 8. Verify</span>
</span><span id=__span-8-26><a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-8-27><a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a><span class=c1># TYPE should now be LoadBalancer (EXTERNAL-IP may stay &lt;pending&gt; on local clusters)</span>
</span></code></pre></div> </details> <hr> <h4 id=06-add-two-ingress-resources-with-different-paths>06. Add Two Ingress Resources with Different Paths<a class=headerlink href=#06-add-two-ingress-resources-with-different-paths title="Permanent link">&para;</a></h4> <p>Create two Ingress resources: one serving the main app at <code>/</code> and another serving a health/status endpoint at <code>/status</code>.</p> <h4 id=scenario_5>Scenario:<a class=headerlink href=#scenario_5 title="Permanent link">&para;</a></h4> <p>◦ Your application has a main frontend and a separate status/health page. ◦ You want to route traffic using different URL paths to the same backend, each with its own Ingress resource. ◦ This is useful when different Ingress resources need different annotations (rate limiting, auth, etc.).</p> <p><strong>Prerequisites:</strong> An Ingress controller must be installed (e.g., <code>nginx-ingress</code>).</p> <p><strong>Hint:</strong> Two separate Ingress templates, <code>pathType: Prefix</code></p> <details class=example> <summary>Solution</summary> <p><strong>Step 1:</strong> Create the main Ingress template [templates/ingress-main.yaml]</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/ingress-main.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=s>{{- if .Values.ingress.main.enabled -}}</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=s>apiVersion: networking.k8s.io/v1</span>
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=s>kind: Ingress</span>
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=s>metadata:</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-main</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=s>  labels:</span>
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=s>  {{- with .Values.ingress.main.annotations }}</span>
</span><span id=__span-9-10><a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=s>  annotations:</span>
</span><span id=__span-9-11><a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=s>    {{- toYaml . | nindent 4 }}</span>
</span><span id=__span-9-12><a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=s>  {{- end }}</span>
</span><span id=__span-9-13><a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=s>spec:</span>
</span><span id=__span-9-14><a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=s>  {{- if .Values.ingress.main.className }}</span>
</span><span id=__span-9-15><a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=s>  ingressClassName: {{ .Values.ingress.main.className }}</span>
</span><span id=__span-9-16><a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=s>  {{- end }}</span>
</span><span id=__span-9-17><a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=s>  rules:</span>
</span><span id=__span-9-18><a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=s>    - host: {{ .Values.ingress.main.host | quote }}</span>
</span><span id=__span-9-19><a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=s>      http:</span>
</span><span id=__span-9-20><a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=s>        paths:</span>
</span><span id=__span-9-21><a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=s>          - path: /</span>
</span><span id=__span-9-22><a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=s>            pathType: Prefix</span>
</span><span id=__span-9-23><a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=s>            backend:</span>
</span><span id=__span-9-24><a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=s>              service:</span>
</span><span id=__span-9-25><a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=s>                name: {{ include &quot;my-nginx-app.fullname&quot; . }}</span>
</span><span id=__span-9-26><a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=s>                port:</span>
</span><span id=__span-9-27><a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=s>                  number: {{ .Values.service.port }}</span>
</span><span id=__span-9-28><a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a><span class=s>  {{- if .Values.ingress.main.tls }}</span>
</span><span id=__span-9-29><a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a><span class=s>  tls:</span>
</span><span id=__span-9-30><a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a><span class=s>    {{- toYaml .Values.ingress.main.tls | nindent 4 }}</span>
</span><span id=__span-9-31><a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=s>  {{- end }}</span>
</span><span id=__span-9-32><a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a><span class=s>{{- end }}</span>
</span><span id=__span-9-33><a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <p><strong>Step 2:</strong> Create the status Ingress template [templates/ingress-status.yaml]</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/ingress-status.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=s>{{- if .Values.ingress.status.enabled -}}</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=s>apiVersion: networking.k8s.io/v1</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=s>kind: Ingress</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=s>metadata:</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-status</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=s>  labels:</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=s>  {{- with .Values.ingress.status.annotations }}</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=s>  annotations:</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=s>    {{- toYaml . | nindent 4 }}</span>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=s>  {{- end }}</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=s>spec:</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=s>  {{- if .Values.ingress.status.className }}</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=s>  ingressClassName: {{ .Values.ingress.status.className }}</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=s>  {{- end }}</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=s>  rules:</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a><span class=s>    - host: {{ .Values.ingress.status.host | quote }}</span>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=s>      http:</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=s>        paths:</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a><span class=s>          - path: /status</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=s>            pathType: Prefix</span>
</span><span id=__span-10-23><a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a><span class=s>            backend:</span>
</span><span id=__span-10-24><a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a><span class=s>              service:</span>
</span><span id=__span-10-25><a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a><span class=s>                name: {{ include &quot;my-nginx-app.fullname&quot; . }}</span>
</span><span id=__span-10-26><a id=__codelineno-10-26 name=__codelineno-10-26 href=#__codelineno-10-26></a><span class=s>                port:</span>
</span><span id=__span-10-27><a id=__codelineno-10-27 name=__codelineno-10-27 href=#__codelineno-10-27></a><span class=s>                  number: {{ .Values.service.port }}</span>
</span><span id=__span-10-28><a id=__codelineno-10-28 name=__codelineno-10-28 href=#__codelineno-10-28></a><span class=s>  {{- if .Values.ingress.status.tls }}</span>
</span><span id=__span-10-29><a id=__codelineno-10-29 name=__codelineno-10-29 href=#__codelineno-10-29></a><span class=s>  tls:</span>
</span><span id=__span-10-30><a id=__codelineno-10-30 name=__codelineno-10-30 href=#__codelineno-10-30></a><span class=s>    {{- toYaml .Values.ingress.status.tls | nindent 4 }}</span>
</span><span id=__span-10-31><a id=__codelineno-10-31 name=__codelineno-10-31 href=#__codelineno-10-31></a><span class=s>  {{- end }}</span>
</span><span id=__span-10-32><a id=__codelineno-10-32 name=__codelineno-10-32 href=#__codelineno-10-32></a><span class=s>{{- end }}</span>
</span><span id=__span-10-33><a id=__codelineno-10-33 name=__codelineno-10-33 href=#__codelineno-10-33></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <p><strong>Step 3:</strong> Remove the default ingress template (optional) and update <code>values.yaml</code></p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=c1># Remove the default generated ingress template to avoid confusion</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>rm<span class=w> </span>my-nginx-app/templates/ingress.yaml
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=c1># Add ingress values to values.yaml</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=s># Ingress configuration - two separate Ingress resources</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=s>ingress:</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=s>  main:</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=s>    enabled: true</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=s>    className: nginx</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=s>    host: my-nginx.local</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=s>    annotations:</span>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=s>      nginx.ingress.kubernetes.io/rewrite-target: /</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=s>    tls: []</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=s>  status:</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=s>    enabled: true</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=s>    className: nginx</span>
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=s>    host: my-nginx.local</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=s>    annotations:</span>
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=s>      nginx.ingress.kubernetes.io/rewrite-target: /</span>
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22 href=#__codelineno-11-22></a><span class=s>      # Example: different rate limit for status endpoint</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23 href=#__codelineno-11-23></a><span class=s>      nginx.ingress.kubernetes.io/limit-rps: &quot;10&quot;</span>
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24 href=#__codelineno-11-24></a><span class=s>    tls: []</span>
</span><span id=__span-11-25><a id=__codelineno-11-25 name=__codelineno-11-25 href=#__codelineno-11-25></a><span class=s>EOF</span>
</span></code></pre></div> <p><strong>Step 4:</strong> Deploy and verify</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># Upgrade the release</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>
</span><span id=__span-12-4><a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=c1># Verify both Ingress resources were created</span>
</span><span id=__span-12-5><a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>kubectl<span class=w> </span>get<span class=w> </span>ingress<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-12-6><a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>
</span><span id=__span-12-7><a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a><span class=c1># Expected output:</span>
</span><span id=__span-12-8><a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a><span class=c1># NAME                        CLASS   HOSTS            ADDRESS   PORTS   AGE</span>
</span><span id=__span-12-9><a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a><span class=c1># my-nginx-my-nginx-app-main    nginx   my-nginx.local             80      5s</span>
</span><span id=__span-12-10><a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a><span class=c1># my-nginx-my-nginx-app-status  nginx   my-nginx.local             80      5s</span>
</span><span id=__span-12-11><a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>
</span><span id=__span-12-12><a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a><span class=c1># Describe each to see the path rules</span>
</span><span id=__span-12-13><a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>kubectl<span class=w> </span>describe<span class=w> </span>ingress<span class=w> </span>my-nginx-my-nginx-app-main
</span><span id=__span-12-14><a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>kubectl<span class=w> </span>describe<span class=w> </span>ingress<span class=w> </span>my-nginx-my-nginx-app-status
</span><span id=__span-12-15><a id=__codelineno-12-15 name=__codelineno-12-15 href=#__codelineno-12-15></a>
</span><span id=__span-12-16><a id=__codelineno-12-16 name=__codelineno-12-16 href=#__codelineno-12-16></a><span class=c1># Test (add host entry or use curl with Host header)</span>
</span><span id=__span-12-17><a id=__codelineno-12-17 name=__codelineno-12-17 href=#__codelineno-12-17></a><span class=c1># curl -H &quot;Host: my-nginx.local&quot; http://&lt;INGRESS_IP&gt;/</span>
</span><span id=__span-12-18><a id=__codelineno-12-18 name=__codelineno-12-18 href=#__codelineno-12-18></a><span class=c1># curl -H &quot;Host: my-nginx.local&quot; http://&lt;INGRESS_IP&gt;/status</span>
</span></code></pre></div> </details> <hr> <h4 id=07-add-an-externalname-service>07. Add an ExternalName Service<a class=headerlink href=#07-add-an-externalname-service title="Permanent link">&para;</a></h4> <p>Add a second Service of type <code>ExternalName</code> that maps a Kubernetes service name to an external DNS name.</p> <h4 id=scenario_6>Scenario:<a class=headerlink href=#scenario_6 title="Permanent link">&para;</a></h4> <p>◦ Your application needs to connect to an external API or database (e.g., an RDS instance, a SaaS endpoint). ◦ By using an ExternalName service, you can refer to it by a local name inside the cluster and change the target later without modifying application code.</p> <p><strong>Hint:</strong> <code>type: ExternalName</code>, <code>externalName</code></p> <details class=example> <summary>Solution</summary> <p><strong>Step 1:</strong> Create the ExternalName Service template [templates/service-external.yaml]</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/service-external.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=s>{{- if .Values.externalService.enabled -}}</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=s>apiVersion: v1</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=s>kind: Service</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=s>metadata:</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-external</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=s>  labels:</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=s>spec:</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=s>  type: ExternalName</span>
</span><span id=__span-13-11><a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=s>  externalName: {{ .Values.externalService.host | quote }}</span>
</span><span id=__span-13-12><a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=s>  {{- if .Values.externalService.ports }}</span>
</span><span id=__span-13-13><a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a><span class=s>  ports:</span>
</span><span id=__span-13-14><a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=s>    {{- toYaml .Values.externalService.ports | nindent 4 }}</span>
</span><span id=__span-13-15><a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a><span class=s>  {{- end }}</span>
</span><span id=__span-13-16><a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a><span class=s>{{- end }}</span>
</span><span id=__span-13-17><a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <p><strong>Step 2:</strong> Add values to <code>values.yaml</code></p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=s># ExternalName service - maps a local name to an external DNS</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=s>externalService:</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=s>  enabled: true</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=s>  host: api.example.com</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=s>  ports:</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=s>    - port: 443</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=s>      protocol: TCP</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=s>EOF</span>
</span></code></pre></div> <p><strong>Step 3:</strong> Deploy and verify</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1># Upgrade the release</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=c1># Verify the ExternalName service</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a>kubectl<span class=w> </span>get<span class=w> </span>svc<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=c1># Should show something like:</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=c1># NAME                              TYPE           CLUSTER-IP   EXTERNAL-IP       PORT(S)</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=c1># my-nginx-my-nginx-app             ClusterIP      10.x.x.x    &lt;none&gt;            80/TCP</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=c1># my-nginx-my-nginx-app-external    ExternalName   &lt;none&gt;       api.example.com   443/TCP</span>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=c1># Test DNS resolution from inside the cluster</span>
</span><span id=__span-15-13><a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a>kubectl<span class=w> </span>run<span class=w> </span>dns-check<span class=w> </span>--image<span class=o>=</span>busybox<span class=w> </span>--restart<span class=o>=</span>Never<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-14><a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>  </span>--<span class=w> </span>nslookup<span class=w> </span>my-nginx-my-nginx-app-external
</span><span id=__span-15-15><a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a>kubectl<span class=w> </span>logs<span class=w> </span>dns-check
</span><span id=__span-15-16><a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=c1># Should resolve to api.example.com</span>
</span><span id=__span-15-17><a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a>
</span><span id=__span-15-18><a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=c1># Cleanup test pod</span>
</span><span id=__span-15-19><a id=__codelineno-15-19 name=__codelineno-15-19 href=#__codelineno-15-19></a>kubectl<span class=w> </span>delete<span class=w> </span>pod<span class=w> </span>dns-check
</span></code></pre></div> </details> <hr> <h4 id=08-values-overrides-and-environments>08. Values Overrides and Environments<a class=headerlink href=#08-values-overrides-and-environments title="Permanent link">&para;</a></h4> <p>Use multiple values files to manage different environments (dev, staging, production).</p> <h4 id=scenario_7>Scenario:<a class=headerlink href=#scenario_7 title="Permanent link">&para;</a></h4> <p>◦ You have one chart but need different configurations per environment (replica count, image tag, resource limits). ◦ Helm supports layering multiple <code>-f</code> values files and <code>--set</code> overrides.</p> <p><strong>Hint:</strong> <code>helm install -f</code>, <code>--set</code>, multiple values files</p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=c1># 1. Create a dev values file</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a>cat<span class=w> </span>&gt;<span class=w> </span>values-dev.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a><span class=s>replicaCount: 1</span>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=s>image:</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=s>  tag: &quot;alpine&quot;</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=s>resources:</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=s>  limits:</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=s>    cpu: 100m</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=s>    memory: 128Mi</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=s>welcomePage:</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=s>  title: &quot;DEV Environment&quot;</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=s>  message: &quot;This is the development instance&quot;</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=s>EOF</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=c1># 2. Create a production values file</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a>cat<span class=w> </span>&gt;<span class=w> </span>values-prod.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=s>replicaCount: 3</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=s>image:</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=s>  tag: &quot;stable&quot;</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=s>resources:</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=s>  limits:</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=s>    cpu: 500m</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=s>    memory: 512Mi</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=s>  requests:</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a><span class=s>    cpu: 250m</span>
</span><span id=__span-16-26><a id=__codelineno-16-26 name=__codelineno-16-26 href=#__codelineno-16-26></a><span class=s>    memory: 256Mi</span>
</span><span id=__span-16-27><a id=__codelineno-16-27 name=__codelineno-16-27 href=#__codelineno-16-27></a><span class=s>welcomePage:</span>
</span><span id=__span-16-28><a id=__codelineno-16-28 name=__codelineno-16-28 href=#__codelineno-16-28></a><span class=s>  title: &quot;PRODUCTION&quot;</span>
</span><span id=__span-16-29><a id=__codelineno-16-29 name=__codelineno-16-29 href=#__codelineno-16-29></a><span class=s>  message: &quot;Production instance - handle with care&quot;</span>
</span><span id=__span-16-30><a id=__codelineno-16-30 name=__codelineno-16-30 href=#__codelineno-16-30></a><span class=s>service:</span>
</span><span id=__span-16-31><a id=__codelineno-16-31 name=__codelineno-16-31 href=#__codelineno-16-31></a><span class=s>  type: LoadBalancer</span>
</span><span id=__span-16-32><a id=__codelineno-16-32 name=__codelineno-16-32 href=#__codelineno-16-32></a><span class=s>EOF</span>
</span><span id=__span-16-33><a id=__codelineno-16-33 name=__codelineno-16-33 href=#__codelineno-16-33></a>
</span><span id=__span-16-34><a id=__codelineno-16-34 name=__codelineno-16-34 href=#__codelineno-16-34></a><span class=c1># 3. Install with dev values</span>
</span><span id=__span-16-35><a id=__codelineno-16-35 name=__codelineno-16-35 href=#__codelineno-16-35></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx-dev<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-36><a id=__codelineno-16-36 name=__codelineno-16-36 href=#__codelineno-16-36></a><span class=w>  </span>-f<span class=w> </span>values-dev.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-37><a id=__codelineno-16-37 name=__codelineno-16-37 href=#__codelineno-16-37></a><span class=w>  </span>--namespace<span class=w> </span>dev<span class=w> </span>--create-namespace
</span><span id=__span-16-38><a id=__codelineno-16-38 name=__codelineno-16-38 href=#__codelineno-16-38></a>
</span><span id=__span-16-39><a id=__codelineno-16-39 name=__codelineno-16-39 href=#__codelineno-16-39></a><span class=c1># 4. Install with prod values</span>
</span><span id=__span-16-40><a id=__codelineno-16-40 name=__codelineno-16-40 href=#__codelineno-16-40></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx-prod<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-41><a id=__codelineno-16-41 name=__codelineno-16-41 href=#__codelineno-16-41></a><span class=w>  </span>-f<span class=w> </span>values-prod.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-42><a id=__codelineno-16-42 name=__codelineno-16-42 href=#__codelineno-16-42></a><span class=w>  </span>--namespace<span class=w> </span>prod<span class=w> </span>--create-namespace
</span><span id=__span-16-43><a id=__codelineno-16-43 name=__codelineno-16-43 href=#__codelineno-16-43></a>
</span><span id=__span-16-44><a id=__codelineno-16-44 name=__codelineno-16-44 href=#__codelineno-16-44></a><span class=c1># 5. Verify different configurations</span>
</span><span id=__span-16-45><a id=__codelineno-16-45 name=__codelineno-16-45 href=#__codelineno-16-45></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>-n<span class=w> </span>dev<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-16-46><a id=__codelineno-16-46 name=__codelineno-16-46 href=#__codelineno-16-46></a>kubectl<span class=w> </span>get<span class=w> </span>deployment<span class=w> </span>-n<span class=w> </span>prod<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-16-47><a id=__codelineno-16-47 name=__codelineno-16-47 href=#__codelineno-16-47></a>
</span><span id=__span-16-48><a id=__codelineno-16-48 name=__codelineno-16-48 href=#__codelineno-16-48></a><span class=c1># 6. Override a single value on top of a values file</span>
</span><span id=__span-16-49><a id=__codelineno-16-49 name=__codelineno-16-49 href=#__codelineno-16-49></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx-dev<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-50><a id=__codelineno-16-50 name=__codelineno-16-50 href=#__codelineno-16-50></a><span class=w>  </span>-f<span class=w> </span>values-dev.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-16-51><a id=__codelineno-16-51 name=__codelineno-16-51 href=#__codelineno-16-51></a><span class=w>  </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>2</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-16-52><a id=__codelineno-16-52 name=__codelineno-16-52 href=#__codelineno-16-52></a><span class=w>  </span>--namespace<span class=w> </span>dev
</span><span id=__span-16-53><a id=__codelineno-16-53 name=__codelineno-16-53 href=#__codelineno-16-53></a>
</span><span id=__span-16-54><a id=__codelineno-16-54 name=__codelineno-16-54 href=#__codelineno-16-54></a><span class=c1># Cleanup</span>
</span><span id=__span-16-55><a id=__codelineno-16-55 name=__codelineno-16-55 href=#__codelineno-16-55></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx-dev<span class=w> </span>-n<span class=w> </span>dev
</span><span id=__span-16-56><a id=__codelineno-16-56 name=__codelineno-16-56 href=#__codelineno-16-56></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx-prod<span class=w> </span>-n<span class=w> </span>prod
</span><span id=__span-16-57><a id=__codelineno-16-57 name=__codelineno-16-57 href=#__codelineno-16-57></a>kubectl<span class=w> </span>delete<span class=w> </span>ns<span class=w> </span>dev<span class=w> </span>prod
</span></code></pre></div> </details> <hr> <h4 id=09-template-helpers-and-named-templates>09. Template Helpers and Named Templates<a class=headerlink href=#09-template-helpers-and-named-templates title="Permanent link">&para;</a></h4> <p>Create a custom named template in <code>_helpers.tpl</code> and use it across multiple templates.</p> <h4 id=scenario_8>Scenario:<a class=headerlink href=#scenario_8 title="Permanent link">&para;</a></h4> <p>◦ You have repeated logic (e.g., generating labels, resource names) across templates. ◦ Named templates (partials) in <code>_helpers.tpl</code> let you define reusable snippets.</p> <p><strong>Hint:</strong> <code>define</code>, <code>include</code>, <code>_helpers.tpl</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=c1># 1. Inspect existing helpers</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>cat<span class=w> </span>my-nginx-app/templates/_helpers.tpl
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=c1># You&#39;ll see templates like:</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=c1># {{- define &quot;my-nginx-app.name&quot; -}}         → Chart name</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=c1># {{- define &quot;my-nginx-app.fullname&quot; -}}     → Release-qualified name</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=c1># {{- define &quot;my-nginx-app.labels&quot; -}}       → Standard labels</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=c1># {{- define &quot;my-nginx-app.selectorLabels&quot; -}} → Selector labels</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=c1># 2. Add a custom helper - e.g., environment label</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/templates/_helpers.tpl<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=s>{{/*</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=s>Custom: Generate environment-specific annotations</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=s>*/}}</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=s>{{- define &quot;my-nginx-app.envAnnotations&quot; -}}</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=s>app.kubernetes.io/environment: {{ .Values.environment | default &quot;dev&quot; }}</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a><span class=s>app.kubernetes.io/team: {{ .Values.team | default &quot;platform&quot; }}</span>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=s>{{- end }}</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=s>EOF</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=c1># 3. Use it in a template (e.g., deployment.yaml metadata.annotations):</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=c1>#   annotations:</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a><span class=c1>#     {{- include &quot;my-nginx-app.envAnnotations&quot; . | nindent 4 }}</span>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=c1># 4. Add default values</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a><span class=s># Environment metadata</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a><span class=s>environment: dev</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a><span class=s>team: platform</span>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a><span class=s>EOF</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a><span class=c1># 5. Test rendering</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a>helm<span class=w> </span>template<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-A2<span class=w> </span><span class=s2>&quot;environment&quot;</span>
</span></code></pre></div> </details> <hr> <h4 id=10-template-control-flow-if-range-with>10. Template Control Flow (if / range / with)<a class=headerlink href=#10-template-control-flow-if-range-with title="Permanent link">&para;</a></h4> <p>Practice Helm template control structures: conditionals, loops, and scoping.</p> <h4 id=scenario_9>Scenario:<a class=headerlink href=#scenario_9 title="Permanent link">&para;</a></h4> <p>◦ You need to conditionally render resources, iterate over lists, or scope into nested values. ◦ Go template control flow is essential for writing flexible Helm charts.</p> <p><strong>Hint:</strong> <code>{{- if }}</code>, <code>{{- range }}</code>, <code>{{- with }}</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># 1. Conditional: only create a resource if enabled</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=c1># Already used in ingress templates:</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=c1>#   {{- if .Values.ingress.main.enabled -}}</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=c1>#   ...</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1>#   {{- end }}</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a>
</span><span id=__span-18-7><a id=__codelineno-18-7 name=__codelineno-18-7 href=#__codelineno-18-7></a><span class=c1># 2. Range: iterate over a list</span>
</span><span id=__span-18-8><a id=__codelineno-18-8 name=__codelineno-18-8 href=#__codelineno-18-8></a><span class=c1># Example: Add multiple environment variables from a values list</span>
</span><span id=__span-18-9><a id=__codelineno-18-9 name=__codelineno-18-9 href=#__codelineno-18-9></a><span class=c1># In values.yaml:</span>
</span><span id=__span-18-10><a id=__codelineno-18-10 name=__codelineno-18-10 href=#__codelineno-18-10></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-18-11><a id=__codelineno-18-11 name=__codelineno-18-11 href=#__codelineno-18-11></a>
</span><span id=__span-18-12><a id=__codelineno-18-12 name=__codelineno-18-12 href=#__codelineno-18-12></a><span class=s># Extra environment variables</span>
</span><span id=__span-18-13><a id=__codelineno-18-13 name=__codelineno-18-13 href=#__codelineno-18-13></a><span class=s>extraEnv:</span>
</span><span id=__span-18-14><a id=__codelineno-18-14 name=__codelineno-18-14 href=#__codelineno-18-14></a><span class=s>  - name: LOG_LEVEL</span>
</span><span id=__span-18-15><a id=__codelineno-18-15 name=__codelineno-18-15 href=#__codelineno-18-15></a><span class=s>    value: &quot;info&quot;</span>
</span><span id=__span-18-16><a id=__codelineno-18-16 name=__codelineno-18-16 href=#__codelineno-18-16></a><span class=s>  - name: APP_MODE</span>
</span><span id=__span-18-17><a id=__codelineno-18-17 name=__codelineno-18-17 href=#__codelineno-18-17></a><span class=s>    value: &quot;production&quot;</span>
</span><span id=__span-18-18><a id=__codelineno-18-18 name=__codelineno-18-18 href=#__codelineno-18-18></a><span class=s>EOF</span>
</span><span id=__span-18-19><a id=__codelineno-18-19 name=__codelineno-18-19 href=#__codelineno-18-19></a>
</span><span id=__span-18-20><a id=__codelineno-18-20 name=__codelineno-18-20 href=#__codelineno-18-20></a><span class=c1># In deployment.yaml, under containers[].env:</span>
</span><span id=__span-18-21><a id=__codelineno-18-21 name=__codelineno-18-21 href=#__codelineno-18-21></a><span class=c1>#   {{- range .Values.extraEnv }}</span>
</span><span id=__span-18-22><a id=__codelineno-18-22 name=__codelineno-18-22 href=#__codelineno-18-22></a><span class=c1>#   - name: {{ .name }}</span>
</span><span id=__span-18-23><a id=__codelineno-18-23 name=__codelineno-18-23 href=#__codelineno-18-23></a><span class=c1>#     value: {{ .value | quote }}</span>
</span><span id=__span-18-24><a id=__codelineno-18-24 name=__codelineno-18-24 href=#__codelineno-18-24></a><span class=c1>#   {{- end }}</span>
</span><span id=__span-18-25><a id=__codelineno-18-25 name=__codelineno-18-25 href=#__codelineno-18-25></a>
</span><span id=__span-18-26><a id=__codelineno-18-26 name=__codelineno-18-26 href=#__codelineno-18-26></a><span class=c1># 3. With: scope into a map</span>
</span><span id=__span-18-27><a id=__codelineno-18-27 name=__codelineno-18-27 href=#__codelineno-18-27></a><span class=c1># {{- with .Values.nodeSelector }}</span>
</span><span id=__span-18-28><a id=__codelineno-18-28 name=__codelineno-18-28 href=#__codelineno-18-28></a><span class=c1># nodeSelector:</span>
</span><span id=__span-18-29><a id=__codelineno-18-29 name=__codelineno-18-29 href=#__codelineno-18-29></a><span class=c1>#   {{- toYaml . | nindent 8 }}</span>
</span><span id=__span-18-30><a id=__codelineno-18-30 name=__codelineno-18-30 href=#__codelineno-18-30></a><span class=c1># {{- end }}</span>
</span><span id=__span-18-31><a id=__codelineno-18-31 name=__codelineno-18-31 href=#__codelineno-18-31></a>
</span><span id=__span-18-32><a id=__codelineno-18-32 name=__codelineno-18-32 href=#__codelineno-18-32></a><span class=c1># 4. Test the rendering</span>
</span><span id=__span-18-33><a id=__codelineno-18-33 name=__codelineno-18-33 href=#__codelineno-18-33></a>helm<span class=w> </span>template<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span>extraEnv<span class=o>[</span><span class=m>0</span><span class=o>]</span>.name<span class=o>=</span>DEBUG,extraEnv<span class=o>[</span><span class=m>0</span><span class=o>]</span>.value<span class=o>=</span><span class=nb>true</span>
</span></code></pre></div> </details> <hr> <h4 id=11-chart-dependencies-subcharts>11. Chart Dependencies (Subcharts)<a class=headerlink href=#11-chart-dependencies-subcharts title="Permanent link">&para;</a></h4> <p>Add a dependency (e.g., Redis) as a subchart and configure it through the parent <code>values.yaml</code>.</p> <h4 id=scenario_10>Scenario:<a class=headerlink href=#scenario_10 title="Permanent link">&para;</a></h4> <p>◦ Your application needs a Redis cache alongside nginx. ◦ Instead of writing Redis manifests from scratch, you depend on an existing chart from a repository.</p> <p><strong>Hint:</strong> <code>Chart.yaml</code> dependencies, <code>helm dependency update</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1># 1. Add dependency to Chart.yaml</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/Chart.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=s>dependencies:</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=s>  - name: redis</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=s>    version: &quot;~18.0&quot;</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=s>    repository: &quot;https://charts.bitnami.com/bitnami&quot;</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=s>    condition: redis.enabled</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=s>EOF</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=c1># 2. Add redis configuration in values.yaml</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a>cat<span class=w> </span>&gt;&gt;<span class=w> </span>my-nginx-app/values.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a><span class=s># Redis subchart configuration</span>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=s>redis:</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=s>  enabled: false          # Set to true to deploy Redis alongside nginx</span>
</span><span id=__span-19-17><a id=__codelineno-19-17 name=__codelineno-19-17 href=#__codelineno-19-17></a><span class=s>  architecture: standalone</span>
</span><span id=__span-19-18><a id=__codelineno-19-18 name=__codelineno-19-18 href=#__codelineno-19-18></a><span class=s>  auth:</span>
</span><span id=__span-19-19><a id=__codelineno-19-19 name=__codelineno-19-19 href=#__codelineno-19-19></a><span class=s>    enabled: false</span>
</span><span id=__span-19-20><a id=__codelineno-19-20 name=__codelineno-19-20 href=#__codelineno-19-20></a><span class=s>EOF</span>
</span><span id=__span-19-21><a id=__codelineno-19-21 name=__codelineno-19-21 href=#__codelineno-19-21></a>
</span><span id=__span-19-22><a id=__codelineno-19-22 name=__codelineno-19-22 href=#__codelineno-19-22></a><span class=c1># 3. Build dependencies (downloads the redis chart into charts/)</span>
</span><span id=__span-19-23><a id=__codelineno-19-23 name=__codelineno-19-23 href=#__codelineno-19-23></a>helm<span class=w> </span>dependency<span class=w> </span>update<span class=w> </span>my-nginx-app/
</span><span id=__span-19-24><a id=__codelineno-19-24 name=__codelineno-19-24 href=#__codelineno-19-24></a>
</span><span id=__span-19-25><a id=__codelineno-19-25 name=__codelineno-19-25 href=#__codelineno-19-25></a><span class=c1># 4. Verify</span>
</span><span id=__span-19-26><a id=__codelineno-19-26 name=__codelineno-19-26 href=#__codelineno-19-26></a>ls<span class=w> </span>my-nginx-app/charts/
</span><span id=__span-19-27><a id=__codelineno-19-27 name=__codelineno-19-27 href=#__codelineno-19-27></a><span class=c1># Should show: redis-18.x.x.tgz</span>
</span><span id=__span-19-28><a id=__codelineno-19-28 name=__codelineno-19-28 href=#__codelineno-19-28></a>
</span><span id=__span-19-29><a id=__codelineno-19-29 name=__codelineno-19-29 href=#__codelineno-19-29></a><span class=c1># 5. Install with Redis enabled</span>
</span><span id=__span-19-30><a id=__codelineno-19-30 name=__codelineno-19-30 href=#__codelineno-19-30></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span>redis.enabled<span class=o>=</span><span class=nb>true</span>
</span><span id=__span-19-31><a id=__codelineno-19-31 name=__codelineno-19-31 href=#__codelineno-19-31></a>
</span><span id=__span-19-32><a id=__codelineno-19-32 name=__codelineno-19-32 href=#__codelineno-19-32></a><span class=c1># 6. Verify Redis pods</span>
</span><span id=__span-19-33><a id=__codelineno-19-33 name=__codelineno-19-33 href=#__codelineno-19-33></a>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-19-34><a id=__codelineno-19-34 name=__codelineno-19-34 href=#__codelineno-19-34></a>
</span><span id=__span-19-35><a id=__codelineno-19-35 name=__codelineno-19-35 href=#__codelineno-19-35></a><span class=c1># Cleanup</span>
</span><span id=__span-19-36><a id=__codelineno-19-36 name=__codelineno-19-36 href=#__codelineno-19-36></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=12-linting-dry-run-and-debugging>12. Linting, Dry-Run, and Debugging<a class=headerlink href=#12-linting-dry-run-and-debugging title="Permanent link">&para;</a></h4> <p>Use Helm&rsquo;s built-in tools to validate, debug, and troubleshoot your chart before deploying.</p> <h4 id=scenario_11>Scenario:<a class=headerlink href=#scenario_11 title="Permanent link">&para;</a></h4> <p>◦ You modified several templates and want to catch errors before deploying to the cluster. ◦ Helm provides lint, template, dry-run, and debug tools for this purpose.</p> <p><strong>Hint:</strong> <code>helm lint</code>, <code>helm template</code>, <code>--dry-run</code>, <code>--debug</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1># 1. Lint - checks for common errors and best practices</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a>helm<span class=w> </span>lint<span class=w> </span>my-nginx-app/
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=c1># With values overrides</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>helm<span class=w> </span>lint<span class=w> </span>my-nginx-app/<span class=w> </span>-f<span class=w> </span>values-dev.yaml
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=c1># 2. Template - render manifests locally (no cluster needed)</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a>helm<span class=w> </span>template<span class=w> </span>my-release<span class=w> </span>my-nginx-app/<span class=w> </span>&gt;<span class=w> </span>rendered.yaml
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a>cat<span class=w> </span>rendered.yaml
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a><span class=c1># 3. Dry-run - simulates install against the cluster (validates with API server)</span>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--dry-run
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a>
</span><span id=__span-20-14><a id=__codelineno-20-14 name=__codelineno-20-14 href=#__codelineno-20-14></a><span class=c1># 4. Dry-run + Debug - shows rendered templates AND computed values</span>
</span><span id=__span-20-15><a id=__codelineno-20-15 name=__codelineno-20-15 href=#__codelineno-20-15></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--dry-run<span class=w> </span>--debug
</span><span id=__span-20-16><a id=__codelineno-20-16 name=__codelineno-20-16 href=#__codelineno-20-16></a>
</span><span id=__span-20-17><a id=__codelineno-20-17 name=__codelineno-20-17 href=#__codelineno-20-17></a><span class=c1># 5. Get rendered templates for a deployed release</span>
</span><span id=__span-20-18><a id=__codelineno-20-18 name=__codelineno-20-18 href=#__codelineno-20-18></a>helm<span class=w> </span>get<span class=w> </span>manifest<span class=w> </span>my-nginx
</span><span id=__span-20-19><a id=__codelineno-20-19 name=__codelineno-20-19 href=#__codelineno-20-19></a>
</span><span id=__span-20-20><a id=__codelineno-20-20 name=__codelineno-20-20 href=#__codelineno-20-20></a><span class=c1># 6. Get the computed values for a deployed release</span>
</span><span id=__span-20-21><a id=__codelineno-20-21 name=__codelineno-20-21 href=#__codelineno-20-21></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx
</span><span id=__span-20-22><a id=__codelineno-20-22 name=__codelineno-20-22 href=#__codelineno-20-22></a>
</span><span id=__span-20-23><a id=__codelineno-20-23 name=__codelineno-20-23 href=#__codelineno-20-23></a><span class=c1># 7. Get all information about a release</span>
</span><span id=__span-20-24><a id=__codelineno-20-24 name=__codelineno-20-24 href=#__codelineno-20-24></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=13-package-and-host-a-chart-repository>13. Package and Host a Chart Repository<a class=headerlink href=#13-package-and-host-a-chart-repository title="Permanent link">&para;</a></h4> <p>Package the chart and host it in a Git-based chart repository using GitHub Pages.</p> <h4 id=scenario_12>Scenario:<a class=headerlink href=#scenario_12 title="Permanent link">&para;</a></h4> <p>◦ You want to share your Helm chart with your team or the community. ◦ A Helm chart repository is simply a web server hosting <code>index.yaml</code> and <code>.tgz</code> chart packages. ◦ GitHub Pages is a free and easy way to host a chart repo.</p> <p><strong>Hint:</strong> <code>helm package</code>, <code>helm repo index</code>, GitHub Pages</p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=c1># ── Step 1: Package the chart ──</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a>helm<span class=w> </span>package<span class=w> </span>my-nginx-app/
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=c1># Output: my-nginx-app-0.1.0.tgz</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=c1># ── Step 2: Create a chart repository on GitHub ──</span>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=c1># Create a new GitHub repository (e.g., &quot;helm-charts&quot;)</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=c1># Clone it locally:</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>git<span class=w> </span>clone<span class=w> </span>https://github.com/&lt;your-username&gt;/helm-charts.git
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=nb>cd</span><span class=w> </span>helm-charts
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>
</span><span id=__span-21-13><a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a><span class=c1># Create a docs/ directory (GitHub Pages will serve from here)</span>
</span><span id=__span-21-14><a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a>mkdir<span class=w> </span>-p<span class=w> </span>docs
</span><span id=__span-21-15><a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a>
</span><span id=__span-21-16><a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a><span class=c1># Move the packaged chart</span>
</span><span id=__span-21-17><a id=__codelineno-21-17 name=__codelineno-21-17 href=#__codelineno-21-17></a>cp<span class=w> </span>../my-nginx-app-0.1.0.tgz<span class=w> </span>docs/
</span><span id=__span-21-18><a id=__codelineno-21-18 name=__codelineno-21-18 href=#__codelineno-21-18></a>
</span><span id=__span-21-19><a id=__codelineno-21-19 name=__codelineno-21-19 href=#__codelineno-21-19></a><span class=c1># ── Step 3: Generate the repository index ──</span>
</span><span id=__span-21-20><a id=__codelineno-21-20 name=__codelineno-21-20 href=#__codelineno-21-20></a>
</span><span id=__span-21-21><a id=__codelineno-21-21 name=__codelineno-21-21 href=#__codelineno-21-21></a>helm<span class=w> </span>repo<span class=w> </span>index<span class=w> </span>docs/<span class=w> </span>--url<span class=w> </span>https://&lt;your-username&gt;.github.io/helm-charts/
</span><span id=__span-21-22><a id=__codelineno-21-22 name=__codelineno-21-22 href=#__codelineno-21-22></a>
</span><span id=__span-21-23><a id=__codelineno-21-23 name=__codelineno-21-23 href=#__codelineno-21-23></a><span class=c1># Verify the index</span>
</span><span id=__span-21-24><a id=__codelineno-21-24 name=__codelineno-21-24 href=#__codelineno-21-24></a>cat<span class=w> </span>docs/index.yaml
</span><span id=__span-21-25><a id=__codelineno-21-25 name=__codelineno-21-25 href=#__codelineno-21-25></a>
</span><span id=__span-21-26><a id=__codelineno-21-26 name=__codelineno-21-26 href=#__codelineno-21-26></a><span class=c1># ── Step 4: Push to GitHub ──</span>
</span><span id=__span-21-27><a id=__codelineno-21-27 name=__codelineno-21-27 href=#__codelineno-21-27></a>
</span><span id=__span-21-28><a id=__codelineno-21-28 name=__codelineno-21-28 href=#__codelineno-21-28></a>git<span class=w> </span>add<span class=w> </span>.
</span><span id=__span-21-29><a id=__codelineno-21-29 name=__codelineno-21-29 href=#__codelineno-21-29></a>git<span class=w> </span>commit<span class=w> </span>-m<span class=w> </span><span class=s2>&quot;Add my-nginx-app chart&quot;</span>
</span><span id=__span-21-30><a id=__codelineno-21-30 name=__codelineno-21-30 href=#__codelineno-21-30></a>git<span class=w> </span>push<span class=w> </span>origin<span class=w> </span>main
</span><span id=__span-21-31><a id=__codelineno-21-31 name=__codelineno-21-31 href=#__codelineno-21-31></a>
</span><span id=__span-21-32><a id=__codelineno-21-32 name=__codelineno-21-32 href=#__codelineno-21-32></a><span class=c1># ── Step 5: Enable GitHub Pages ──</span>
</span><span id=__span-21-33><a id=__codelineno-21-33 name=__codelineno-21-33 href=#__codelineno-21-33></a>
</span><span id=__span-21-34><a id=__codelineno-21-34 name=__codelineno-21-34 href=#__codelineno-21-34></a><span class=c1># Go to: GitHub repo → Settings → Pages</span>
</span><span id=__span-21-35><a id=__codelineno-21-35 name=__codelineno-21-35 href=#__codelineno-21-35></a><span class=c1># Set Source: Deploy from branch → main → /docs</span>
</span><span id=__span-21-36><a id=__codelineno-21-36 name=__codelineno-21-36 href=#__codelineno-21-36></a><span class=c1># Save and wait for deployment</span>
</span><span id=__span-21-37><a id=__codelineno-21-37 name=__codelineno-21-37 href=#__codelineno-21-37></a>
</span><span id=__span-21-38><a id=__codelineno-21-38 name=__codelineno-21-38 href=#__codelineno-21-38></a><span class=c1># ── Step 6: Add the repo to Helm ──</span>
</span><span id=__span-21-39><a id=__codelineno-21-39 name=__codelineno-21-39 href=#__codelineno-21-39></a>
</span><span id=__span-21-40><a id=__codelineno-21-40 name=__codelineno-21-40 href=#__codelineno-21-40></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>my-charts<span class=w> </span>https://&lt;your-username&gt;.github.io/helm-charts/
</span><span id=__span-21-41><a id=__codelineno-21-41 name=__codelineno-21-41 href=#__codelineno-21-41></a>helm<span class=w> </span>repo<span class=w> </span>update
</span><span id=__span-21-42><a id=__codelineno-21-42 name=__codelineno-21-42 href=#__codelineno-21-42></a>
</span><span id=__span-21-43><a id=__codelineno-21-43 name=__codelineno-21-43 href=#__codelineno-21-43></a><span class=c1># Verify the chart is available</span>
</span><span id=__span-21-44><a id=__codelineno-21-44 name=__codelineno-21-44 href=#__codelineno-21-44></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>my-charts
</span><span id=__span-21-45><a id=__codelineno-21-45 name=__codelineno-21-45 href=#__codelineno-21-45></a>
</span><span id=__span-21-46><a id=__codelineno-21-46 name=__codelineno-21-46 href=#__codelineno-21-46></a><span class=c1># ── Step 7: Install from the repository ──</span>
</span><span id=__span-21-47><a id=__codelineno-21-47 name=__codelineno-21-47 href=#__codelineno-21-47></a>
</span><span id=__span-21-48><a id=__codelineno-21-48 name=__codelineno-21-48 href=#__codelineno-21-48></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-charts/my-nginx-app
</span></code></pre></div> <p><strong>Alternative: Use OCI Registry (Helm 3.8+)</strong></p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1># Push to an OCI-compatible registry (e.g., GitHub Container Registry)</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>helm<span class=w> </span>push<span class=w> </span>my-nginx-app-0.1.0.tgz<span class=w> </span>oci://ghcr.io/&lt;your-username&gt;/charts
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=c1># Install from OCI</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>oci://ghcr.io/&lt;your-username&gt;/charts/my-nginx-app<span class=w> </span>--version<span class=w> </span><span class=m>0</span>.1.0
</span></code></pre></div> </details> <hr> <h4 id=14-upgrade-rollback-and-release-history>14. Upgrade, Rollback, and Release History<a class=headerlink href=#14-upgrade-rollback-and-release-history title="Permanent link">&para;</a></h4> <p>Upgrade a release with new values, inspect its history, and rollback to a previous revision.</p> <h4 id=scenario_13>Scenario:<a class=headerlink href=#scenario_13 title="Permanent link">&para;</a></h4> <p>◦ You deployed version 1 of your chart, then upgraded to version 2 with bad configuration. ◦ You need to quickly rollback to the known-good state.</p> <p><strong>Hint:</strong> <code>helm upgrade</code>, <code>helm history</code>, <code>helm rollback</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># 1. Initial install (revision 1)</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=w>  </span>--set<span class=w> </span>welcomePage.title<span class=o>=</span><span class=s2>&quot;Version 1&quot;</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=c1># 2. Upgrade to revision 2 (change the title)</span>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>  </span>--set<span class=w> </span>welcomePage.title<span class=o>=</span><span class=s2>&quot;Version 2 - BROKEN&quot;</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=c1># 3. Check release history</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a>helm<span class=w> </span><span class=nb>history</span><span class=w> </span>my-nginx
</span><span id=__span-23-11><a id=__codelineno-23-11 name=__codelineno-23-11 href=#__codelineno-23-11></a>
</span><span id=__span-23-12><a id=__codelineno-23-12 name=__codelineno-23-12 href=#__codelineno-23-12></a><span class=c1># Output:</span>
</span><span id=__span-23-13><a id=__codelineno-23-13 name=__codelineno-23-13 href=#__codelineno-23-13></a><span class=c1># REVISION  STATUS      DESCRIPTION</span>
</span><span id=__span-23-14><a id=__codelineno-23-14 name=__codelineno-23-14 href=#__codelineno-23-14></a><span class=c1># 1         superseded  Install complete</span>
</span><span id=__span-23-15><a id=__codelineno-23-15 name=__codelineno-23-15 href=#__codelineno-23-15></a><span class=c1># 2         deployed    Upgrade complete</span>
</span><span id=__span-23-16><a id=__codelineno-23-16 name=__codelineno-23-16 href=#__codelineno-23-16></a>
</span><span id=__span-23-17><a id=__codelineno-23-17 name=__codelineno-23-17 href=#__codelineno-23-17></a><span class=c1># 4. Rollback to revision 1</span>
</span><span id=__span-23-18><a id=__codelineno-23-18 name=__codelineno-23-18 href=#__codelineno-23-18></a>helm<span class=w> </span>rollback<span class=w> </span>my-nginx<span class=w> </span><span class=m>1</span>
</span><span id=__span-23-19><a id=__codelineno-23-19 name=__codelineno-23-19 href=#__codelineno-23-19></a>
</span><span id=__span-23-20><a id=__codelineno-23-20 name=__codelineno-23-20 href=#__codelineno-23-20></a><span class=c1># 5. Verify history (now shows 3 revisions)</span>
</span><span id=__span-23-21><a id=__codelineno-23-21 name=__codelineno-23-21 href=#__codelineno-23-21></a>helm<span class=w> </span><span class=nb>history</span><span class=w> </span>my-nginx
</span><span id=__span-23-22><a id=__codelineno-23-22 name=__codelineno-23-22 href=#__codelineno-23-22></a>
</span><span id=__span-23-23><a id=__codelineno-23-23 name=__codelineno-23-23 href=#__codelineno-23-23></a><span class=c1># Output:</span>
</span><span id=__span-23-24><a id=__codelineno-23-24 name=__codelineno-23-24 href=#__codelineno-23-24></a><span class=c1># REVISION  STATUS      DESCRIPTION</span>
</span><span id=__span-23-25><a id=__codelineno-23-25 name=__codelineno-23-25 href=#__codelineno-23-25></a><span class=c1># 1         superseded  Install complete</span>
</span><span id=__span-23-26><a id=__codelineno-23-26 name=__codelineno-23-26 href=#__codelineno-23-26></a><span class=c1># 2         superseded  Upgrade complete</span>
</span><span id=__span-23-27><a id=__codelineno-23-27 name=__codelineno-23-27 href=#__codelineno-23-27></a><span class=c1># 3         deployed    Rollback to 1</span>
</span><span id=__span-23-28><a id=__codelineno-23-28 name=__codelineno-23-28 href=#__codelineno-23-28></a>
</span><span id=__span-23-29><a id=__codelineno-23-29 name=__codelineno-23-29 href=#__codelineno-23-29></a><span class=c1># 6. Verify the running app shows &quot;Version 1&quot; again</span>
</span><span id=__span-23-30><a id=__codelineno-23-30 name=__codelineno-23-30 href=#__codelineno-23-30></a>kubectl<span class=w> </span>port-forward<span class=w> </span>svc/my-nginx-my-nginx-app<span class=w> </span><span class=m>8080</span>:80
</span><span id=__span-23-31><a id=__codelineno-23-31 name=__codelineno-23-31 href=#__codelineno-23-31></a>curl<span class=w> </span>http://localhost:8080<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s2>&quot;Version&quot;</span>
</span><span id=__span-23-32><a id=__codelineno-23-32 name=__codelineno-23-32 href=#__codelineno-23-32></a>
</span><span id=__span-23-33><a id=__codelineno-23-33 name=__codelineno-23-33 href=#__codelineno-23-33></a><span class=c1># Cleanup</span>
</span><span id=__span-23-34><a id=__codelineno-23-34 name=__codelineno-23-34 href=#__codelineno-23-34></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=15-hooks-pre-install-post-install>15. Hooks (Pre-install / Post-install)<a class=headerlink href=#15-hooks-pre-install-post-install title="Permanent link">&para;</a></h4> <p>Create Helm hooks that run a Job before and after chart installation.</p> <h4 id=scenario_14>Scenario:<a class=headerlink href=#scenario_14 title="Permanent link">&para;</a></h4> <p>◦ You need to run a database migration before the app starts, or send a notification after deployment. ◦ Helm hooks let you run resources at specific points in the release lifecycle.</p> <p><strong>Hint:</strong> <code>helm.sh/hook</code> annotation, <code>pre-install</code>, <code>post-install</code></p> <details class=example> <summary>Solution</summary> <p><strong>Step 1:</strong> Create a pre-install hook [templates/pre-install-job.yaml]</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/pre-install-job.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=s>apiVersion: batch/v1</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a><span class=s>kind: Job</span>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=s>metadata:</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-pre-install</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=s>  labels:</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=s>  annotations:</span>
</span><span id=__span-24-9><a id=__codelineno-24-9 name=__codelineno-24-9 href=#__codelineno-24-9></a><span class=s>    &quot;helm.sh/hook&quot;: pre-install,pre-upgrade</span>
</span><span id=__span-24-10><a id=__codelineno-24-10 name=__codelineno-24-10 href=#__codelineno-24-10></a><span class=s>    &quot;helm.sh/hook-weight&quot;: &quot;-5&quot;</span>
</span><span id=__span-24-11><a id=__codelineno-24-11 name=__codelineno-24-11 href=#__codelineno-24-11></a><span class=s>    &quot;helm.sh/hook-delete-policy&quot;: hook-succeeded</span>
</span><span id=__span-24-12><a id=__codelineno-24-12 name=__codelineno-24-12 href=#__codelineno-24-12></a><span class=s>spec:</span>
</span><span id=__span-24-13><a id=__codelineno-24-13 name=__codelineno-24-13 href=#__codelineno-24-13></a><span class=s>  template:</span>
</span><span id=__span-24-14><a id=__codelineno-24-14 name=__codelineno-24-14 href=#__codelineno-24-14></a><span class=s>    spec:</span>
</span><span id=__span-24-15><a id=__codelineno-24-15 name=__codelineno-24-15 href=#__codelineno-24-15></a><span class=s>      restartPolicy: Never</span>
</span><span id=__span-24-16><a id=__codelineno-24-16 name=__codelineno-24-16 href=#__codelineno-24-16></a><span class=s>      containers:</span>
</span><span id=__span-24-17><a id=__codelineno-24-17 name=__codelineno-24-17 href=#__codelineno-24-17></a><span class=s>        - name: pre-install</span>
</span><span id=__span-24-18><a id=__codelineno-24-18 name=__codelineno-24-18 href=#__codelineno-24-18></a><span class=s>          image: busybox</span>
</span><span id=__span-24-19><a id=__codelineno-24-19 name=__codelineno-24-19 href=#__codelineno-24-19></a><span class=s>          command:</span>
</span><span id=__span-24-20><a id=__codelineno-24-20 name=__codelineno-24-20 href=#__codelineno-24-20></a><span class=s>            - sh</span>
</span><span id=__span-24-21><a id=__codelineno-24-21 name=__codelineno-24-21 href=#__codelineno-24-21></a><span class=s>            - -c</span>
</span><span id=__span-24-22><a id=__codelineno-24-22 name=__codelineno-24-22 href=#__codelineno-24-22></a><span class=s>            - |</span>
</span><span id=__span-24-23><a id=__codelineno-24-23 name=__codelineno-24-23 href=#__codelineno-24-23></a><span class=s>              echo &quot;=== Pre-install hook ===&quot;</span>
</span><span id=__span-24-24><a id=__codelineno-24-24 name=__codelineno-24-24 href=#__codelineno-24-24></a><span class=s>              echo &quot;Running pre-flight checks...&quot;</span>
</span><span id=__span-24-25><a id=__codelineno-24-25 name=__codelineno-24-25 href=#__codelineno-24-25></a><span class=s>              echo &quot;Release: {{ .Release.Name }}&quot;</span>
</span><span id=__span-24-26><a id=__codelineno-24-26 name=__codelineno-24-26 href=#__codelineno-24-26></a><span class=s>              echo &quot;Namespace: {{ .Release.Namespace }}&quot;</span>
</span><span id=__span-24-27><a id=__codelineno-24-27 name=__codelineno-24-27 href=#__codelineno-24-27></a><span class=s>              echo &quot;Chart: {{ .Chart.Name }}-{{ .Chart.Version }}&quot;</span>
</span><span id=__span-24-28><a id=__codelineno-24-28 name=__codelineno-24-28 href=#__codelineno-24-28></a><span class=s>              echo &quot;Pre-install complete!&quot;</span>
</span><span id=__span-24-29><a id=__codelineno-24-29 name=__codelineno-24-29 href=#__codelineno-24-29></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <p><strong>Step 2:</strong> Create a post-install hook [templates/post-install-job.yaml]</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/post-install-job.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=s>apiVersion: batch/v1</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=s>kind: Job</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=s>metadata:</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-post-install</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=s>  labels:</span>
</span><span id=__span-25-7><a id=__codelineno-25-7 name=__codelineno-25-7 href=#__codelineno-25-7></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-25-8><a id=__codelineno-25-8 name=__codelineno-25-8 href=#__codelineno-25-8></a><span class=s>  annotations:</span>
</span><span id=__span-25-9><a id=__codelineno-25-9 name=__codelineno-25-9 href=#__codelineno-25-9></a><span class=s>    &quot;helm.sh/hook&quot;: post-install,post-upgrade</span>
</span><span id=__span-25-10><a id=__codelineno-25-10 name=__codelineno-25-10 href=#__codelineno-25-10></a><span class=s>    &quot;helm.sh/hook-weight&quot;: &quot;5&quot;</span>
</span><span id=__span-25-11><a id=__codelineno-25-11 name=__codelineno-25-11 href=#__codelineno-25-11></a><span class=s>    &quot;helm.sh/hook-delete-policy&quot;: hook-succeeded</span>
</span><span id=__span-25-12><a id=__codelineno-25-12 name=__codelineno-25-12 href=#__codelineno-25-12></a><span class=s>spec:</span>
</span><span id=__span-25-13><a id=__codelineno-25-13 name=__codelineno-25-13 href=#__codelineno-25-13></a><span class=s>  template:</span>
</span><span id=__span-25-14><a id=__codelineno-25-14 name=__codelineno-25-14 href=#__codelineno-25-14></a><span class=s>    spec:</span>
</span><span id=__span-25-15><a id=__codelineno-25-15 name=__codelineno-25-15 href=#__codelineno-25-15></a><span class=s>      restartPolicy: Never</span>
</span><span id=__span-25-16><a id=__codelineno-25-16 name=__codelineno-25-16 href=#__codelineno-25-16></a><span class=s>      containers:</span>
</span><span id=__span-25-17><a id=__codelineno-25-17 name=__codelineno-25-17 href=#__codelineno-25-17></a><span class=s>        - name: post-install</span>
</span><span id=__span-25-18><a id=__codelineno-25-18 name=__codelineno-25-18 href=#__codelineno-25-18></a><span class=s>          image: busybox</span>
</span><span id=__span-25-19><a id=__codelineno-25-19 name=__codelineno-25-19 href=#__codelineno-25-19></a><span class=s>          command:</span>
</span><span id=__span-25-20><a id=__codelineno-25-20 name=__codelineno-25-20 href=#__codelineno-25-20></a><span class=s>            - sh</span>
</span><span id=__span-25-21><a id=__codelineno-25-21 name=__codelineno-25-21 href=#__codelineno-25-21></a><span class=s>            - -c</span>
</span><span id=__span-25-22><a id=__codelineno-25-22 name=__codelineno-25-22 href=#__codelineno-25-22></a><span class=s>            - |</span>
</span><span id=__span-25-23><a id=__codelineno-25-23 name=__codelineno-25-23 href=#__codelineno-25-23></a><span class=s>              echo &quot;=== Post-install hook ===&quot;</span>
</span><span id=__span-25-24><a id=__codelineno-25-24 name=__codelineno-25-24 href=#__codelineno-25-24></a><span class=s>              echo &quot;Deployment verified!&quot;</span>
</span><span id=__span-25-25><a id=__codelineno-25-25 name=__codelineno-25-25 href=#__codelineno-25-25></a><span class=s>              echo &quot;Release: {{ .Release.Name }}&quot;</span>
</span><span id=__span-25-26><a id=__codelineno-25-26 name=__codelineno-25-26 href=#__codelineno-25-26></a><span class=s>              echo &quot;Post-install complete!&quot;</span>
</span><span id=__span-25-27><a id=__codelineno-25-27 name=__codelineno-25-27 href=#__codelineno-25-27></a><span class=s>TEMPLATE</span>
</span></code></pre></div> <p><strong>Step 3:</strong> Deploy and observe hooks</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=c1># Install and watch the hooks execute</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=c1># Check jobs (hook jobs auto-delete on success due to hook-delete-policy)</span>
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>kubectl<span class=w> </span>get<span class=w> </span><span class=nb>jobs</span>
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>
</span><span id=__span-26-7><a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a><span class=c1># If you want to see the logs, remove the hook-delete-policy temporarily</span>
</span><span id=__span-26-8><a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a><span class=c1># and check:</span>
</span><span id=__span-26-9><a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>kubectl<span class=w> </span>logs<span class=w> </span>job/my-nginx-my-nginx-app-pre-install
</span><span id=__span-26-10><a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>kubectl<span class=w> </span>logs<span class=w> </span>job/my-nginx-my-nginx-app-post-install
</span><span id=__span-26-11><a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>
</span><span id=__span-26-12><a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a><span class=c1># Hook execution order:</span>
</span><span id=__span-26-13><a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a><span class=c1># 1. pre-install Job runs</span>
</span><span id=__span-26-14><a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a><span class=c1># 2. Chart resources are created (Deployment, Service, etc.)</span>
</span><span id=__span-26-15><a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a><span class=c1># 3. post-install Job runs</span>
</span><span id=__span-26-16><a id=__codelineno-26-16 name=__codelineno-26-16 href=#__codelineno-26-16></a>
</span><span id=__span-26-17><a id=__codelineno-26-17 name=__codelineno-26-17 href=#__codelineno-26-17></a><span class=c1># Cleanup</span>
</span><span id=__span-26-18><a id=__codelineno-26-18 name=__codelineno-26-18 href=#__codelineno-26-18></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h3 id=diagram-helm-chart-architecture>Diagram: Helm Chart Architecture<a class=headerlink href=#diagram-helm-chart-architecture title="Permanent link">&para;</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>┌──────────────────────────────────────────────────────────────┐
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>│                     Helm Chart: my-nginx-app                 │
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a>├──────────────────────────────────────────────────────────────┤
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a>│                                                              │
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a>│  Chart.yaml ──── name, version, dependencies                 │
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a>│                                                              │
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a>│  values.yaml ─── defaults ◄── values-dev.yaml               │
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>│                             ◄── values-prod.yaml             │
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>│                             ◄── --set overrides              │
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a>│                                                              │
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>│  templates/ ─┬── deployment.yaml ──► Deployment              │
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a>│              ├── service.yaml ─────► Service (ClusterIP)     │
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a>│              ├── service-external ─► Service (ExternalName)  │
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>│              ├── ingress-main ─────► Ingress (path: /)       │
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a>│              ├── ingress-status ───► Ingress (path: /status) │
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a>│              ├── configmap-html ───► ConfigMap (welcome page)│
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>│              ├── pre-install-job ──► Hook (pre-install)      │
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>│              ├── post-install-job ─► Hook (post-install)     │
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a>│              ├── _helpers.tpl ─────► Named templates         │
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a>│              └── NOTES.txt ────────► Post-install message    │
</span><span id=__span-27-21><a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a>│                                                              │
</span><span id=__span-27-22><a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>│  charts/ ────── redis (subchart dependency)                  │
</span><span id=__span-27-23><a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a>│                                                              │
</span><span id=__span-27-24><a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a>└──────────────────────────────────────────────────────────────┘
</span><span id=__span-27-25><a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a>                            │
</span><span id=__span-27-26><a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a>                  helm package ──► my-nginx-app-0.1.0.tgz
</span><span id=__span-27-27><a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a>                            │
</span><span id=__span-27-28><a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>                  GitHub Pages / OCI Registry
</span><span id=__span-27-29><a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a>                            │
</span><span id=__span-27-30><a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a>                  helm repo add / helm install
</span></code></pre></div> <hr> <h3 id=quick-reference-essential-helm-commands>Quick Reference: Essential Helm Commands<a class=headerlink href=#quick-reference-essential-helm-commands title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>helm create &lt;name&gt;</code></td> <td>Scaffold a new chart</td> </tr> <tr> <td><code>helm install &lt;release&gt; &lt;chart&gt;</code></td> <td>Install a chart</td> </tr> <tr> <td><code>helm upgrade &lt;release&gt; &lt;chart&gt;</code></td> <td>Upgrade a release</td> </tr> <tr> <td><code>helm upgrade --install</code></td> <td>Install or upgrade (idempotent)</td> </tr> <tr> <td><code>helm uninstall &lt;release&gt;</code></td> <td>Remove a release</td> </tr> <tr> <td><code>helm list</code></td> <td>List installed releases</td> </tr> <tr> <td><code>helm history &lt;release&gt;</code></td> <td>Show release revision history</td> </tr> <tr> <td><code>helm rollback &lt;release&gt; &lt;rev&gt;</code></td> <td>Rollback to a previous revision</td> </tr> <tr> <td><code>helm template &lt;release&gt; &lt;chart&gt;</code></td> <td>Render templates locally</td> </tr> <tr> <td><code>helm lint &lt;chart&gt;</code></td> <td>Check chart for errors</td> </tr> <tr> <td><code>helm package &lt;chart&gt;</code></td> <td>Package chart into <code>.tgz</code></td> </tr> <tr> <td><code>helm repo index &lt;dir&gt;</code></td> <td>Generate repository index</td> </tr> <tr> <td><code>helm repo add &lt;name&gt; &lt;url&gt;</code></td> <td>Add a chart repository</td> </tr> <tr> <td><code>helm search repo &lt;keyword&gt;</code></td> <td>Search charts in added repos</td> </tr> <tr> <td><code>helm dependency update &lt;chart&gt;</code></td> <td>Download chart dependencies</td> </tr> <tr> <td><code>helm get values &lt;release&gt;</code></td> <td>Show computed values for a release</td> </tr> <tr> <td><code>helm get manifest &lt;release&gt;</code></td> <td>Show rendered manifests for a release</td> </tr> </tbody> </table> <hr> <h4 id=16-use-helm-status-to-inspect-a-release>16. Use <code>helm status</code> to Inspect a Release<a class=headerlink href=#16-use-helm-status-to-inspect-a-release title="Permanent link">&para;</a></h4> <p>Use <code>helm status</code> to view detailed information about a deployed release including resource status and NOTES.</p> <h4 id=scenario_15>Scenario:<a class=headerlink href=#scenario_15 title="Permanent link">&para;</a></h4> <p>◦ A release was deployed by another team member and you need to understand its current state. ◦ You want to see the NOTES.txt output again without reinstalling. ◦ <code>helm status</code> provides a quick overview of the release deployment status and health.</p> <p><strong>Hint:</strong> <code>helm status</code>, <code>--revision</code>, <code>-o yaml</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># 1. Install a release first</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=c1># 2. Get the status of the release</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a>helm<span class=w> </span>status<span class=w> </span>my-nginx
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=c1># Output shows:</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=c1># - Last deployment time</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=c1># - Release status (deployed, failed, pending, etc.)</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=c1># - Deployed resources</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=c1># - NOTES.txt content</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=c1># 3. Get status in YAML format</span>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-28-15><a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a>
</span><span id=__span-28-16><a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a><span class=c1># 4. Get status in JSON format</span>
</span><span id=__span-28-17><a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-28-18><a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a>
</span><span id=__span-28-19><a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a><span class=c1># 5. Get status of a specific revision</span>
</span><span id=__span-28-20><a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>1</span>
</span><span id=__span-28-21><a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a>
</span><span id=__span-28-22><a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a><span class=c1># 6. Check status from a specific namespace</span>
</span><span id=__span-28-23><a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span>--namespace<span class=w> </span>production
</span><span id=__span-28-24><a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a>
</span><span id=__span-28-25><a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a><span class=c1># Cleanup</span>
</span><span id=__span-28-26><a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=17-extract-values-with-helm-get-values>17. Extract Values with <code>helm get values</code><a class=headerlink href=#17-extract-values-with-helm-get-values title="Permanent link">&para;</a></h4> <p>Use <code>helm get values</code> to see what values were actually used for a deployed release.</p> <h4 id=scenario_16>Scenario:<a class=headerlink href=#scenario_16 title="Permanent link">&para;</a></h4> <p>◦ You deployed a chart months ago with custom values and need to remember what overrides were applied. ◦ Multiple team members have upgraded the release and you want to know the current configuration. ◦ You need to replicate the same configuration in another environment.</p> <p><strong>Hint:</strong> <code>helm get values</code>, <code>--all</code>, <code>--revision</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1># 1. Install with custom values</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=w>  </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>3</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=w>  </span>--set<span class=w> </span>welcomePage.title<span class=o>=</span><span class=s2>&quot;Production App&quot;</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=c1># 2. Get only the user-supplied values</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=c1># Output shows only the overrides:</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=c1># replicaCount: 3</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=c1># welcomePage:</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=c1>#   title: Production App</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=c1># 3. Get ALL values (including defaults from values.yaml)</span>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>--all
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=c1># 4. Get values from a specific revision</span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>5</span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>1</span>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>2</span>
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a><span class=c1># 5. Output as JSON</span>
</span><span id=__span-29-23><a id=__codelineno-29-23 name=__codelineno-29-23 href=#__codelineno-29-23></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-29-24><a id=__codelineno-29-24 name=__codelineno-29-24 href=#__codelineno-29-24></a>
</span><span id=__span-29-25><a id=__codelineno-29-25 name=__codelineno-29-25 href=#__codelineno-29-25></a><span class=c1># 6. Save values to file for reuse</span>
</span><span id=__span-29-26><a id=__codelineno-29-26 name=__codelineno-29-26 href=#__codelineno-29-26></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>&gt;<span class=w> </span>my-nginx-values.yaml
</span><span id=__span-29-27><a id=__codelineno-29-27 name=__codelineno-29-27 href=#__codelineno-29-27></a>
</span><span id=__span-29-28><a id=__codelineno-29-28 name=__codelineno-29-28 href=#__codelineno-29-28></a><span class=c1># 7. Use saved values in another deployment</span>
</span><span id=__span-29-29><a id=__codelineno-29-29 name=__codelineno-29-29 href=#__codelineno-29-29></a>helm<span class=w> </span>install<span class=w> </span>my-nginx-copy<span class=w> </span>my-nginx-app/<span class=w> </span>-f<span class=w> </span>my-nginx-values.yaml
</span><span id=__span-29-30><a id=__codelineno-29-30 name=__codelineno-29-30 href=#__codelineno-29-30></a>
</span><span id=__span-29-31><a id=__codelineno-29-31 name=__codelineno-29-31 href=#__codelineno-29-31></a><span class=c1># Cleanup</span>
</span><span id=__span-29-32><a id=__codelineno-29-32 name=__codelineno-29-32 href=#__codelineno-29-32></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx<span class=w> </span>my-nginx-copy
</span></code></pre></div> </details> <hr> <h4 id=18-show-chart-values-with-helm-show-values>18. Show Chart Values with <code>helm show values</code><a class=headerlink href=#18-show-chart-values-with-helm-show-values title="Permanent link">&para;</a></h4> <p>Use <code>helm show values</code> to inspect the default values of a chart before installing.</p> <h4 id=scenario_17>Scenario:<a class=headerlink href=#scenario_17 title="Permanent link">&para;</a></h4> <p>◦ You want to install a third-party chart from a repository but need to understand what configuration options are available. ◦ You&rsquo;re evaluating multiple charts and want to compare their configuration interfaces. ◦ You need to create a custom values file but want to start from the defaults.</p> <p><strong>Hint:</strong> <code>helm show values</code>, chart repositories</p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=c1># 1. Show default values of a local chart</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>my-nginx-app/
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=c1># 2. Show values from a packaged chart</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>helm<span class=w> </span>package<span class=w> </span>my-nginx-app/
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>my-nginx-app-0.1.0.tgz
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=c1># 3. Add a public chart repository</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>bitnami<span class=w> </span>https://charts.bitnami.com/bitnami
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=c1># 4. Show default values from a repository chart</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>bitnami/nginx
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=c1># 5. Show values at a specific chart version</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>bitnami/nginx<span class=w> </span>--version<span class=w> </span><span class=m>15</span>.0.0
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a><span class=c1># 6. Save default values to file for customization</span>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>bitnami/nginx<span class=w> </span>&gt;<span class=w> </span>nginx-defaults.yaml
</span><span id=__span-30-19><a id=__codelineno-30-19 name=__codelineno-30-19 href=#__codelineno-30-19></a>
</span><span id=__span-30-20><a id=__codelineno-30-20 name=__codelineno-30-20 href=#__codelineno-30-20></a><span class=c1># 7. Compare values between chart versions</span>
</span><span id=__span-30-21><a id=__codelineno-30-21 name=__codelineno-30-21 href=#__codelineno-30-21></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>bitnami/nginx<span class=w> </span>--version<span class=w> </span><span class=m>14</span>.0.0<span class=w> </span>&gt;<span class=w> </span>nginx-v14-values.yaml
</span><span id=__span-30-22><a id=__codelineno-30-22 name=__codelineno-30-22 href=#__codelineno-30-22></a>helm<span class=w> </span>show<span class=w> </span>values<span class=w> </span>bitnami/nginx<span class=w> </span>--version<span class=w> </span><span class=m>15</span>.0.0<span class=w> </span>&gt;<span class=w> </span>nginx-v15-values.yaml
</span><span id=__span-30-23><a id=__codelineno-30-23 name=__codelineno-30-23 href=#__codelineno-30-23></a>diff<span class=w> </span>nginx-v14-values.yaml<span class=w> </span>nginx-v15-values.yaml
</span><span id=__span-30-24><a id=__codelineno-30-24 name=__codelineno-30-24 href=#__codelineno-30-24></a>
</span><span id=__span-30-25><a id=__codelineno-30-25 name=__codelineno-30-25 href=#__codelineno-30-25></a><span class=c1># 8. Show all chart information (Chart.yaml + README + values)</span>
</span><span id=__span-30-26><a id=__codelineno-30-26 name=__codelineno-30-26 href=#__codelineno-30-26></a>helm<span class=w> </span>show<span class=w> </span>all<span class=w> </span>bitnami/nginx
</span><span id=__span-30-27><a id=__codelineno-30-27 name=__codelineno-30-27 href=#__codelineno-30-27></a>helm<span class=w> </span>show<span class=w> </span>chart<span class=w> </span>bitnami/nginx
</span><span id=__span-30-28><a id=__codelineno-30-28 name=__codelineno-30-28 href=#__codelineno-30-28></a>helm<span class=w> </span>show<span class=w> </span>readme<span class=w> </span>bitnami/nginx
</span></code></pre></div> </details> <hr> <h4 id=19-search-charts-with-helm-search-repo>19. Search Charts with <code>helm search repo</code><a class=headerlink href=#19-search-charts-with-helm-search-repo title="Permanent link">&para;</a></h4> <p>Use <code>helm search repo</code> to find charts in added repositories.</p> <h4 id=scenario_18>Scenario:<a class=headerlink href=#scenario_18 title="Permanent link">&para;</a></h4> <p>◦ You need to deploy PostgreSQL but don&rsquo;t want to write manifests from scratch. ◦ You want to find and compare available charts for a specific technology. ◦ You need to discover what version of a chart is available.</p> <p><strong>Hint:</strong> <code>helm search repo</code>, <code>--versions</code>, <code>--version</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=c1># 1. Add popular chart repositories</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>bitnami<span class=w> </span>https://charts.bitnami.com/bitnami
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>stable<span class=w> </span>https://charts.helm.sh/stable
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a>helm<span class=w> </span>repo<span class=w> </span>add<span class=w> </span>ingress-nginx<span class=w> </span>https://kubernetes.github.io/ingress-nginx
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=c1># 2. Update repository index</span>
</span><span id=__span-31-7><a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a>helm<span class=w> </span>repo<span class=w> </span>update
</span><span id=__span-31-8><a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>
</span><span id=__span-31-9><a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=c1># 3. Search for charts by keyword</span>
</span><span id=__span-31-10><a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>nginx
</span><span id=__span-31-11><a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>
</span><span id=__span-31-12><a id=__codelineno-31-12 name=__codelineno-31-12 href=#__codelineno-31-12></a><span class=c1># 4. Search showing all available versions</span>
</span><span id=__span-31-13><a id=__codelineno-31-13 name=__codelineno-31-13 href=#__codelineno-31-13></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>nginx<span class=w> </span>--versions
</span><span id=__span-31-14><a id=__codelineno-31-14 name=__codelineno-31-14 href=#__codelineno-31-14></a>
</span><span id=__span-31-15><a id=__codelineno-31-15 name=__codelineno-31-15 href=#__codelineno-31-15></a><span class=c1># 5. Search with version constraint</span>
</span><span id=__span-31-16><a id=__codelineno-31-16 name=__codelineno-31-16 href=#__codelineno-31-16></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>nginx<span class=w> </span>--version<span class=w> </span><span class=s2>&quot;~15.0&quot;</span>
</span><span id=__span-31-17><a id=__codelineno-31-17 name=__codelineno-31-17 href=#__codelineno-31-17></a>
</span><span id=__span-31-18><a id=__codelineno-31-18 name=__codelineno-31-18 href=#__codelineno-31-18></a><span class=c1># 6. Search for development/pre-release versions</span>
</span><span id=__span-31-19><a id=__codelineno-31-19 name=__codelineno-31-19 href=#__codelineno-31-19></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>nginx<span class=w> </span>--devel
</span><span id=__span-31-20><a id=__codelineno-31-20 name=__codelineno-31-20 href=#__codelineno-31-20></a>
</span><span id=__span-31-21><a id=__codelineno-31-21 name=__codelineno-31-21 href=#__codelineno-31-21></a><span class=c1># 7. Search with regex pattern</span>
</span><span id=__span-31-22><a id=__codelineno-31-22 name=__codelineno-31-22 href=#__codelineno-31-22></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span><span class=s1>&#39;nginx.*&#39;</span>
</span><span id=__span-31-23><a id=__codelineno-31-23 name=__codelineno-31-23 href=#__codelineno-31-23></a>
</span><span id=__span-31-24><a id=__codelineno-31-24 name=__codelineno-31-24 href=#__codelineno-31-24></a><span class=c1># 8. Search across all repositories with output formatting</span>
</span><span id=__span-31-25><a id=__codelineno-31-25 name=__codelineno-31-25 href=#__codelineno-31-25></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>postgresql<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-31-26><a id=__codelineno-31-26 name=__codelineno-31-26 href=#__codelineno-31-26></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>postgresql<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-31-27><a id=__codelineno-31-27 name=__codelineno-31-27 href=#__codelineno-31-27></a>
</span><span id=__span-31-28><a id=__codelineno-31-28 name=__codelineno-31-28 href=#__codelineno-31-28></a><span class=c1># 9. Search and filter with grep</span>
</span><span id=__span-31-29><a id=__codelineno-31-29 name=__codelineno-31-29 href=#__codelineno-31-29></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>database<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-i<span class=w> </span>postgres
</span><span id=__span-31-30><a id=__codelineno-31-30 name=__codelineno-31-30 href=#__codelineno-31-30></a>
</span><span id=__span-31-31><a id=__codelineno-31-31 name=__codelineno-31-31 href=#__codelineno-31-31></a><span class=c1># 10. List all charts from a specific repository</span>
</span><span id=__span-31-32><a id=__codelineno-31-32 name=__codelineno-31-32 href=#__codelineno-31-32></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>bitnami/
</span><span id=__span-31-33><a id=__codelineno-31-33 name=__codelineno-31-33 href=#__codelineno-31-33></a>
</span><span id=__span-31-34><a id=__codelineno-31-34 name=__codelineno-31-34 href=#__codelineno-31-34></a><span class=c1># 11. Show detailed output</span>
</span><span id=__span-31-35><a id=__codelineno-31-35 name=__codelineno-31-35 href=#__codelineno-31-35></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>nginx<span class=w> </span>--max-col-width<span class=w> </span><span class=m>0</span>
</span><span id=__span-31-36><a id=__codelineno-31-36 name=__codelineno-31-36 href=#__codelineno-31-36></a>
</span><span id=__span-31-37><a id=__codelineno-31-37 name=__codelineno-31-37 href=#__codelineno-31-37></a><span class=c1># 12. Install a found chart</span>
</span><span id=__span-31-38><a id=__codelineno-31-38 name=__codelineno-31-38 href=#__codelineno-31-38></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>bitnami/redis<span class=w> </span>--versions<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-5
</span><span id=__span-31-39><a id=__codelineno-31-39 name=__codelineno-31-39 href=#__codelineno-31-39></a>helm<span class=w> </span>install<span class=w> </span>my-redis<span class=w> </span>bitnami/redis<span class=w> </span>--version<span class=w> </span><span class=m>18</span>.0.0
</span><span id=__span-31-40><a id=__codelineno-31-40 name=__codelineno-31-40 href=#__codelineno-31-40></a>helm<span class=w> </span>uninstall<span class=w> </span>my-redis
</span></code></pre></div> </details> <hr> <h4 id=20-update-repositories-with-helm-repo-update>20. Update Repositories with <code>helm repo update</code><a class=headerlink href=#20-update-repositories-with-helm-repo-update title="Permanent link">&para;</a></h4> <p>Use <code>helm repo update</code> to refresh the local cache of chart information.</p> <h4 id=scenario_19>Scenario:<a class=headerlink href=#scenario_19 title="Permanent link">&para;</a></h4> <p>◦ A new version of a chart was released but <code>helm search</code> doesn&rsquo;t show it. ◦ You haven&rsquo;t updated your repository index in weeks and want the latest charts. ◦ Similar to <code>apt update</code> or <code>yum update</code>, you need to sync the latest metadata.</p> <p><strong>Hint:</strong> <code>helm repo update</code>, <code>helm repo list</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1># 1. List all configured repositories</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>helm<span class=w> </span>repo<span class=w> </span>list
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=c1># 2. Update all repositories</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a>helm<span class=w> </span>repo<span class=w> </span>update
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=c1># Output shows each repository being refreshed:</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=c1># Hang tight while we grab the latest from your chart repositories...</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a><span class=c1># ...Successfully got an update from the &quot;bitnami&quot; chart repository</span>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=c1># ...Successfully got an update from the &quot;stable&quot; chart repository</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=c1># Update Complete.</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a><span class=c1># 3. Update a specific repository</span>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a>helm<span class=w> </span>repo<span class=w> </span>update<span class=w> </span>bitnami
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=c1># 4. Update multiple specific repositories</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a>helm<span class=w> </span>repo<span class=w> </span>update<span class=w> </span>bitnami<span class=w> </span>stable
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=c1># 5. Force update even if repository fails</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a>helm<span class=w> </span>repo<span class=w> </span>update<span class=w> </span>--fail-on-repo-update-fail<span class=o>=</span><span class=nb>false</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a>
</span><span id=__span-32-22><a id=__codelineno-32-22 name=__codelineno-32-22 href=#__codelineno-32-22></a><span class=c1># 6. Verify you can now see newer chart versions</span>
</span><span id=__span-32-23><a id=__codelineno-32-23 name=__codelineno-32-23 href=#__codelineno-32-23></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>bitnami/nginx<span class=w> </span>--versions<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-5
</span><span id=__span-32-24><a id=__codelineno-32-24 name=__codelineno-32-24 href=#__codelineno-32-24></a>
</span><span id=__span-32-25><a id=__codelineno-32-25 name=__codelineno-32-25 href=#__codelineno-32-25></a><span class=c1># 7. Typical workflow: update before searching or installing</span>
</span><span id=__span-32-26><a id=__codelineno-32-26 name=__codelineno-32-26 href=#__codelineno-32-26></a>helm<span class=w> </span>repo<span class=w> </span>update
</span><span id=__span-32-27><a id=__codelineno-32-27 name=__codelineno-32-27 href=#__codelineno-32-27></a>helm<span class=w> </span>search<span class=w> </span>repo<span class=w> </span>redis
</span><span id=__span-32-28><a id=__codelineno-32-28 name=__codelineno-32-28 href=#__codelineno-32-28></a>helm<span class=w> </span>install<span class=w> </span>my-redis<span class=w> </span>bitnami/redis
</span><span id=__span-32-29><a id=__codelineno-32-29 name=__codelineno-32-29 href=#__codelineno-32-29></a>
</span><span id=__span-32-30><a id=__codelineno-32-30 name=__codelineno-32-30 href=#__codelineno-32-30></a><span class=c1># Cleanup</span>
</span><span id=__span-32-31><a id=__codelineno-32-31 name=__codelineno-32-31 href=#__codelineno-32-31></a>helm<span class=w> </span>uninstall<span class=w> </span>my-redis
</span></code></pre></div> </details> <hr> <h4 id=21-run-chart-tests-with-helm-test>21. Run Chart Tests with <code>helm test</code><a class=headerlink href=#21-run-chart-tests-with-helm-test title="Permanent link">&para;</a></h4> <p>Use <code>helm test</code> to run tests defined in the chart&rsquo;s <code>templates/tests/</code> directory.</p> <h4 id=scenario_20>Scenario:<a class=headerlink href=#scenario_20 title="Permanent link">&para;</a></h4> <p>◦ You deployed a release and want to verify it&rsquo;s actually working correctly. ◦ The chart includes test pods that validate connectivity, configuration, or functionality. ◦ You want to include release validation in your CI/CD pipeline.</p> <p><strong>Hint:</strong> <code>helm test</code>, <code>templates/tests/</code>, <code>helm.sh/hook: test</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=c1># 1. Create a test template if not already present</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>cat<span class=w> </span>&gt;<span class=w> </span>my-nginx-app/templates/tests/test-connection.yaml<span class=w> </span><span class=s>&lt;&lt; &#39;TEMPLATE&#39;</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=s>apiVersion: v1</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=s>kind: Pod</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=s>metadata:</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=s>  name: {{ include &quot;my-nginx-app.fullname&quot; . }}-test-connection</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=s>  labels:</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=s>    {{- include &quot;my-nginx-app.labels&quot; . | nindent 4 }}</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=s>  annotations:</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=s>    &quot;helm.sh/hook&quot;: test</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=s>spec:</span>
</span><span id=__span-33-12><a id=__codelineno-33-12 name=__codelineno-33-12 href=#__codelineno-33-12></a><span class=s>  containers:</span>
</span><span id=__span-33-13><a id=__codelineno-33-13 name=__codelineno-33-13 href=#__codelineno-33-13></a><span class=s>    - name: wget</span>
</span><span id=__span-33-14><a id=__codelineno-33-14 name=__codelineno-33-14 href=#__codelineno-33-14></a><span class=s>      image: busybox</span>
</span><span id=__span-33-15><a id=__codelineno-33-15 name=__codelineno-33-15 href=#__codelineno-33-15></a><span class=s>      command: [&#39;wget&#39;]</span>
</span><span id=__span-33-16><a id=__codelineno-33-16 name=__codelineno-33-16 href=#__codelineno-33-16></a><span class=s>      args: [&#39;{{ include &quot;my-nginx-app.fullname&quot; . }}:{{ .Values.service.port }}&#39;]</span>
</span><span id=__span-33-17><a id=__codelineno-33-17 name=__codelineno-33-17 href=#__codelineno-33-17></a><span class=s>  restartPolicy: Never</span>
</span><span id=__span-33-18><a id=__codelineno-33-18 name=__codelineno-33-18 href=#__codelineno-33-18></a><span class=s>TEMPLATE</span>
</span><span id=__span-33-19><a id=__codelineno-33-19 name=__codelineno-33-19 href=#__codelineno-33-19></a>
</span><span id=__span-33-20><a id=__codelineno-33-20 name=__codelineno-33-20 href=#__codelineno-33-20></a><span class=c1># 2. Install the release</span>
</span><span id=__span-33-21><a id=__codelineno-33-21 name=__codelineno-33-21 href=#__codelineno-33-21></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-33-22><a id=__codelineno-33-22 name=__codelineno-33-22 href=#__codelineno-33-22></a>
</span><span id=__span-33-23><a id=__codelineno-33-23 name=__codelineno-33-23 href=#__codelineno-33-23></a><span class=c1># 3. Run the tests</span>
</span><span id=__span-33-24><a id=__codelineno-33-24 name=__codelineno-33-24 href=#__codelineno-33-24></a>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx
</span><span id=__span-33-25><a id=__codelineno-33-25 name=__codelineno-33-25 href=#__codelineno-33-25></a>
</span><span id=__span-33-26><a id=__codelineno-33-26 name=__codelineno-33-26 href=#__codelineno-33-26></a><span class=c1># Output shows:</span>
</span><span id=__span-33-27><a id=__codelineno-33-27 name=__codelineno-33-27 href=#__codelineno-33-27></a><span class=c1># NAME: my-nginx</span>
</span><span id=__span-33-28><a id=__codelineno-33-28 name=__codelineno-33-28 href=#__codelineno-33-28></a><span class=c1># ...</span>
</span><span id=__span-33-29><a id=__codelineno-33-29 name=__codelineno-33-29 href=#__codelineno-33-29></a><span class=c1># Phase: Succeeded</span>
</span><span id=__span-33-30><a id=__codelineno-33-30 name=__codelineno-33-30 href=#__codelineno-33-30></a>
</span><span id=__span-33-31><a id=__codelineno-33-31 name=__codelineno-33-31 href=#__codelineno-33-31></a><span class=c1># 4. Run tests with logs displayed</span>
</span><span id=__span-33-32><a id=__codelineno-33-32 name=__codelineno-33-32 href=#__codelineno-33-32></a>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx<span class=w> </span>--logs
</span><span id=__span-33-33><a id=__codelineno-33-33 name=__codelineno-33-33 href=#__codelineno-33-33></a>
</span><span id=__span-33-34><a id=__codelineno-33-34 name=__codelineno-33-34 href=#__codelineno-33-34></a><span class=c1># 5. Run tests with timeout</span>
</span><span id=__span-33-35><a id=__codelineno-33-35 name=__codelineno-33-35 href=#__codelineno-33-35></a>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx<span class=w> </span>--timeout<span class=w> </span>2m
</span><span id=__span-33-36><a id=__codelineno-33-36 name=__codelineno-33-36 href=#__codelineno-33-36></a>
</span><span id=__span-33-37><a id=__codelineno-33-37 name=__codelineno-33-37 href=#__codelineno-33-37></a><span class=c1># 6. View test pod logs manually</span>
</span><span id=__span-33-38><a id=__codelineno-33-38 name=__codelineno-33-38 href=#__codelineno-33-38></a>kubectl<span class=w> </span>logs<span class=w> </span>my-nginx-my-nginx-app-test-connection
</span><span id=__span-33-39><a id=__codelineno-33-39 name=__codelineno-33-39 href=#__codelineno-33-39></a>
</span><span id=__span-33-40><a id=__codelineno-33-40 name=__codelineno-33-40 href=#__codelineno-33-40></a><span class=c1># 7. Filter which tests to run (if multiple tests exist)</span>
</span><span id=__span-33-41><a id=__codelineno-33-41 name=__codelineno-33-41 href=#__codelineno-33-41></a>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx<span class=w> </span>--filter<span class=w> </span><span class=nv>name</span><span class=o>=</span>test-connection
</span><span id=__span-33-42><a id=__codelineno-33-42 name=__codelineno-33-42 href=#__codelineno-33-42></a>
</span><span id=__span-33-43><a id=__codelineno-33-43 name=__codelineno-33-43 href=#__codelineno-33-43></a><span class=c1># 8. Clean up test pods after running (by default they remain)</span>
</span><span id=__span-33-44><a id=__codelineno-33-44 name=__codelineno-33-44 href=#__codelineno-33-44></a>kubectl<span class=w> </span>delete<span class=w> </span>pod<span class=w> </span>-l<span class=w> </span><span class=s1>&#39;helm.sh/hook=test&#39;</span>
</span><span id=__span-33-45><a id=__codelineno-33-45 name=__codelineno-33-45 href=#__codelineno-33-45></a>
</span><span id=__span-33-46><a id=__codelineno-33-46 name=__codelineno-33-46 href=#__codelineno-33-46></a><span class=c1># Or configure it in the test template with:</span>
</span><span id=__span-33-47><a id=__codelineno-33-47 name=__codelineno-33-47 href=#__codelineno-33-47></a><span class=c1># &quot;helm.sh/hook-delete-policy&quot;: &quot;hook-succeeded,hook-failed&quot;</span>
</span><span id=__span-33-48><a id=__codelineno-33-48 name=__codelineno-33-48 href=#__codelineno-33-48></a>
</span><span id=__span-33-49><a id=__codelineno-33-49 name=__codelineno-33-49 href=#__codelineno-33-49></a><span class=c1># Cleanup</span>
</span><span id=__span-33-50><a id=__codelineno-33-50 name=__codelineno-33-50 href=#__codelineno-33-50></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span></code></pre></div> </details> <hr> <h4 id=22-use-helm-get-all-to-retrieve-complete-release-info>22. Use <code>helm get all</code> to Retrieve Complete Release Info<a class=headerlink href=#22-use-helm-get-all-to-retrieve-complete-release-info title="Permanent link">&para;</a></h4> <p>Use <code>helm get all</code> to retrieve all information about a deployed release in one command.</p> <h4 id=scenario_21>Scenario:<a class=headerlink href=#scenario_21 title="Permanent link">&para;</a></h4> <p>◦ You need to debug why a release isn&rsquo;t working correctly. ◦ You want to export the complete release configuration for documentation or backup. ◦ You need to see the rendered manifests, computed values, and hooks all together.</p> <p><strong>Hint:</strong> <code>helm get all</code>, <code>helm get manifest</code>, <code>helm get hooks</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=c1># 1. Install a release</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>  </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>2</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>  </span>--set<span class=w> </span>welcomePage.title<span class=o>=</span><span class=s2>&quot;Debug Test&quot;</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=c1># 2. Get all information about the release</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=c1># Output includes:</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=c1># - Release metadata</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=c1># - User-supplied values</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=c1># - Computed values</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=c1># - Rendered Kubernetes manifests</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=c1># - Hooks</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=c1># - Notes</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=c1># 3. Get all info from specific revision</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>3</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>1</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>2</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=c1># 4. Get individual components</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a>helm<span class=w> </span>get<span class=w> </span>manifest<span class=w> </span>my-nginx<span class=w>       </span><span class=c1># Just the rendered manifests</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w>         </span><span class=c1># Just the user values</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>helm<span class=w> </span>get<span class=w> </span>hooks<span class=w> </span>my-nginx<span class=w>          </span><span class=c1># Just the hooks</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>helm<span class=w> </span>get<span class=w> </span>notes<span class=w> </span>my-nginx<span class=w>          </span><span class=c1># Just the NOTES.txt</span>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a><span class=c1># 5. Export to file for backup/documentation</span>
</span><span id=__span-34-29><a id=__codelineno-34-29 name=__codelineno-34-29 href=#__codelineno-34-29></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>&gt;<span class=w> </span>my-nginx-release-backup.yaml
</span><span id=__span-34-30><a id=__codelineno-34-30 name=__codelineno-34-30 href=#__codelineno-34-30></a>
</span><span id=__span-34-31><a id=__codelineno-34-31 name=__codelineno-34-31 href=#__codelineno-34-31></a><span class=c1># 6. Use template to extract specific information</span>
</span><span id=__span-34-32><a id=__codelineno-34-32 name=__codelineno-34-32 href=#__codelineno-34-32></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>--template<span class=w> </span><span class=s1>&#39;{{.Release.Manifest}}&#39;</span>
</span><span id=__span-34-33><a id=__codelineno-34-33 name=__codelineno-34-33 href=#__codelineno-34-33></a>
</span><span id=__span-34-34><a id=__codelineno-34-34 name=__codelineno-34-34 href=#__codelineno-34-34></a><span class=c1># 7. Compare two revisions</span>
</span><span id=__span-34-35><a id=__codelineno-34-35 name=__codelineno-34-35 href=#__codelineno-34-35></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>1</span><span class=w> </span>&gt;<span class=w> </span>rev1.yaml
</span><span id=__span-34-36><a id=__codelineno-34-36 name=__codelineno-34-36 href=#__codelineno-34-36></a>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx<span class=w> </span>--revision<span class=w> </span><span class=m>2</span><span class=w> </span>&gt;<span class=w> </span>rev2.yaml
</span><span id=__span-34-37><a id=__codelineno-34-37 name=__codelineno-34-37 href=#__codelineno-34-37></a>diff<span class=w> </span>rev1.yaml<span class=w> </span>rev2.yaml
</span><span id=__span-34-38><a id=__codelineno-34-38 name=__codelineno-34-38 href=#__codelineno-34-38></a>
</span><span id=__span-34-39><a id=__codelineno-34-39 name=__codelineno-34-39 href=#__codelineno-34-39></a><span class=c1># Cleanup</span>
</span><span id=__span-34-40><a id=__codelineno-34-40 name=__codelineno-34-40 href=#__codelineno-34-40></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx
</span><span id=__span-34-41><a id=__codelineno-34-41 name=__codelineno-34-41 href=#__codelineno-34-41></a>rm<span class=w> </span>-f<span class=w> </span>rev1.yaml<span class=w> </span>rev2.yaml<span class=w> </span>my-nginx-release-backup.yaml
</span></code></pre></div> </details> <hr> <h4 id=23-use-helm-list-with-filters-and-formatting>23. Use <code>helm list</code> with Filters and Formatting<a class=headerlink href=#23-use-helm-list-with-filters-and-formatting title="Permanent link">&para;</a></h4> <p>Master <code>helm list</code> with various filters and output formats to manage multiple releases.</p> <h4 id=scenario_22>Scenario:<a class=headerlink href=#scenario_22 title="Permanent link">&para;</a></h4> <p>◦ You have dozens of releases across multiple namespaces and need to find specific ones. ◦ You want to script release management and need machine-readable output. ◦ You need to filter releases by status (deployed, failed, pending).</p> <p><strong>Hint:</strong> <code>helm list</code>, <code>--all-namespaces</code>, <code>--filter</code>, <code>-o json</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># 1. Install multiple releases for testing</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>helm<span class=w> </span>install<span class=w> </span>nginx-dev<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>1</span>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a>helm<span class=w> </span>install<span class=w> </span>nginx-staging<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>2</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a>helm<span class=w> </span>install<span class=w> </span>nginx-prod<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>3</span><span class=w> </span>--namespace<span class=w> </span>prod<span class=w> </span>--create-namespace
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a>
</span><span id=__span-35-6><a id=__codelineno-35-6 name=__codelineno-35-6 href=#__codelineno-35-6></a><span class=c1># 2. List all releases in current namespace</span>
</span><span id=__span-35-7><a id=__codelineno-35-7 name=__codelineno-35-7 href=#__codelineno-35-7></a>helm<span class=w> </span>list
</span><span id=__span-35-8><a id=__codelineno-35-8 name=__codelineno-35-8 href=#__codelineno-35-8></a>
</span><span id=__span-35-9><a id=__codelineno-35-9 name=__codelineno-35-9 href=#__codelineno-35-9></a><span class=c1># 3. List releases across all namespaces</span>
</span><span id=__span-35-10><a id=__codelineno-35-10 name=__codelineno-35-10 href=#__codelineno-35-10></a>helm<span class=w> </span>list<span class=w> </span>--all-namespaces
</span><span id=__span-35-11><a id=__codelineno-35-11 name=__codelineno-35-11 href=#__codelineno-35-11></a>
</span><span id=__span-35-12><a id=__codelineno-35-12 name=__codelineno-35-12 href=#__codelineno-35-12></a><span class=c1># 4. List releases in specific namespace</span>
</span><span id=__span-35-13><a id=__codelineno-35-13 name=__codelineno-35-13 href=#__codelineno-35-13></a>helm<span class=w> </span>list<span class=w> </span>--namespace<span class=w> </span>prod
</span><span id=__span-35-14><a id=__codelineno-35-14 name=__codelineno-35-14 href=#__codelineno-35-14></a>
</span><span id=__span-35-15><a id=__codelineno-35-15 name=__codelineno-35-15 href=#__codelineno-35-15></a><span class=c1># 5. Filter releases by name pattern</span>
</span><span id=__span-35-16><a id=__codelineno-35-16 name=__codelineno-35-16 href=#__codelineno-35-16></a>helm<span class=w> </span>list<span class=w> </span>--filter<span class=w> </span><span class=s1>&#39;nginx-.*&#39;</span>
</span><span id=__span-35-17><a id=__codelineno-35-17 name=__codelineno-35-17 href=#__codelineno-35-17></a>helm<span class=w> </span>list<span class=w> </span>--filter<span class=w> </span><span class=s1>&#39;nginx-dev&#39;</span>
</span><span id=__span-35-18><a id=__codelineno-35-18 name=__codelineno-35-18 href=#__codelineno-35-18></a>
</span><span id=__span-35-19><a id=__codelineno-35-19 name=__codelineno-35-19 href=#__codelineno-35-19></a><span class=c1># 6. Show only deployed releases</span>
</span><span id=__span-35-20><a id=__codelineno-35-20 name=__codelineno-35-20 href=#__codelineno-35-20></a>helm<span class=w> </span>list<span class=w> </span>--deployed
</span><span id=__span-35-21><a id=__codelineno-35-21 name=__codelineno-35-21 href=#__codelineno-35-21></a>
</span><span id=__span-35-22><a id=__codelineno-35-22 name=__codelineno-35-22 href=#__codelineno-35-22></a><span class=c1># 7. Show all releases including uninstalled (with --keep-history)</span>
</span><span id=__span-35-23><a id=__codelineno-35-23 name=__codelineno-35-23 href=#__codelineno-35-23></a>helm<span class=w> </span>list<span class=w> </span>--all
</span><span id=__span-35-24><a id=__codelineno-35-24 name=__codelineno-35-24 href=#__codelineno-35-24></a>
</span><span id=__span-35-25><a id=__codelineno-35-25 name=__codelineno-35-25 href=#__codelineno-35-25></a><span class=c1># 8. Show failed releases</span>
</span><span id=__span-35-26><a id=__codelineno-35-26 name=__codelineno-35-26 href=#__codelineno-35-26></a>helm<span class=w> </span>list<span class=w> </span>--failed
</span><span id=__span-35-27><a id=__codelineno-35-27 name=__codelineno-35-27 href=#__codelineno-35-27></a>
</span><span id=__span-35-28><a id=__codelineno-35-28 name=__codelineno-35-28 href=#__codelineno-35-28></a><span class=c1># 9. Show pending releases</span>
</span><span id=__span-35-29><a id=__codelineno-35-29 name=__codelineno-35-29 href=#__codelineno-35-29></a>helm<span class=w> </span>list<span class=w> </span>--pending
</span><span id=__span-35-30><a id=__codelineno-35-30 name=__codelineno-35-30 href=#__codelineno-35-30></a>
</span><span id=__span-35-31><a id=__codelineno-35-31 name=__codelineno-35-31 href=#__codelineno-35-31></a><span class=c1># 10. Output as JSON (for scripting)</span>
</span><span id=__span-35-32><a id=__codelineno-35-32 name=__codelineno-35-32 href=#__codelineno-35-32></a>helm<span class=w> </span>list<span class=w> </span>-o<span class=w> </span>json
</span><span id=__span-35-33><a id=__codelineno-35-33 name=__codelineno-35-33 href=#__codelineno-35-33></a>
</span><span id=__span-35-34><a id=__codelineno-35-34 name=__codelineno-35-34 href=#__codelineno-35-34></a><span class=c1># 11. Output as YAML</span>
</span><span id=__span-35-35><a id=__codelineno-35-35 name=__codelineno-35-35 href=#__codelineno-35-35></a>helm<span class=w> </span>list<span class=w> </span>-o<span class=w> </span>yaml
</span><span id=__span-35-36><a id=__codelineno-35-36 name=__codelineno-35-36 href=#__codelineno-35-36></a>
</span><span id=__span-35-37><a id=__codelineno-35-37 name=__codelineno-35-37 href=#__codelineno-35-37></a><span class=c1># 12. Show extended information</span>
</span><span id=__span-35-38><a id=__codelineno-35-38 name=__codelineno-35-38 href=#__codelineno-35-38></a>helm<span class=w> </span>list<span class=w> </span>--all-namespaces<span class=w> </span>-o<span class=w> </span>wide
</span><span id=__span-35-39><a id=__codelineno-35-39 name=__codelineno-35-39 href=#__codelineno-35-39></a>
</span><span id=__span-35-40><a id=__codelineno-35-40 name=__codelineno-35-40 href=#__codelineno-35-40></a><span class=c1># 13. Limit number of results</span>
</span><span id=__span-35-41><a id=__codelineno-35-41 name=__codelineno-35-41 href=#__codelineno-35-41></a>helm<span class=w> </span>list<span class=w> </span>--max<span class=w> </span><span class=m>5</span>
</span><span id=__span-35-42><a id=__codelineno-35-42 name=__codelineno-35-42 href=#__codelineno-35-42></a>
</span><span id=__span-35-43><a id=__codelineno-35-43 name=__codelineno-35-43 href=#__codelineno-35-43></a><span class=c1># 14. Sort by date</span>
</span><span id=__span-35-44><a id=__codelineno-35-44 name=__codelineno-35-44 href=#__codelineno-35-44></a>helm<span class=w> </span>list<span class=w> </span>--date
</span><span id=__span-35-45><a id=__codelineno-35-45 name=__codelineno-35-45 href=#__codelineno-35-45></a>
</span><span id=__span-35-46><a id=__codelineno-35-46 name=__codelineno-35-46 href=#__codelineno-35-46></a><span class=c1># 15. Reverse sort order</span>
</span><span id=__span-35-47><a id=__codelineno-35-47 name=__codelineno-35-47 href=#__codelineno-35-47></a>helm<span class=w> </span>list<span class=w> </span>--reverse
</span><span id=__span-35-48><a id=__codelineno-35-48 name=__codelineno-35-48 href=#__codelineno-35-48></a>
</span><span id=__span-35-49><a id=__codelineno-35-49 name=__codelineno-35-49 href=#__codelineno-35-49></a><span class=c1># 16. Show specific columns only (use with jq for JSON output)</span>
</span><span id=__span-35-50><a id=__codelineno-35-50 name=__codelineno-35-50 href=#__codelineno-35-50></a>helm<span class=w> </span>list<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.[] | {name: .name, status: .status, namespace: .namespace}&#39;</span>
</span><span id=__span-35-51><a id=__codelineno-35-51 name=__codelineno-35-51 href=#__codelineno-35-51></a>
</span><span id=__span-35-52><a id=__codelineno-35-52 name=__codelineno-35-52 href=#__codelineno-35-52></a><span class=c1># 17. Count releases</span>
</span><span id=__span-35-53><a id=__codelineno-35-53 name=__codelineno-35-53 href=#__codelineno-35-53></a>helm<span class=w> </span>list<span class=w> </span>--all-namespaces<span class=w> </span><span class=p>|</span><span class=w> </span>wc<span class=w> </span>-l
</span><span id=__span-35-54><a id=__codelineno-35-54 name=__codelineno-35-54 href=#__codelineno-35-54></a>
</span><span id=__span-35-55><a id=__codelineno-35-55 name=__codelineno-35-55 href=#__codelineno-35-55></a><span class=c1># 18. Find releases using specific chart</span>
</span><span id=__span-35-56><a id=__codelineno-35-56 name=__codelineno-35-56 href=#__codelineno-35-56></a>helm<span class=w> </span>list<span class=w> </span>--all-namespaces<span class=w> </span>-o<span class=w> </span>json<span class=w> </span><span class=p>|</span><span class=w> </span>jq<span class=w> </span><span class=s1>&#39;.[] | select(.chart | contains(&quot;my-nginx-app&quot;))&#39;</span>
</span><span id=__span-35-57><a id=__codelineno-35-57 name=__codelineno-35-57 href=#__codelineno-35-57></a>
</span><span id=__span-35-58><a id=__codelineno-35-58 name=__codelineno-35-58 href=#__codelineno-35-58></a><span class=c1># Cleanup</span>
</span><span id=__span-35-59><a id=__codelineno-35-59 name=__codelineno-35-59 href=#__codelineno-35-59></a>helm<span class=w> </span>uninstall<span class=w> </span>nginx-dev<span class=w> </span>nginx-staging
</span><span id=__span-35-60><a id=__codelineno-35-60 name=__codelineno-35-60 href=#__codelineno-35-60></a>helm<span class=w> </span>uninstall<span class=w> </span>nginx-prod<span class=w> </span>-n<span class=w> </span>prod
</span><span id=__span-35-61><a id=__codelineno-35-61 name=__codelineno-35-61 href=#__codelineno-35-61></a>kubectl<span class=w> </span>delete<span class=w> </span>namespace<span class=w> </span>prod
</span></code></pre></div> </details> <hr> <h4 id=24-chain-multiple-commands-for-release-management>24. Chain Multiple Commands for Release Management<a class=headerlink href=#24-chain-multiple-commands-for-release-management title="Permanent link">&para;</a></h4> <p>Practice chaining Helm commands for common workflows and debugging scenarios.</p> <h4 id=scenario_23>Scenario:<a class=headerlink href=#scenario_23 title="Permanent link">&para;</a></h4> <p>◦ You need to quickly deploy, verify, and troubleshoot releases in rapid iteration cycles. ◦ You want to create reusable scripts for release management. ◦ You need to validate deployments in CI/CD pipelines.</p> <p><strong>Hint:</strong> Combine <code>install</code>, <code>status</code>, <code>get values</code>, <code>test</code>, <code>upgrade</code>, <code>rollback</code></p> <details class=example> <summary>Solution</summary> <div class="language-bash highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># ── Workflow 1: Install, verify, test ──</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=w>  </span>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=w>  </span>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>
</span><span id=__span-36-6><a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=c1># ── Workflow 2: Dry-run, lint, then install ──</span>
</span><span id=__span-36-7><a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>helm<span class=w> </span>lint<span class=w> </span>my-nginx-app/<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-8><a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a><span class=w>  </span>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--dry-run<span class=w> </span>--debug<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-9><a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a><span class=w>  </span>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-36-10><a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>
</span><span id=__span-36-11><a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a><span class=c1># ── Workflow 3: Template, validate, install ──</span>
</span><span id=__span-36-12><a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a>helm<span class=w> </span>template<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>--dry-run<span class=o>=</span>client<span class=w> </span>-f<span class=w> </span>-<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-13><a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a><span class=w>  </span>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/
</span><span id=__span-36-14><a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>
</span><span id=__span-36-15><a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a><span class=c1># ── Workflow 4: Upgrade or install (idempotent) ──</span>
</span><span id=__span-36-16><a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--wait<span class=w> </span>--timeout<span class=w> </span>5m
</span><span id=__span-36-17><a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>
</span><span id=__span-36-18><a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=c1># ── Workflow 5: Upgrade with backup and rollback on failure ──</span>
</span><span id=__span-36-19><a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>&gt;<span class=w> </span>backup-values.yaml<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-20><a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a><span class=w>  </span>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>5</span><span class=w> </span>--atomic
</span><span id=__span-36-21><a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a>
</span><span id=__span-36-22><a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a><span class=c1># ── Workflow 6: Install, check status, get all info ──</span>
</span><span id=__span-36-23><a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-24><a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a><span class=w>  </span>sleep<span class=w> </span><span class=m>10</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-25><a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a><span class=w>  </span>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-26><a id=__codelineno-36-26 name=__codelineno-36-26 href=#__codelineno-36-26></a><span class=w>  </span>helm<span class=w> </span>get<span class=w> </span>all<span class=w> </span>my-nginx
</span><span id=__span-36-27><a id=__codelineno-36-27 name=__codelineno-36-27 href=#__codelineno-36-27></a>
</span><span id=__span-36-28><a id=__codelineno-36-28 name=__codelineno-36-28 href=#__codelineno-36-28></a><span class=c1># ── Workflow 7: Compare before and after upgrade ──</span>
</span><span id=__span-36-29><a id=__codelineno-36-29 name=__codelineno-36-29 href=#__codelineno-36-29></a>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>&gt;<span class=w> </span>before.yaml<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-30><a id=__codelineno-36-30 name=__codelineno-36-30 href=#__codelineno-36-30></a><span class=w>  </span>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>newKey</span><span class=o>=</span>newValue<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-31><a id=__codelineno-36-31 name=__codelineno-36-31 href=#__codelineno-36-31></a><span class=w>  </span>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>&gt;<span class=w> </span>after.yaml<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-32><a id=__codelineno-36-32 name=__codelineno-36-32 href=#__codelineno-36-32></a><span class=w>  </span>diff<span class=w> </span>before.yaml<span class=w> </span>after.yaml
</span><span id=__span-36-33><a id=__codelineno-36-33 name=__codelineno-36-33 href=#__codelineno-36-33></a>
</span><span id=__span-36-34><a id=__codelineno-36-34 name=__codelineno-36-34 href=#__codelineno-36-34></a><span class=c1># ── Workflow 8: Install with custom values and verify ──</span>
</span><span id=__span-36-35><a id=__codelineno-36-35 name=__codelineno-36-35 href=#__codelineno-36-35></a>cat<span class=w> </span>&gt;<span class=w> </span>custom.yaml<span class=w> </span><span class=s>&lt;&lt; EOF</span>
</span><span id=__span-36-36><a id=__codelineno-36-36 name=__codelineno-36-36 href=#__codelineno-36-36></a><span class=s>replicaCount: 3</span>
</span><span id=__span-36-37><a id=__codelineno-36-37 name=__codelineno-36-37 href=#__codelineno-36-37></a><span class=s>welcomePage:</span>
</span><span id=__span-36-38><a id=__codelineno-36-38 name=__codelineno-36-38 href=#__codelineno-36-38></a><span class=s>  title: &quot;Production&quot;</span>
</span><span id=__span-36-39><a id=__codelineno-36-39 name=__codelineno-36-39 href=#__codelineno-36-39></a><span class=s>EOF</span>
</span><span id=__span-36-40><a id=__codelineno-36-40 name=__codelineno-36-40 href=#__codelineno-36-40></a>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>-f<span class=w> </span>custom.yaml<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-41><a id=__codelineno-36-41 name=__codelineno-36-41 href=#__codelineno-36-41></a><span class=w>  </span>kubectl<span class=w> </span>get<span class=w> </span>pods<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-36-42><a id=__codelineno-36-42 name=__codelineno-36-42 href=#__codelineno-36-42></a>
</span><span id=__span-36-43><a id=__codelineno-36-43 name=__codelineno-36-43 href=#__codelineno-36-43></a><span class=c1># ── Workflow 9: Rollback if tests fail ──</span>
</span><span id=__span-36-44><a id=__codelineno-36-44 name=__codelineno-36-44 href=#__codelineno-36-44></a>helm<span class=w> </span>upgrade<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--set<span class=w> </span><span class=nv>replicaCount</span><span class=o>=</span><span class=m>10</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-45><a id=__codelineno-36-45 name=__codelineno-36-45 href=#__codelineno-36-45></a><span class=w>  </span>helm<span class=w> </span><span class=nb>test</span><span class=w> </span>my-nginx<span class=w> </span><span class=o>||</span><span class=w> </span>helm<span class=w> </span>rollback<span class=w> </span>my-nginx
</span><span id=__span-36-46><a id=__codelineno-36-46 name=__codelineno-36-46 href=#__codelineno-36-46></a>
</span><span id=__span-36-47><a id=__codelineno-36-47 name=__codelineno-36-47 href=#__codelineno-36-47></a><span class=c1># ── Workflow 10: Clean reinstall ──</span>
</span><span id=__span-36-48><a id=__codelineno-36-48 name=__codelineno-36-48 href=#__codelineno-36-48></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-49><a id=__codelineno-36-49 name=__codelineno-36-49 href=#__codelineno-36-49></a><span class=w>  </span>helm<span class=w> </span>install<span class=w> </span>my-nginx<span class=w> </span>my-nginx-app/<span class=w> </span>--wait
</span><span id=__span-36-50><a id=__codelineno-36-50 name=__codelineno-36-50 href=#__codelineno-36-50></a>
</span><span id=__span-36-51><a id=__codelineno-36-51 name=__codelineno-36-51 href=#__codelineno-36-51></a><span class=c1># ── Workflow 11: Multi-environment deployment ──</span>
</span><span id=__span-36-52><a id=__codelineno-36-52 name=__codelineno-36-52 href=#__codelineno-36-52></a><span class=k>for</span><span class=w> </span>env<span class=w> </span><span class=k>in</span><span class=w> </span>dev<span class=w> </span>staging<span class=w> </span>prod<span class=p>;</span><span class=w> </span><span class=k>do</span>
</span><span id=__span-36-53><a id=__codelineno-36-53 name=__codelineno-36-53 href=#__codelineno-36-53></a><span class=w>  </span>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>my-nginx-<span class=nv>$env</span><span class=w> </span>my-nginx-app/<span class=w> </span><span class=se>\</span>
</span><span id=__span-36-54><a id=__codelineno-36-54 name=__codelineno-36-54 href=#__codelineno-36-54></a><span class=w>    </span>-f<span class=w> </span>values-<span class=nv>$env</span>.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-36-55><a id=__codelineno-36-55 name=__codelineno-36-55 href=#__codelineno-36-55></a><span class=w>    </span>--namespace<span class=w> </span><span class=nv>$env</span><span class=w> </span>--create-namespace
</span><span id=__span-36-56><a id=__codelineno-36-56 name=__codelineno-36-56 href=#__codelineno-36-56></a><span class=k>done</span>
</span><span id=__span-36-57><a id=__codelineno-36-57 name=__codelineno-36-57 href=#__codelineno-36-57></a>
</span><span id=__span-36-58><a id=__codelineno-36-58 name=__codelineno-36-58 href=#__codelineno-36-58></a><span class=c1># List all deployments</span>
</span><span id=__span-36-59><a id=__codelineno-36-59 name=__codelineno-36-59 href=#__codelineno-36-59></a>helm<span class=w> </span>list<span class=w> </span>--all-namespaces
</span><span id=__span-36-60><a id=__codelineno-36-60 name=__codelineno-36-60 href=#__codelineno-36-60></a>
</span><span id=__span-36-61><a id=__codelineno-36-61 name=__codelineno-36-61 href=#__codelineno-36-61></a><span class=c1># ── Workflow 12: Debugging failed release ──</span>
</span><span id=__span-36-62><a id=__codelineno-36-62 name=__codelineno-36-62 href=#__codelineno-36-62></a>helm<span class=w> </span>status<span class=w> </span>my-nginx<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-63><a id=__codelineno-36-63 name=__codelineno-36-63 href=#__codelineno-36-63></a><span class=w>  </span>helm<span class=w> </span>get<span class=w> </span>values<span class=w> </span>my-nginx<span class=w> </span>--all<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-64><a id=__codelineno-36-64 name=__codelineno-36-64 href=#__codelineno-36-64></a><span class=w>  </span>helm<span class=w> </span>get<span class=w> </span>manifest<span class=w> </span>my-nginx<span class=w> </span><span class=p>|</span><span class=w> </span>kubectl<span class=w> </span>apply<span class=w> </span>--dry-run<span class=o>=</span>client<span class=w> </span>-f<span class=w> </span>-<span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-36-65><a id=__codelineno-36-65 name=__codelineno-36-65 href=#__codelineno-36-65></a><span class=w>  </span>kubectl<span class=w> </span>describe<span class=w> </span>pods<span class=w> </span>-l<span class=w> </span>app.kubernetes.io/instance<span class=o>=</span>my-nginx
</span><span id=__span-36-66><a id=__codelineno-36-66 name=__codelineno-36-66 href=#__codelineno-36-66></a>
</span><span id=__span-36-67><a id=__codelineno-36-67 name=__codelineno-36-67 href=#__codelineno-36-67></a><span class=c1># Cleanup all</span>
</span><span id=__span-36-68><a id=__codelineno-36-68 name=__codelineno-36-68 href=#__codelineno-36-68></a><span class=k>for</span><span class=w> </span>env<span class=w> </span><span class=k>in</span><span class=w> </span>dev<span class=w> </span>staging<span class=w> </span>prod<span class=p>;</span><span class=w> </span><span class=k>do</span>
</span><span id=__span-36-69><a id=__codelineno-36-69 name=__codelineno-36-69 href=#__codelineno-36-69></a><span class=w>  </span>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx-<span class=nv>$env</span><span class=w> </span>-n<span class=w> </span><span class=nv>$env</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span><span id=__span-36-70><a id=__codelineno-36-70 name=__codelineno-36-70 href=#__codelineno-36-70></a><span class=w>  </span>kubectl<span class=w> </span>delete<span class=w> </span>namespace<span class=w> </span><span class=nv>$env</span><span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span><span id=__span-36-71><a id=__codelineno-36-71 name=__codelineno-36-71 href=#__codelineno-36-71></a><span class=k>done</span>
</span><span id=__span-36-72><a id=__codelineno-36-72 name=__codelineno-36-72 href=#__codelineno-36-72></a>helm<span class=w> </span>uninstall<span class=w> </span>my-nginx<span class=w> </span><span class=m>2</span>&gt;/dev/null<span class=w> </span><span class=o>||</span><span class=w> </span><span class=nb>true</span>
</span><span id=__span-36-73><a id=__codelineno-36-73 name=__codelineno-36-73 href=#__codelineno-36-73></a>rm<span class=w> </span>-f<span class=w> </span>backup-values.yaml<span class=w> </span>before.yaml<span class=w> </span>after.yaml<span class=w> </span>custom.yaml
</span></code></pre></div> </details> <hr> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Render date of last update --> <!-- Render date of creation --> <!-- ---------------------------------------------------------------------- --> <!-- Render authors --> <!-- ---------------------------------------------------------------------- --> <!-- Render committers from GitHub --> <!-- Render committers from GitLab --> <!-- Render committers --> <!-- ---------------------------------------------------------------------- --> <!-- Determine date of last update --> <!-- Determine date of creation --> <!-- Source file information --> <aside class=md-source-file> <!-- Date of last update --> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="February 25, 2026 17:24:59 UTC">February 25, 2026</span> </span> <!-- Authors (git-authors plugin) --> <!-- Authors (git-committers plugin) --> <!-- Fallback: Manual GitHub avatar for repository owner --> <span class=md-source-file__fact> <nav> <a href=https://github.com/nirgeier class=md-author title=@nirgeier> <img src="https://avatars.githubusercontent.com/u/555154?size=256" alt="Nir Geier"> </a> </nav> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!--
  Copyright (c) 2016-2025 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
--> <!-- Footer --> <footer class=md-footer> <div class=logo1></div> <div class=logo2></div> <!-- Link to previous and/or next page --> <nav class="md-footer__inner md-grid" aria-label=Footer> <!-- Link to previous page --> <a href=../Kubernetes-Service-Tasks/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Service Tasks"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Service Tasks </div> </div> </a> <!-- <ul class="social-badges">
          <li><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target="_blank" rel="noopener"><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a></li>
          <li><a href="https://www.linkedin.com/in/nirgeier/" target="_blank" rel="noopener"><i class="fab fa-linkedin" aria-hidden="true"></i><span class="sr-only">LinkedIn profile</span></a></li>
          <li><a href="mailto:nirgeier@gmail.com"><img src="https://img.shields.io/badge/-nirgeier@gmail.com-fcc624?style=flat&logo=Gmail&logoColor=red" alt="Gmail Badge"></a></li>
          <li><a href="mailto:nirg@codewizard.co.il"><img src="https://img.shields.io/badge/-nirg@codewizard.co.il-fcc624?style=flat&logo=microsoftoutlook&logoColor=blue" alt="Outlook Badge"></a></li>
        </ul> --> <!-- Link to next page --> <a href=../Kubernetes-ArgoCD-Tasks/ class="md-footer__link md-footer__link--next" aria-label="Next: ArgoCD Tasks"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> ArgoCD Tasks </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <!-- Further information --> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> ©2021-2026 Nir Geier<br><a href="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" target=_blank rel=noopener><img src="https://visitor-badge.laobi.icu/badge?page_id=nirgeier" alt="Visitor Badge"></a> </div> </div> <!-- Social links --> <div class=md-social> <a href=https://github.com/nirgeier/KubernetesLabs target=_blank rel=noopener title="View on GitHub" class="md-social__link social-class__github"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/network/members target=_blank rel=noopener title="Fork this repo" class="md-social__link social-class__fork"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M5 5.372v.878c0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75v-.878a2.25 2.25 0 1 1 1.5 0v.878a2.25 2.25 0 0 1-2.25 2.25h-1.5v2.128a2.251 2.251 0 1 1-1.5 0V8.5h-1.5A2.25 2.25 0 0 1 3.5 6.25v-.878a2.25 2.25 0 1 1 1.5 0M5 3.25a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0m6.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5m-3 8.75a.75.75 0 1 0-1.5 0 .75.75 0 0 0 1.5 0"/></svg> </a> <a href=https://github.com/nirgeier/KubernetesLabs/stargazers target=_blank rel=noopener title="Star this repo" class="md-social__link social-class__star"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M8 .25a.75.75 0 0 1 .673.418l1.882 3.815 4.21.612a.75.75 0 0 1 .416 1.279l-3.046 2.97.719 4.192a.751.751 0 0 1-1.088.791L8 12.347l-3.766 1.98a.75.75 0 0 1-1.088-.79l.72-4.194L.818 6.374a.75.75 0 0 1 .416-1.28l4.21-.611L7.327.668A.75.75 0 0 1 8 .25m0 2.445L6.615 5.5a.75.75 0 0 1-.564.41l-3.097.45 2.24 2.184a.75.75 0 0 1 .216.664l-.528 3.084 2.769-1.456a.75.75 0 0 1 .698 0l2.77 1.456-.53-3.084a.75.75 0 0 1 .216-.664l2.24-2.183-3.096-.45a.75.75 0 0 1-.564-.41z"/></svg> </a> <a href=https://www.linkedin.com/in/nirgeier/ target=_blank rel=noopener title="Connect on LinkedIn" class="md-social__link social-class__linkedin"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://discord.gg/U6xW23Ss target=_blank rel=noopener title="Follow me on Discord" class="md-social__link social-class__discord"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg> </a> <a href=https://stackoverflow.com/users/1755598/codewizard target=_blank rel=noopener title="Follow me on Stack Overflow" class="md-social__link social-class__stackoverflow"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M291 311 95.3 269.7 87.1 309l195.7 41zm51-87L188.5 95.7 163 126.5l153.5 128.3zm-31.2 39.7L129.5 179l-16.7 36.5L294 300zM262.3 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H43V320H3v160h359.5V320h-40z"/></svg> </a> <a href=https://wa.me/972548122310 target=_blank rel=noopener title="Follow me on WhatsApp" class="md-social__link social-class__whatsapp"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157m-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1s56.2 81.2 56.1 130.5c0 101.8-84.9 184.6-186.6 184.6m101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7s-12.5-30.1-17.1-41.2c-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3s19.9 53.7 22.6 57.4c2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4s4.6-24.1 3.2-26.4c-1.3-2.5-5-3.9-10.5-6.6"/></svg> </a> <a href=mailto:nirg@codewizard.co.il target=_blank rel=noopener title="Email me" class="md-social__link social-class__email"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.footnote.tooltips", "content.tabs.link", "content.tooltips", "content.footer.last-updated", "content.footer.contributors", {"navigation.expand": false}, "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", {"navigation.top": true}, "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate", "toc.sticky"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.50899def.min.js></script> <script src=../../js/print-site.js></script> <script src="https://buttons.github.io/buttons.js?v=1772199666"></script> <script src=https://unpkg.com/mermaid@11/dist/mermaid.esm.min.mjs type=module></script> </body> </html>